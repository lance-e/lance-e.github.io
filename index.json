[{"categories":["os"],"content":"å“ˆå·¥å¤§æ“ä½œç³»ç»Ÿlab1","date":"2024-04-11","objectID":"/hit_os_lab1/","tags":["lab"],"title":"Hit_os_lab1","uri":"/hit_os_lab1/"},{"categories":["os"],"content":"hit os lab1 ","date":"2024-04-11","objectID":"/hit_os_lab1/:0:0","tags":["lab"],"title":"Hit_os_lab1","uri":"/hit_os_lab1/"},{"categories":["os"],"content":"1.å®éªŒå†…å®¹ æ­¤æ¬¡å®éªŒçš„åŸºæœ¬å†…å®¹æ˜¯ï¼š é˜…è¯»ã€ŠLinux å†…æ ¸å®Œå…¨æ³¨é‡Šã€‹çš„ç¬¬ 6 ç« ï¼Œå¯¹è®¡ç®—æœºå’Œ Linux 0.11 çš„å¼•å¯¼è¿‡ç¨‹è¿›è¡Œåˆæ­¥çš„äº†è§£ï¼› æŒ‰ç…§ä¸‹é¢çš„è¦æ±‚æ”¹å†™ 0.11 çš„å¼•å¯¼ç¨‹åº bootsect.s æœ‰å…´è¶£åŒå­¦å¯ä»¥åšåšè¿›å…¥ä¿æŠ¤æ¨¡å¼å‰çš„è®¾ç½®ç¨‹åº setup.sã€‚ æ”¹å†™ bootsect.s ä¸»è¦å®Œæˆå¦‚ä¸‹åŠŸèƒ½ï¼š bootsect.s èƒ½åœ¨å±å¹•ä¸Šæ‰“å°ä¸€æ®µæç¤ºä¿¡æ¯â€œXXX is bootingâ€¦â€ï¼Œå…¶ä¸­ XXX æ˜¯ä½ ç»™è‡ªå·±çš„æ“ä½œç³»ç»Ÿèµ·çš„åå­—ï¼Œä¾‹å¦‚ LZJosã€Sunix ç­‰ï¼ˆå¯ä»¥ä¸Šè®ºå›ä¸Šç§€ç§€è°çš„ OS åå­—æœ€å¸…ï¼Œä¹Ÿå¯ä»¥æ˜¾ç¤ºä¸€ä¸ªç‰¹è‰² logoï¼Œä»¥è¡¨ç¤ºè‡ªå·±æ“ä½œç³»ç»Ÿçš„ä¸ä¼—ä¸åŒã€‚ï¼‰ æ”¹å†™ setup.s ä¸»è¦å®Œæˆå¦‚ä¸‹åŠŸèƒ½ï¼š bootsect.s èƒ½å®Œæˆ setup.s çš„è½½å…¥ï¼Œå¹¶è·³è½¬åˆ° setup.s å¼€å§‹åœ°å€æ‰§è¡Œã€‚è€Œ setup.s å‘å±å¹•è¾“å‡ºä¸€è¡Œ\"Now we are in SETUP\"ã€‚ setup.s èƒ½è·å–è‡³å°‘ä¸€ä¸ªåŸºæœ¬çš„ç¡¬ä»¶å‚æ•°ï¼ˆå¦‚å†…å­˜å‚æ•°ã€æ˜¾å¡å‚æ•°ã€ç¡¬ç›˜å‚æ•°ç­‰ï¼‰ï¼Œå°†å…¶å­˜æ”¾åœ¨å†…å­˜çš„ç‰¹å®šåœ°å€ï¼Œå¹¶è¾“å‡ºåˆ°å±å¹•ä¸Šã€‚ setup.s ä¸å†åŠ è½½ Linux å†…æ ¸ï¼Œä¿æŒä¸Šè¿°ä¿¡æ¯æ˜¾ç¤ºåœ¨å±å¹•ä¸Šå³å¯ã€‚ åœ¨å®éªŒæŠ¥å‘Šä¸­å›ç­”å¦‚ä¸‹é—®é¢˜ï¼š æœ‰æ—¶ï¼Œç»§æ‰¿ä¼ ç»Ÿæ„å‘³ç€åˆ«æ‰‹è¹©è„šã€‚x86 è®¡ç®—æœºä¸ºäº†å‘ä¸‹å…¼å®¹ï¼Œå¯¼è‡´å¯åŠ¨è¿‡ç¨‹æ¯”è¾ƒå¤æ‚ã€‚è¯·æ‰¾å‡º x86 è®¡ç®—æœºå¯åŠ¨è¿‡ç¨‹ä¸­ï¼Œè¢«ç¡¬ä»¶å¼ºåˆ¶ï¼Œè½¯ä»¶å¿…é¡»éµå®ˆçš„ä¸¤ä¸ªâ€œå¤šæ­¤ä¸€ä¸¾â€çš„æ­¥éª¤ï¼ˆå¤šæ‰¾å‡ ä¸ªä¹Ÿæ— å¦¨ï¼‰ï¼Œè¯´è¯´å®ƒä»¬ä¸ºä»€ä¹ˆå¤šæ­¤ä¸€ä¸¾ï¼Œå¹¶è®¾è®¡æ›´ç®€æ´çš„æ›¿ä»£æ–¹æ¡ˆã€‚ ","date":"2024-04-11","objectID":"/hit_os_lab1/:0:1","tags":["lab"],"title":"Hit_os_lab1","uri":"/hit_os_lab1/"},{"categories":["os"],"content":"2.å®éªŒå¼€å§‹ 1.æ”¹å†™bootsect.s ä½¿ç”¨åˆ°int 0x10ä¸­æ–­è¿›è¡Œå±å¹•æ‰“å°,å‡ºå…¥å‚æ•°ï¼š å¯„å­˜å™¨ å‚æ•° AL æ˜¾ç¤ºæ¨¡å¼ BH è§†é¢‘é¡µ BL å±æ€§å€¼ï¼ˆå¦‚æœAL=0x00æˆ–0x01 CX å­—ç¬¦ä¸²çš„é•¿åº¦ DH,DL å±å¹•ä¸Šæ˜¾ç¤ºèµ·å§‹ä½ç½®çš„è¡Œã€åˆ—å€¼ ES:BP å­—ç¬¦ä¸²çš„æ®µ:åç§»åœ°å€ åœ¨å±å¹•ä¸Šæ‰“å°çš„æºç ï¼š ! Print some inane message mov ah,#0x03 ! read cursor pos xor bh,bh int 0x10 mov cx,#24 mov bx,#0x0007 ! page 0, attribute 7 (normal) mov bp,#msg1 mov ax,#0x1301 ! write string, move cursor int 0x10 msg1: .byte 13,10 .ascii \"Loading system ...\" .byte 13,10,13,10 .org 508 root_dev: .word ROOT_DEV boot_flag: .word 0xAA55 æˆ‘ä»¬å°†æºç ä¿®æ”¹å¹¶åªä¿ç•™æ ¸å¿ƒéƒ¨åˆ† entry _start _start: mov ah,#0x03 ! read cursor pos xor bh,bh int 0x10 mov cx,#26 mov bx,#0x0007 ! page 0, attribute 7 (normal) mov bp,#msg1 mov ax,#0x07c0 mov es,ax ! mov ax,#0x1301 ! write string, move cursor int 0x10 my_loop: jmp my_loop ! æ­»å¾ªç¯ msg1: .byte 13,10 .ascii \"LanceOS starting !!!\" .byte 13,10,13,10 .org 510 boot_flag: .word 0xAA55 æˆ‘ä»¬ç›¸å¯¹äºæºç è¿›è¡Œä¿®æ”¹çš„éƒ¨åˆ†ï¼š mov cx,#26 !è¿™é‡Œæ˜¯å› ä¸ºæˆ‘ä»¬ä¿®æ”¹äº†msg1ä¸­çš„asciiç æ•°é‡ï¼Œä¿®æ”¹ä¸ºäº†26 mov ax,#0x07c0 ï¼å› ä¸ºæºç åœ¨è¿™ä¹‹å‰å·²ç»ä¿®æ”¹äº†esçš„å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬å»é™¤æ— å…³ä»£ç åä¹Ÿè¦ç»™esèµ‹å€¼ï¼Œesæ˜¯å­—ç¬¦ä¸²çš„æ®µåœ°å€ mov es,ax ï¼ my_loop: jmp my_loop ! æ­»å¾ªç¯ msg1: .byte 13,10 .ascii \"LanceOS starting !!!\" ï¼ä¿®æ”¹ä¸ºè¦ä¿®æ”¹çš„å€¼ .byte 13,10,13,10 .org 510 ï¼è¿™é‡Œæ˜¯å› ä¸ºæˆ‘ä»¬å»é™¤äº†æ— å…³çš„root_dev: .word ROOT_DEV,åˆè¦ä¿è¯boot_flag: .word 0xAA55åœ¨å¼•å¯¼ç£ç›˜æœ€åä¸¤ä¸ªå­—èŠ‚ï¼Œæ‰€ä»¥508ä¿®æ”¹ä¸º510 æ‰“å°æˆåŠŸ 2.æ”¹å†™setup.s ç”±äºæˆ‘ä»¬æ˜¯é‡æ–°å¼€å§‹å†™çš„bootsect.sï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨æ–°çš„bootsect.sä¸­æ·»åŠ å¯åŠ¨setupçš„ä»£ç  æ·»åŠ åçš„bootsect.sï¼ŒæˆåŠŸåŠ è½½setup SETUPLEN = 4 ! nr of setup-sectors SETUPSEG = 0x07e0 ! å› ä¸ºæˆ‘ä»¬åœ¨æ–°çš„bootsectä¸­å¹¶æ²¡æœ‰å°†ä»£ç ç§»åŠ¨åˆ°0x90000ï¼Œæ‰€ä»¥ä¾æ—§è¿˜æ˜¯åœ¨0x07c0,åœ¨0x07c0åŸºç¡€ä¸Šç§»åŠ¨521å­—èŠ‚ï¼Œæ‰€ä»¥æ”¹æˆ0x07e0 entry _start _start: mov ah,#0x03 ! read cursor pos xor bh,bh int 0x10 mov cx,#26 mov bx,#0x0007 ! page 0, attribute 7 (normal) mov bp,#msg1 mov ax,#0x07c0 mov es,ax mov ax,#0x1301 ! write string, move cursor int 0x10 load_setup: mov dx,#0x0000 ! drive 0, head 0 mov cx,#0x0002 ! sector 2, track 0 mov bx,#0x0200 ! address = 512, in INITSEG mov ax,#0x0200+SETUPLEN ! service 2, nr of sectors int 0x13 ! read it jnc ok_load_setup ! ok - continue mov dx,#0x0000 mov ax,#0x0000 ! reset the diskette int 0x13 j load_setup ok_load_setup: jmpi 0,SETUPSEG msg1: .byte 13,10 .ascii \"LanceOS starting !!!\" .byte 13,10,13,10 .org 510 boot_flag: .word 0xAA55 æ–°çš„setup.sï¼ŒæˆåŠŸæ‰“å°\"Now we are in SETUP\" entry _start _start: mov ah,#0x03 ! read cursor pos xor bh,bh int 0x10 mov cx,#25 mov bx,#0x0007 ! page 0, attribute 7 (normal) mov bp,#msg2 mov ax,cs mov es,ax mov ax,#0x1301 ! write string, move cursor int 0x10 my_loop: jmp my_loop ! æ­»å¾ªç¯ msg2: .byte 13,10 .ascii \"Now we are in SETUP\" .byte 13,10,13,10 .org 510 boot_flag: .word 0xAA55 è·å–ç¡¬ä»¶å‚æ•°ï¼Œå¹¶æ‰“å°åˆ°å±å¹•ï¼Œè¿™éƒ¨åˆ†ä»£ç æ¯”è¾ƒå¤æ‚ï¼Œç›´æ¥çœ‹å®éªŒç»™å‡ºçš„ç­”æ¡ˆå§ï¼š INITSEG = 0x9000 entry _start _start: ! Print \"NOW we are in SETUP\" mov ah,#0x03 xor bh,bh int 0x10 mov cx,#25 mov bx,#0x0007 mov bp,#msg2 mov ax,cs mov es,ax mov ax,#0x1301 int 0x10 mov ax,cs mov es,ax ! init ss:sp mov ax,#INITSEG mov ss,ax mov sp,#0xFF00 ! Get Params mov ax,#INITSEG mov ds,ax mov ah,#0x03 xor bh,bh int 0x10 mov [0],dx mov ah,#0x88 int 0x15 mov [2],ax mov ax,#0x0000 mov ds,ax lds si,[4*0x41] mov ax,#INITSEG mov es,ax mov di,#0x0004 mov cx,#0x10 rep movsb ! Be Ready to Print mov ax,cs mov es,ax mov ax,#INITSEG mov ds,ax ! Cursor Position mov ah,#0x03 xor bh,bh int 0x10 mov cx,#18 mov bx,#0x0007 mov bp,#msg_cursor mov ax,#0x1301 int 0x10 mov dx,[0] call print_hex ! Memory Size mov ah,#0x03 xor bh,bh int 0x10 mov cx,#14 mov bx,#0x0007 mov bp,#msg_memory mov ax,#0x1301 int 0x10 mov dx,[2] call print_hex ! Add KB mov ah,#0x03 xor bh,bh int 0x10 mov cx,#2 mov bx,#0x0007 mov bp,#msg_kb mov ax,#0x1301 int 0x10 ! Cyles mov ah,#0x03 xor bh,bh int 0x10 mov cx,#7 mov bx,#0x0007 mov bp,#msg_cyles mov ax,#0x1301 int 0x10 mov dx,[4] call print_hex ! Heads mov ah,#0x03 xor bh,bh int 0x10 mov cx,#8 mov bx,#0x0007 mov bp,#msg_heads mov ax,#0x1301 int 0x10 mov dx,[6] call print_hex ! Secotrs mov ah,#0x03 xor bh,bh int 0x10 mov cx,#10 mov bx,#0x0007 mov bp,#msg_sectors mov ax,#0x1301 int 0x10 mov dx,[12] call print_hex inf_loop: jmp inf_loop print_hex: mov cx,#4 print_digit: rol dx,#4 mov ax,#0xe0f and al,dl add al,#0x30 cmp al,#0x3a jl outp add al,#0x07 outp: int 0x10 loop print_digit ret print_nl: mov ax,#0xe0d ! CR","date":"2024-04-11","objectID":"/hit_os_lab1/:0:2","tags":["lab"],"title":"Hit_os_lab1","uri":"/hit_os_lab1/"},{"categories":["å·¥å…·"],"content":"å¯¹vimçš„éƒ¨åˆ†è¾ƒå¸¸ç”¨æŒ‰é”®è¿›è¡Œå°æ€»ç»“","date":"2024-03-26","objectID":"/vim%E9%83%A8%E5%88%86%E5%B8%B8%E7%94%A8%E6%8C%89%E9%94%AE/","tags":["å·¥å…·"],"title":"Viméƒ¨åˆ†å¸¸ç”¨æŒ‰é”®","uri":"/vim%E9%83%A8%E5%88%86%E5%B8%B8%E7%94%A8%E6%8C%89%E9%94%AE/"},{"categories":["å·¥å…·"],"content":"vim éƒ¨åˆ†å¸¸ç”¨æŒ‰é”®æ€»ç»“ ç§»åŠ¨ ä¸Šï¼šk ä¸‹ï¼šj å·¦ï¼šh å³ï¼šl å‘åç§»åŠ¨ä¸€ä¸ªå•è¯ï¼šw å‘å‰ç§»åŠ¨ä¸€ä¸ªå•è¯ï¼šb è·³è½¬æ–‡ä»¶æœ€åä¸€è¡Œï¼šG è·³è½¬æ–‡ä»¶ç¬¬ä¸€è¡Œï¼šgg æ˜¾ç¤ºå…‰æ ‡æ‰€åœ¨è¡Œå’Œæ–‡ä»¶çŠ¶æ€ä¿¡æ¯ï¼šctrl+G è·³è½¬æŒ‡å®šè¡Œå·ï¼šè¡Œå·+G è·³è½¬åˆ°è¡Œå°¾ï¼š$ è·³è½¬åˆ°è¡Œé¦–ï¼š^ å±å¹•åº•è¡Œï¼šL å±å¹•é¡¶è¡Œï¼šH å±å¹•ä¸­é—´è¡Œï¼šM æ’å…¥ å½“å‰ä½ç½®æ’å…¥ï¼ši å½“å‰ä½ç½®åé¢ä¸€ä¸ªä½ç½®æ’å…¥ï¼ša å½“å‰è¡Œå°¾æ’å…¥ï¼šA åœ¨å½“å‰ä½ç½®ä¸‹ä¸€è¡Œæ’å…¥ï¼šo åœ¨å½“å‰ä½ç½®ä¸Šä¸€è¡Œæ’å…¥ï¼šO åˆ é™¤ åˆ é™¤ï¼šx åˆ é™¤å•è¯ï¼šdw åˆ é™¤å½“å‰ä½ç½®åˆ°æœ«å°¾ï¼šd$ åˆ é™¤æ•´è¡Œï¼šdd æ’¤é”€ æ’¤é”€æœ€åæ‰§è¡Œçš„å‘½ä»¤ï¼šu æ’¤é”€æ•´è¡Œçš„ä¿®æ”¹ï¼šU æ’¤é”€æ’¤é”€å‘½ä»¤ï¼šctrl+r å¤åˆ¶ç²˜è´´ å°†æœ€ååˆ é™¤çš„å†…å®¹ç½®å…¥å…‰æ ‡ä¹‹å(ç²˜è´´)ï¼šp å¤åˆ¶ï¼šy æ›¿æ¢ æ›¿æ¢å­—ç¬¦ï¼šr+è¦æ›¿æ¢æˆçš„å­—ç¬¦ ä»å½“å‰ä½ç½®å¼€å§‹ä¸€ç›´æ›¿æ¢(æ›¿æ¢æ¨¡å¼)ï¼šR æ”¹å˜å•è¯ä»å½“å‰ä½ç½®åˆ°å•è¯å°¾,åŒæ—¶ä¹Ÿè¿›å…¥æ’å…¥æ¨¡å¼ï¼šce+è¦æ›¿æ¢çš„å•è¯ æ”¹å˜ä»å½“å‰ä½ç½®åˆ°è¡Œå°¾ï¼šc$ æŸ¥æ‰¾ æŸ¥æ‰¾å­—ç¬¦ä¸²ï¼š/ ç›®æ ‡å­—ç¬¦ä¸²(? ä¸/ æŸ¥æ‰¾æ–¹å‘ç›¸å) æŸ¥æ‰¾ä¸Šä¸€æ¬¡å­—ç¬¦ä¸²ï¼šn æŸ¥æ‰¾ä¸Šä¸€æ¬¡å­—ç¬¦ä¸²(åå‘)ï¼šN é…å¯¹æ‹¬å·æŸ¥æ‰¾ï¼š% æ›¿æ¢ æ›¿æ¢ä¸€ä¸ªåŒ¹é…ï¼šs/old/new/ å°†oldæ›¿æ¢ä¸ºnew æ›¿æ¢å…¨è¡Œï¼šs/old/new/g å‘½ä»¤ æ‰§è¡Œå¤–éƒ¨å‘½ä»¤ï¼š:! ä¿å­˜ä¸ºæŒ‡å®šæ–‡ä»¶åï¼š:w æ–‡ä»¶å æå–åˆå¹¶æ–‡ä»¶ï¼š:r æ–‡ä»¶å è®¡æ•°æ“ä½œï¼š2w(å‘å‰ç§»åŠ¨2ä¸ªå•è¯)ï¼Œ3e(å‘å‰ç§»åŠ¨åˆ°3ä¸ªå•è¯æœ«å°¾) d2w(åˆ é™¤ä¸¤ä¸ªå•è¯) å¯è§† å¯è§†æ¨¡å¼ï¼šv (å¯é€‰æ‹©æˆªå–æ–‡æœ¬) ","date":"2024-03-26","objectID":"/vim%E9%83%A8%E5%88%86%E5%B8%B8%E7%94%A8%E6%8C%89%E9%94%AE/:0:0","tags":["å·¥å…·"],"title":"Viméƒ¨åˆ†å¸¸ç”¨æŒ‰é”®","uri":"/vim%E9%83%A8%E5%88%86%E5%B8%B8%E7%94%A8%E6%8C%89%E9%94%AE/"},{"categories":["æ‚äº‹"],"content":"2024è§„åˆ’","date":"2024-02-26","objectID":"/2024%E6%96%B0%E5%AD%A6%E6%9C%9F%E8%A7%84%E5%88%92/","tags":["æ‚äº‹"],"title":"2024æ–°å­¦æœŸè§„åˆ’","uri":"/2024%E6%96%B0%E5%AD%A6%E6%9C%9F%E8%A7%84%E5%88%92/"},{"categories":["æ‚äº‹"],"content":"2024å¹´ä¸ŠåŠå¹´å­¦ä¹ è§„åˆ’ å‰è¨€ ç´§èµ¶æ…¢èµ¶ï¼Œè¿˜æ˜¯åœ¨å¼€å­¦å‰æŠŠç®€æ˜“dockerå®ç°äº†ï¼Œè™½è¯´æ˜¯dockerï¼Œå®é™…ä¸Šä¹Ÿåªæ˜¯å®ç°äº†docker engineã€‚ä¹Ÿä¸çŸ¥é“è¿™ä¸œè¥¿å¯¹åç«¯çš„å·¥ä½œæœ‰æ— ç”¨å¤„ã€‚åŸæœ¬è§„åˆ’çš„å¯’å‡ç»§ç»­å­¦æ•°æ®ç»“æ„çš„ï¼Œå¥ˆä½•æ—¶é—´ç¡®å®ä¸å¤Ÿç”¨ï¼Œå†åŠ ä¸Šåœ¨å®¶çš„æ•ˆç‡ä½ä¸‹ï¼Œè¿˜æ˜¯é¸½äº†ã€‚ æœ€è¿‘ä¹Ÿæ˜¯å—åˆ°å¾ˆå¤šå­¦é•¿çš„å¯å‘ï¼Œå°¤å…¶æ˜¯wxgçš„å­¦é•¿ï¼Œåœ¨æˆ‘è¿™ä¸ªæ—¶å€™å°±leetcode150+äº†ï¼Œè¿˜æŠŠCSAPPçœ‹å®Œäº†ï¼Œç¡®å®å¼ºå•Šï¼Œçœ‹æ¥æˆ‘è¿˜å¾—æ›´åŠªåŠ›æ‰èƒ½è·Ÿä¸Šå­¦é•¿çš„è„šæ­¥å‘€ï¼å­¦é•¿åœ¨å¤§ä¸€ä¸‹å°±è‡ªå·±æ‰‹æ“äº†ä¸€ä¸ªtinyOSï¼Œæˆ‘è§‰å¾—æˆ‘ä¹Ÿåº”è¯¥æ“ä¸€ä¸ªå½“é¡¹ç›®ã€‚ flag æ•°æ®ç»“æ„ä¸ç®—æ³• æ¯æ—¥åˆ·é¢˜ æ“ä½œç³»ç»Ÿ æ‰‹æ“ä¸€ä¸ªos c/c++ è®¡ç½‘ æ•°æ®åº“â€¦ å…¶ä»–çš„æš‚æ—¶æ²¡æƒ³å¥½ ","date":"2024-02-26","objectID":"/2024%E6%96%B0%E5%AD%A6%E6%9C%9F%E8%A7%84%E5%88%92/:0:0","tags":["æ‚äº‹"],"title":"2024æ–°å­¦æœŸè§„åˆ’","uri":"/2024%E6%96%B0%E5%AD%A6%E6%9C%9F%E8%A7%84%E5%88%92/"},{"categories":["äº‘åŸç”Ÿ"],"content":"å®¹å™¨ç½‘ç»œ","date":"2024-02-24","objectID":"/%E4%BB%8E0%E5%88%B01%E5%86%99docker%E4%B9%8B%E4%BA%94%E5%AE%B9%E5%99%A8%E7%BD%91%E7%BB%9C/","tags":["container"],"title":"ä»0åˆ°1å†™dockerä¹‹äº”å®¹å™¨ç½‘ç»œ","uri":"/%E4%BB%8E0%E5%88%B01%E5%86%99docker%E4%B9%8B%E4%BA%94%E5%AE%B9%E5%99%A8%E7%BD%91%E7%BB%9C/"},{"categories":["äº‘åŸç”Ÿ"],"content":"(äº”)å®¹å™¨ç½‘ç»œ (å®¹å™¨ç½‘ç»œç†è§£ä¸æ·±ï¼Œå¾…æˆ‘è®¡ç½‘å¤§æˆä¹‹æ—¥ï¼Œå†é‡æ–°å†™è¿™ç¯‡å®¹å™¨ç½‘ç»œçš„åšå®¢) linuxç½‘ç»œè™šæ‹Ÿç½‘ç»œè®¾å¤‡ vethï¼šæˆå¯¹å‡ºç°çš„è™šæ‹Ÿç½‘ç»œè®¾å¤‡ï¼Œå‘é€åˆ°vethä¸€ç«¯çš„è¯·æ±‚ä¼šä»å¦ä¸€ç«¯å‘å‡ºï¼Œå®ç°ç‚¹å¯¹ç‚¹çš„è¿æ¥ +------------------+ +------------------+ | ns1 | | ns2 | | | veth pair | | | +-+ +-+ | | 192.168.1.1/24 | +--------------+ | 192.168.1.2/24 | | (veth-ns1) +-+ +-+ (veth-ns2) | | | | | | | | | | | | | +------------------+ +------------------+ bridgeï¼šç”¨æ¥æ¡¥æ¥çš„ç½‘ç»œè®¾å¤‡ï¼Œç›¸å½“äºç°å®ä¸–ç•Œçš„äº¤æ¢æœºï¼Œå¯ä»¥è¿æ¥ä¸åŒçš„ç½‘ç»œè®¾å¤‡ï¼Œè¯·æ±‚åˆ°è¾¾bridgeè®¾å¤‡æ—¶ï¼Œå¯ä»¥é€šè¿‡æŠ¥æ–‡ä¸­Macåœ°å€è¿›è¡Œå¹¿æ’­æˆ–ç¾¤å‘ã€‚ +------------------+ +------------------+ +------------------+ | | | | | | | | | | | | | | | | | | | ns1 | | ns2 | | ns3 | | | | | | | | | | | | | | | | | | | | 192.168.1.1/24 | | 192.168.1.2/24 | | 192.168.1.3/24 | +----(veth-ns1)----+ +----(veth-ns2)----+ +----(veth-ns3)----+ + + + | | | | | | + + + +--(veth-ns1-br)-------------(veth-ns2-br)------------(veth-ns3-br)--+ | | | linux-bridge | | | +--------------------------------------------------------------------+ linuxè·¯ç”±è¡¨ å¦‚æœä¸¤ä¸ªnamespaceå¤„äºä¸åŒçš„ä¸¤ä¸ªå­ç½‘ä¸­ï¼Œé‚£ä¹ˆå°±ä¸èƒ½é€šè¿‡bredgeè¿›è¡Œè¿æ¥äº†ï¼Œéœ€ç”¨è·¯ç”±å™¨ä¸‰å±‚è½¬å‘ï¼Œä½†æ˜¯linuxå¹¶æœªæä¾›è™šæ‹Ÿè·¯ç”±å™¨è®¾å¤‡ï¼Œlinuxæœ¬èº«å°±å…·æœ‰è·¯ç”±å™¨åŠŸèƒ½ï¼Œ linux iptables iptablesç”¨æ¥ç®¡ç†åŒ…çš„æµåŠ¨å’Œè½¬é€,ç”¨äºå®¹å™¨å’Œå®¿ä¸»æœºå¤–éƒ¨çš„ç½‘ç»œé€šä¿¡ MASQUERADE:å°†namespaceä¸­çš„æºåœ°å€è½¬æ¢ä¸ºå®¿ä¸»æœºä¸­çš„åœ°å€ï¼Œå°±å¯ä»¥è®¿é—®å®¿ä¸»æœºå¤–çš„ç½‘ç»œäº† DNAT:å°†å®¿ä¸»æœºä¸Šç«¯å£çš„tcpè¯·æ±‚è½¬å‘åˆ°namespaceä¸­çš„åœ°å€ï¼Œå®ç°å¤–éƒ¨çš„åº”ç”¨è°ƒç”¨ å¦å¤–çš„ä¸¤ä¸ªç»„ä»¶ï¼š ç½‘ç»œé©±åŠ¨ï¼šç½‘ç»œçš„ç®¡ç† IPAMï¼šåˆ†é…ip å…·ä½“å®ç°è¯·çœ‹æˆ‘çš„é¡¹ç›®ä»£ç â€¦ ","date":"2024-02-24","objectID":"/%E4%BB%8E0%E5%88%B01%E5%86%99docker%E4%B9%8B%E4%BA%94%E5%AE%B9%E5%99%A8%E7%BD%91%E7%BB%9C/:0:0","tags":["container"],"title":"ä»0åˆ°1å†™dockerä¹‹äº”å®¹å™¨ç½‘ç»œ","uri":"/%E4%BB%8E0%E5%88%B01%E5%86%99docker%E4%B9%8B%E4%BA%94%E5%AE%B9%E5%99%A8%E7%BD%91%E7%BB%9C/"},{"categories":["äº‘åŸç”Ÿ"],"content":"å‚è€ƒæ–‡æ¡£ ã€Šè‡ªå·±åŠ¨æ‰‹å†™dockerã€‹ https://www.zhaohuabing.com/post/2020-03-12-linux-network-virtualization/ ","date":"2024-02-24","objectID":"/%E4%BB%8E0%E5%88%B01%E5%86%99docker%E4%B9%8B%E4%BA%94%E5%AE%B9%E5%99%A8%E7%BD%91%E7%BB%9C/:0:1","tags":["container"],"title":"ä»0åˆ°1å†™dockerä¹‹äº”å®¹å™¨ç½‘ç»œ","uri":"/%E4%BB%8E0%E5%88%B01%E5%86%99docker%E4%B9%8B%E4%BA%94%E5%AE%B9%E5%99%A8%E7%BD%91%E7%BB%9C/"},{"categories":["äº‘åŸç”Ÿ"],"content":"æ„å»ºå¤æ‚å®¹å™¨ï¼Œæ”¯æŒäº†-d,ps,logs,exec,stop,rm,-e,å¹¶ä¼˜åŒ–äº†overlayFSçš„ç»“æ„","date":"2024-02-24","objectID":"/%E4%BB%8E0%E5%88%B01%E5%86%99docker%E4%B9%8B%E5%9B%9B%E6%9E%84%E5%BB%BA%E5%A4%8D%E6%9D%82%E5%AE%B9%E5%99%A8/","tags":["container"],"title":"ä»0åˆ°1å†™dockerä¹‹å››æ„å»ºå¤æ‚å®¹å™¨","uri":"/%E4%BB%8E0%E5%88%B01%E5%86%99docker%E4%B9%8B%E5%9B%9B%E6%9E%84%E5%BB%BA%E5%A4%8D%E6%9D%82%E5%AE%B9%E5%99%A8/"},{"categories":["äº‘åŸç”Ÿ"],"content":"(å››)æ„å»ºå¤æ‚å®¹å™¨ 1.å®¹å™¨åå°è¿è¡Œ å¢åŠ detachæ ‡ç­¾ï¼Œå¹¶ä¸å…è®¸åˆ›å»ºttyå’ŒdetachåŒæ—¶å­˜åœ¨ if tty \u0026\u0026 detach{ log.Println(\"the tty and detach can't exist at the same time\") return } å¹¶ä¸”åœ¨Runå‘½ä»¤ä¸­æ›´æ”¹ï¼š if tty { cmd.Wait() //çˆ¶è¿›ç¨‹ç­‰å¾…å­è¿›ç¨‹ } å› ä¸ºcmd.Wait()æ˜¯è®©çˆ¶è¿›ç¨‹ç­‰å¾…å­è¿›ç¨‹ï¼Œå¦‚æœæˆ‘ä»¬è¦å®ç°è®©å®¹å™¨åå°è¿è¡Œï¼Œé‚£ä¹ˆå°±ä¸éœ€è¦çˆ¶è¿›ç¨‹ç­‰å¾…å­è¿›ç¨‹ï¼Œå­è¿›ç¨‹æ­¤æ—¶å°±ä¼šè¢«initè¿›ç¨‹æ§åˆ¶ 2.ä¿å­˜å®¹å™¨ä¿¡æ¯ åœ¨åˆ›å»ºå®¹å™¨çš„åŒæ—¶ï¼Œå°†å®¹å™¨ä¿¡æ¯å†™å…¥åˆ°å®¿ä¸»æœºçš„æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬ä¿å­˜åˆ°/var/run/gockerç›®å½•ä¸­ type ContainerInfo struct { Pid string `json:\"pid\"` ContainerName string `json:\"container_name\"` ContainerId string ` json:\"container_id\"` CreateAtTime string `json:\"create_at_time\"` Command string `json:\"command\"` Status string `json:\"status\"` } var ( RUNING = \"runing\" STOP = \"stopped\" EXIT = \"exited\" DefaultInfoLocation = \"/var/run/gocker/%s/\" ConfigName = \"config.json\" ) func RecordContainerInformation(containerName string, containerPid int, command []string) (string, error) { id := randStringBytes(10) createTime := time.Now().Format(\"2006-01-02 15:04:05\") if containerName == \"\" { containerName = id } cmd := strings.Join(command, \" \") info := \u0026ContainerInfo{ Pid: strconv.Itoa(containerPid), ContainerName: containerName, ContainerId: id, CreateAtTime: createTime, Status: RUNING, Command: cmd, } infoByte, err := json.Marshal(info) if err != nil { log.Println(\"can't marshal the information\") return \"\", err } location := fmt.Sprintf(DefaultInfoLocation, containerName) log.Println(\"the location is \", location) _, err = os.Stat(location) if err != nil \u0026\u0026 !os.IsNotExist(err) { log.Println(\"the status of the config file can't judge\") return \"\", err } if os.IsNotExist(err) { if err := os.MkdirAll(location, 0755); err != nil { return \"\", err } } file, err := os.Create(path.Join(location, ConfigName)) if err != nil { log.Println(\"can't create the config file\") return \"\", err } defer file.Close() _, err = file.Write(infoByte) if err != nil { log.Println(\"can't write the byte of information into the target file\") return \"\", err } log.Println(\"record the informaiton successful!\") return containerName, nil } func randStringBytes(n int) string { num := \"01234567890123456789\" by := make([]byte, n) r := rand.New(rand.NewSource(time.Now().Unix())) for i, _ := range by { by[i] = num[r.Intn(n)] } return string(by) } func DeleteContainerInfo(containerName string){ location := fmt.Sprintf(DefaultInfoLocation,containerName) dirPath := location+ConfigName if err := os.RemoveAll(dirPath);err != nil{ log.Println(\"can't delete the config file\") } } 3.å®ç°pså‘½ä»¤ pså‘½ä»¤å°±æ˜¯å»å‰é¢ä¿å­˜å®¹å™¨ä¿¡æ¯çš„ç›®å½•ä¸­éå†æ‰€æœ‰çš„æ–‡ä»¶ï¼Œæ‹¿åˆ°æ‰€æœ‰çš„ä¿¡æ¯ func ListContainers() { dir := fmt.Sprintf(DefaultInfoLocation, \"\") dir = dir[:len(dir)-1] files, err := os.ReadDir(dir) if err != nil { log.Println(\"can't read the all directory\") return } var containers []*ContainerInfo for _, file := range files { info, _ := file.Info() data, err := readInfoFromFile(info) if err != nil { log.Println(\"read container information failed\") continue } containers = append(containers, data) } w:=tabwriter.NewWriter(os.Stdout,12,1,3,' ',0) fmt.Fprintf(w,\"Container_Id\\tContainer_Name\\tPid\\tStatus\\tCommand\\tCreate_At_Time\\n\") for _,con := range containers { fmt.Fprintf(w,\"%s\\t%s\\t%s\\t%s\\t%s\\t%s\\t\\n\",con.ContainerId,con.ContainerName,con.Pid,con.Status,con.Command,con.CreateAtTime, ) } if err := w.Flush();err != nil{ log.Println(\"can't flush to stdout\") return } } func readInfoFromFile(file os.FileInfo) (*ContainerInfo, error) { containerName := file.Name() dir := fmt.Sprintf(DefaultInfoLocation, containerName) dir = dir + ConfigName info, err := os.ReadFile(dir) if err != nil { log.Println(\"can't read the file\") return nil, err } var data = \u0026ContainerInfo{} err = json.Unmarshal(info, data) if err != nil { log.Println(\"can't unmarshal the information \") return nil, err } return data, nil } 4.å®ç°logså‘½ä»¤ å½“ä½¿ç”¨äº†-dæ ‡ç­¾ï¼Œæ­¤æ—¶çš„åå°è¿è¡Œçš„å®¹å™¨ï¼Œæˆ‘ä»¬æ˜¯æ— æ³•çŸ¥é“è¿è¡Œæƒ…å†µçš„ï¼Œæ‰€ä»¥å°±éœ€è¦logsæ¥è®°å½•ä¸‹åå°è¿è¡Œå®¹å™¨çš„æ ‡å‡†è¾“å‡º éœ€è¦å…ˆå°†detachå®¹å™¨çš„æ ‡å‡†è¾“å‡ºæµå®šå‘åˆ°logæ–‡ä»¶ä¸­ï¼Œåœ¨åˆ›å»ºçˆ¶è¿›ç¨‹çš„å‡½æ•°newparentProcessä¸­ï¼š if tty { cmd.Stdin = os.Stdin cmd.Stdout = os.Stdout cmd.Stderr = os.Stderr } else { dir := fmt.Sprintf(DefaultInfoLocation,containerName) if err := os.MkdirAll(dir,0622);err!= nil{ log.Println(\"can't make all directory\")","date":"2024-02-24","objectID":"/%E4%BB%8E0%E5%88%B01%E5%86%99docker%E4%B9%8B%E5%9B%9B%E6%9E%84%E5%BB%BA%E5%A4%8D%E6%9D%82%E5%AE%B9%E5%99%A8/:0:0","tags":["container"],"title":"ä»0åˆ°1å†™dockerä¹‹å››æ„å»ºå¤æ‚å®¹å™¨","uri":"/%E4%BB%8E0%E5%88%B01%E5%86%99docker%E4%B9%8B%E5%9B%9B%E6%9E%84%E5%BB%BA%E5%A4%8D%E6%9D%82%E5%AE%B9%E5%99%A8/"},{"categories":["äº‘åŸç”Ÿ"],"content":"æ„å»ºç®€æ˜“é•œåƒï¼Œå¹¶ä½¿ç”¨overlayFSåŒ…è£…é•œåƒï¼Œæ•°æ®å·æŒ‚è½½ï¼Œæ”¯æŒç®€å•å®¹å™¨æ‰“åŒ…","date":"2024-02-24","objectID":"/%E4%BB%8E0%E5%88%B01%E5%86%99docker%E4%B9%8B%E4%B8%89%E6%9E%84%E5%BB%BA%E7%AE%80%E6%98%93%E9%95%9C%E5%83%8F/","tags":["container"],"title":"ä»0åˆ°1å†™dockerä¹‹ä¸‰æ„å»ºç®€æ˜“é•œåƒ","uri":"/%E4%BB%8E0%E5%88%B01%E5%86%99docker%E4%B9%8B%E4%B8%89%E6%9E%84%E5%BB%BA%E7%AE%80%E6%98%93%E9%95%9C%E5%83%8F/"},{"categories":["äº‘åŸç”Ÿ"],"content":"(ä¸‰)æ„å»ºç®€æ˜“é•œåƒ: è¡¥å……çŸ¥è¯†ï¼š rootfs(root filesystem): rootfsæ˜¯åˆ†å±‚æ–‡ä»¶æ ‘çš„é¡¶ç«¯ï¼ŒåŒ…å«å¯¹ç³»ç»Ÿè¿è¡Œè‡³å…³é‡è¦çš„æ–‡ä»¶å’Œç›®å½•ï¼ŒåŒ…æ‹¬è®¾å¤‡ç›®å½•å’Œç”¨äºå¯åŠ¨ç³»ç»Ÿçš„ç¨‹åºã€‚ç³»ç»Ÿå¯åŠ¨æ—¶ï¼Œåˆå§‹åŒ–è¿›ç¨‹ä¼šå°†rootfsæŒ‚è½½åˆ°/ç›®å½•ï¼Œä¹‹åå†æŒ‚è½½å…¶ä»–æ–‡ä»¶ç³»ç»Ÿåˆ°å…¶å­ç›®å½•ã€‚ mount namespace å·¥ä½œåŸç†ï¼š æ¯ä¸ªè¿›ç¨‹å¯ä»¥åˆ›å»ºå±äºè‡ªå·±çš„ mount tableï¼Œä½†å‰ææ˜¯å¿…é¡»å…ˆå¤åˆ¶çˆ¶è¿›ç¨‹çš„ mount tableï¼Œä¹‹åå†è°ƒç”¨ mount å‘ç”Ÿçš„æ›´æ”¹éƒ½åªä¼šå½±å“å½“å‰è¿›ç¨‹çš„ mount table pivot_rootç³»ç»Ÿè°ƒç”¨ä»‹ç»ï¼š pivot_root æ˜¯ç”± Linux æä¾›çš„ä¸€ç§ç³»ç»Ÿè°ƒç”¨ï¼Œå®ƒèƒ½å¤Ÿå°†ä¸€ä¸ª mount namespace ä¸­çš„æ‰€æœ‰è¿›ç¨‹çš„æ ¹ç›®å½•å’Œå½“å‰å·¥ä½œç›®å½•åˆ‡æ¢åˆ°ä¸€ä¸ªæ–°çš„ç›®å½•ã€‚pivot_root çš„ä¸»è¦ç”¨é€”æ˜¯åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶ï¼Œå…ˆæŒ‚è½½ä¸€ä¸ªä¸´æ—¶çš„ rootfs å®Œæˆç‰¹å®šåŠŸèƒ½ï¼Œç„¶åå†åˆ‡æ¢åˆ°çœŸæ­£çš„ rootfsã€‚ å¯ä»¥å°†å½“å‰rootæ–‡ä»¶ç³»ç»Ÿç§»åŠ¨åˆ°put_oldæ–‡ä»¶å¤¹ä¸­ï¼Œç„¶åå°†new_rootæˆä¸ºæ–°çš„rootæ–‡ä»¶ç³»ç»Ÿ(æ³¨ï¼šnew_rootå’Œput_oldä¸èƒ½åŒæ—¶å­˜åœ¨å½“å‰rootçš„åŒä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿä¸­) pivot_rootä¸chrootåŒºåˆ«ï¼š chrootåªæ”¹å˜æŸä¸ªè¿›ç¨‹çš„æ ¹ç›®å½•ï¼Œç³»ç»Ÿçš„å…¶ä»–éƒ¨åˆ†ä¾æ—§è¿è¡Œäºæ—§çš„rootç›®å½•ã€‚ pivot_rootæŠŠæ•´ä¸ªç³»ç»Ÿåˆ‡æ¢åˆ°ä¸€ä¸ªæ–°çš„rootç›®å½•ä¸­ï¼Œç„¶åå»æ‰å¯¹ä¹‹å‰rootfsçš„ä¾èµ–ï¼Œä»¥ä¾¿äºå¯ä»¥umountä¹‹å‰çš„æ–‡ä»¶ç³»ç»Ÿã€‚ 1.ä½¿ç”¨busyboxæ¥æ„å»ºæç®€é•œåƒ é¡¹ç›®ä¸­ä½¿ç”¨privot_rootç³»ç»Ÿè°ƒç”¨çš„å‡½æ•°ï¼š // pivotRoot è¿›è¡Œpivot_rootç³»ç»Ÿè°ƒç”¨ func pivotRoot(root string )error{ //ä¸ºäº†ä½¿å½“å‰rootæ–‡ä»¶ç³»ç»Ÿçš„è€rootæ–‡ä»¶ç³»ç»Ÿå’Œæ–°rootæ–‡ä»¶ç³»ç»Ÿä¸åœ¨åŒä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿä¸‹ï¼Œè¿™é‡ŒæŠŠrooté‡æ–°mountä¸€æ¬¡ //bind mount å°±æ˜¯æŠŠç›¸åŒçš„å†…å®¹æ¢ä¸€ä¸ªæŒ‚è½½ç‚¹çš„æŒ‚è½½æ–¹å¼ err := syscall.Mount(root,root,\"bind\",syscall.MS_BIND |syscall.MS_REC,\"\") if err != nil{ return errors.New(\"Mount rootfs to itself failed,error:\"+err.Error()) } //å­˜å‚¨æ—§rootæ–‡ä»¶ç³»ç»Ÿ pivotDir := filepath.Join(root,\".pivot_root\") err = os.Mkdir(pivotDir,0777) if err != nil{ return err } //root ä¸ºæ–°rootæ–‡ä»¶ç³»ç»Ÿï¼ŒpivotDirä»£è¡¨put_oldæ–‡ä»¶å¤¹ï¼Œå°†æ—§rootæ–‡ä»¶ç³»ç»Ÿæ”¾åœ¨pivotDiræ–‡ä»¶å¤¹ä¸­ err = syscall.PivotRoot(root,pivotDir) if err != nil { return errors.New(\"pivot_root,error :\"+err.Error()) } err = syscall.Chdir(\"/\") if err != nil{ return errors.New(\"chdir,error:\"+err.Error()) } //æ­¤æ—¶çš„pivotDirå°±æ˜¯åˆšåˆšå­˜æ”¾æ—§çš„rootæ–‡ä»¶ç³»ç»Ÿçš„æ–‡ä»¶å¤¹ pivotDir = filepath.Join(\"/\",\".pivot_root\") err = syscall.Unmount(pivotDir,syscall.MNT_DETACH) if err != nil{ return errors.New(\"umount pivot_roo5t directory failed ,error :\"+err.Error()) } return os.Remove(pivotDir) } å†å°†åŸå…ˆåœ¨InitProcesså‡½æ•°ä¸­è¿›è¡Œmountæ“ä½œç§»åˆ°setUpMountå‡½æ•°ä¸­ï¼ŒåŒæ—¶è¿›è¡Œpivot_rootï¼š func setUpMount(){ pwd ,err := os.Getwd() if err != nil{ log.Println(\"get current location error:\"+err.Error()) return } log.Println(\"the current location is \"+pwd) err = syscall.Mount(\"\",\"/\",\"\",syscall.MS_REC | syscall.MS_PRIVATE,\"\") if err != nil{ log.Println(\"the first mount failed,error:\",err.Error()) } err = pivotRoot(pwd) if err != nil{ log.Println(\"pivot_root system call failed\") } //mount proc defaultMountFlag := syscall.MS_NODEV | syscall.MS_NOSUID | syscall.MS_NOEXEC // è¿™é‡Œçš„ MountFlag çš„æ„æ€å¦‚ä¸‹ã€‚ // 1. MS_NOEXECåœ¨æœ¬æ–‡ä»¶ç³»ç»Ÿä¸­ä¸å…è®¸è¿è¡Œå…¶ä»–ç¨‹åºã€‚ // 2. MS_NOSUIDåœ¨æœ¬ç³»ç»Ÿä¸­è¿è¡Œç¨‹åºçš„æ—¶å€™ï¼Œ ä¸å…è®¸ set-user-IDæˆ– set-group-IDã€‚ // 3. MS_NODEVè¿™ä¸ªå‚æ•°æ˜¯è‡ªä»Linux2.4ä»¥æ¥ï¼Œæ‰€æœ‰mountçš„ç³»ç»Ÿéƒ½ä¼šé»˜è®¤è®¾å®šçš„å‚æ•°ã€‚ syscall.Mount(\"proc\",\"/proc\",\"proc\",uintptr(defaultMountFlag),\"\") //mount tmpfs syscall.Mount(\"tmpfs\",\"/dev\",\"tmpfs\",syscall.MS_NOSUID | syscall.MS_STRICTATIME,\"mode=755\") } è¿™é‡ŒæŒ‚è½½åˆ°/ï¼Œå¯ä»¥ä½¿åé¢æŒ‚è½½çš„/procåœ¨é€€å‡ºå®¹å™¨æ—¶è‡ªåŠ¨umount /proc,å› ä¸ºè¿™æ ·å¯ä»¥å£°æ˜è¿™ä¸ªæ–°çš„mount namespaceç‹¬ç«‹ (æ³¨!!!:è¿™ä¸ª/æŒ‚è½½ï¼Œå¿…é¡»è¦åœ¨æ‰€æœ‰æŒ‚è½½ä¹‹å‰) ç°åœ¨InitProcesså‡½æ•°å°±æ˜¯è¿™ä¸ªæ ·å­ï¼š func InitProcess() error { data := readUserCommand() if len(data) ==0 { return errors.New(\"Run container get command failed\") } setUpMount() //å°†mountå°è£… log.Println(\"mount success\") //é€šè¿‡exec.LookPathæ‰¾åˆ°å‘½ä»¤åœ¨ç¯å¢ƒå˜é‡ä¸­è·¯å¾„ cmdpath, err := exec.LookPath(data[0]) if err != nil { log.Println(data[0],\" look path in PATH environment variable failed\") return err } err = syscall.Exec(cmdpath, data[0:], os.Environ()) //!!!æœ€é‡è¦çš„æ“ä½œ //syscall.Execè¿™ä¸ªæ–¹æ³•, //å…¶å®æœ€ç»ˆè°ƒç”¨äº†Kernelçš„intexecve(const char *filename,char *const argv[], char *const envp[]); //è¿™ä¸ªç³»ç»Ÿå‡½æ•°ã€‚å®ƒçš„ä½œç”¨æ˜¯æ‰§è¡Œå½“å‰ filenameå¯¹åº”çš„ç¨‹åºã€‚ //å®ƒä¼šè¦†ç›–å½“å‰è¿›ç¨‹çš„é•œåƒã€æ•°æ®å’Œå †æ ˆç­‰ä¿¡æ¯ï¼ŒåŒ…æ‹¬ PIDï¼Œ è¿™äº›éƒ½ä¼šè¢«å°†è¦è¿è¡Œçš„è¿›ç¨‹è¦†ç›–æ‰ã€‚ //ä¿è¯äº†æˆ‘ä»¬è¿›å…¥å®¹å™¨ä¹‹åï¼Œæˆ‘ä»¬çœ‹åˆ°çš„ç¬¬ä¸€ä¸ªè¿›ç¨‹æ˜¯æˆ‘ä»¬æŒ‡å®šçš„è¿›ç¨‹ï¼Œå› ä¸ºä¹‹å‰çš„ä¿¡æ¯éƒ½è¢«è¦†ç›–æ‰äº† if err != nil { log.Fatal(\"error :\", err.Error()) } log.Println(\"exec success\") return nil } å®Œæˆåçš„ç»“æœå°±æ˜¯è¿™æ ·ï¼š / # ps PID USER TIME COMMAND 1 root 0:00 sh 7 root 0:00 ps / # mount /dev/sdc on / type ext4 (rw,relatime,discard,errors=remount-ro,data=ordered) proc on /proc type proc (rw,nosuid,nodev,noexec,relatime) tmpfs on /dev type tmpfs (rw,nosuid,mode=755) / # ls bin dev etc home proc root sys tmp usr var æ­¤æ—¶å­è¿›ç¨‹å°±çœ‹ä¸åˆ°çˆ¶è¿›ç¨‹çš„mountä¿¡æ¯ï¼Œä¸”rootfsåˆ‡æ¢æˆäº†æˆ‘ä»¬è®¾ç½®çš„busybox 2.ä½¿ç”¨union filesystemæ¥åŒ…è£…é•œåƒ è¿™é‡Œé€‰æ‹©ä½¿ç”¨overlayFSï¼Œä½œä¸ºunionfs ç›¸è¾ƒäºaufsï¼ŒoverlayFSçš„ä¼˜åŠ¿ï¼š é€Ÿåº¦æ›´å¿«ï¼Œaufså±‚æ•°æ›´å¤šï¼Œæ€§èƒ½æŸè€—æ›´å¤§ ç®€å•ï¼Œoverlay2åªæœ‰ä¸¤å±‚ï¼Œå®¹å™¨å±‚upperå’Œé•œåƒå±‚lower overlay2åŠ å…¥äº†linux kernel ç›¸è¾ƒäºoverlayé©±åŠ¨ï¼Œoverlay2é©±åŠ¨çš„ä¼˜åŠ¿ï¼š overlayé©±åŠ¨åªåœ¨ä¸€ä¸ªlower overlayFSå±‚ä¹‹ä¸Šï¼Œæ‰€ä»¥ä¸ºäº†å®ç°å¤šå±‚é•œåƒéœ€è¦å¤§é‡çš„ç¡¬é“¾æ¥ overlay2é©±åŠ¨åŸç”Ÿæ”¯æŒå¤šä¸ªlower overlayFS","date":"2024-02-24","objectID":"/%E4%BB%8E0%E5%88%B01%E5%86%99docker%E4%B9%8B%E4%B8%89%E6%9E%84%E5%BB%BA%E7%AE%80%E6%98%93%E9%95%9C%E5%83%8F/:0:0","tags":["container"],"title":"ä»0åˆ°1å†™dockerä¹‹ä¸‰æ„å»ºç®€æ˜“é•œåƒ","uri":"/%E4%BB%8E0%E5%88%B01%E5%86%99docker%E4%B9%8B%E4%B8%89%E6%9E%84%E5%BB%BA%E7%AE%80%E6%98%93%E9%95%9C%E5%83%8F/"},{"categories":["äº‘åŸç”Ÿ"],"content":"æ„å»ºç®€æ˜“å®¹å™¨ï¼Œå®ç°namespaceå’Œcgroup","date":"2024-02-24","objectID":"/%E4%BB%8E0%E5%88%B01%E5%86%99docker%E4%B9%8B%E4%BA%8C%E6%9E%84%E5%BB%BA%E7%AE%80%E6%98%93%E5%AE%B9%E5%99%A8/","tags":["container"],"title":"ä»0åˆ°1å†™dockerä¹‹äºŒæ„å»ºç®€æ˜“å®¹å™¨","uri":"/%E4%BB%8E0%E5%88%B01%E5%86%99docker%E4%B9%8B%E4%BA%8C%E6%9E%84%E5%BB%BA%E7%AE%80%E6%98%93%E5%AE%B9%E5%99%A8/"},{"categories":["äº‘åŸç”Ÿ"],"content":"(äºŒ)åˆ›å»ºç®€æ˜“å®¹å™¨ ","date":"2024-02-24","objectID":"/%E4%BB%8E0%E5%88%B01%E5%86%99docker%E4%B9%8B%E4%BA%8C%E6%9E%84%E5%BB%BA%E7%AE%80%E6%98%93%E5%AE%B9%E5%99%A8/:0:0","tags":["container"],"title":"ä»0åˆ°1å†™dockerä¹‹äºŒæ„å»ºç®€æ˜“å®¹å™¨","uri":"/%E4%BB%8E0%E5%88%B01%E5%86%99docker%E4%B9%8B%E4%BA%8C%E6%9E%84%E5%BB%BA%E7%AE%80%E6%98%93%E5%AE%B9%E5%99%A8/"},{"categories":["äº‘åŸç”Ÿ"],"content":"å®ç°namespaceå’Œcgroup é€šè¿‡å®ç°ä¸€ä¸ªç®€æ˜“çš„runå‘½ä»¤ï¼Œæ¥æ„å»ºå®¹å™¨ runå‘½ä»¤çš„å®ç°æµç¨‹ï¼š é€šè¿‡newparentProcesså‡½æ•°ï¼Œæ„å»ºä¸€ä¸ªçˆ¶è¿›ç¨‹ï¼Œæ­¤æ—¶å·²ç»è¿›è¡Œäº†namespace ä½¿ç”¨cgroupæ¥å¯¹èµ„æºçš„é™åˆ¶ï¼Œæ­¤æ—¶å®¹å™¨å°±å·²ç»åˆ›å»ºå®Œæ¯• åˆ›å»ºinitå­è¿›ç¨‹(å®¹å™¨å†…ç¬¬ä¸€ä¸ªè¿›ç¨‹)ï¼Œmountåˆ°/procæ–‡ä»¶ç³»ç»Ÿ(æ–¹ä¾¿pså‘½ä»¤)ï¼ŒåŒæ—¶ä½¿ç”¨syscall.Execæ¥è¦†ç›–ä¹‹å‰çš„è¿›ç¨‹ä¿¡æ¯ï¼Œå †æ ˆä¿¡æ¯(ä¿è¯ç¬¬ä¸€ä¸ªè¿›ç¨‹æ˜¯æˆ‘ä»¬è§„å®šçš„è¿›ç¨‹)ã€‚ åœ¨å®¹å™¨ä¸­ç®€å•å®ç°namespaceå’Œcgroupï¼š namespaceçš„å®ç°ä¹‹é—´è¿›è¡Œç³»ç»Ÿè°ƒç”¨ï¼š cmd.SysProcAttr = \u0026syscall.SysProcAttr{ Cloneflags: syscall.CLONE_NEWNS | syscall.CLONE_NEWIPC | syscall.CLONE_NEWPID | syscall.CLONE_NEWNET | syscall.CLONE_NEWUTS, //syscall.CLONE_NEWUSER, } æˆ‘ä»¬è¿™é‡Œæš‚æ—¶ä¸å®ç°user namespaceï¼Œå› ä¸ºè¾ƒå¤æ‚ä¼šç‰µæ¶‰åˆ°æƒé™ç­‰é—®é¢˜ cgroupåˆ™æ˜¯é€šè¿‡è¯»å–/proc/self/mountinfoæ–‡ä»¶ï¼Œè·å–å½“å‰è¿›ç¨‹çš„mount æƒ…å†µï¼Œå†æ ¹æ®æˆ‘ä»¬éœ€è¦é™åˆ¶çš„subsystemæ¥è·å–åˆ°cgroupçš„æŒ‚è½½ç‚¹ï¼Œä¾‹å¦‚ï¼š/sys/fs/cgroup/memoryï¼Œæ­¤æ—¶çš„subsystemä¸ºmemoryã€‚ (æœ¬é¡¹ç›®ä¸­ä»…æ”¯æŒäº†memory,cpuset ,cpushareè¿›è¡Œäº†èµ„æºé™åˆ¶ï¼Œæœ¬è´¨ä¸Šéƒ½æ˜¯å¯¹æ–‡ä»¶è¿›è¡Œè¯»å†™æ“ä½œ) // FindCgroupMountPoint è·å–cgroupæŒ‚è½½ç‚¹ func FindCgroupMountPoint(subsystem string) string { file, err := os.Open(\"/proc/self/mountinfo\") if err != nil { log.Println(\"can't open /proc/self/mountinfo\") return \"error :can't open file\" } defer file.Close() scanner := bufio.NewScanner(file) for scanner.Scan() { txt := scanner.Text() fileds := strings.Split(txt, \" \") for _, opt := range strings.Split(fileds[len(fileds)-1], \",\") { if opt == subsystem { log.Println(\"the mount point : \",fileds[4]) return fileds[4] } } } if err := scanner.Err(); err != nil { return \"\" } return \"\" } // GetCgroupAbsolutePath è·å–cgroupç»å¯¹è·¯å¾„ // æ‰¾åˆ°å¯¹åº”subsystemæŒ‚è½½çš„ hierarchy ç›¸å¯¹è·¯å¾„å¯¹åº”çš„ cgroup åœ¨è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿä¸­çš„è·¯å¾„, // ç„¶åé€šè¿‡è¿™ä¸ªç›®å½•çš„è¯»å†™å»æ“ä½œ cgroup // Cgroups çš„ hierarchy çš„è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿæ˜¯é€šè¿‡ cgroupç±»å‹æ–‡ä»¶ç³»ç»Ÿçš„ mountæŒ‚è½½ä¸Šå»çš„, // option ä¸­åŠ ä¸Š subsystemï¼Œä»£è¡¨æŒ‚è½½çš„ subsystem ç±»å‹ , // è¿™æ ·å°±å¯ä»¥åœ¨ mountinfo ä¸­æ‰¾åˆ°å¯¹åº”çš„ subsystem çš„æŒ‚è½½ç›®å½•äº†ï¼Œæ¯”å¦‚ memoryã€‚ func GetCgroupAbsolutePath(subsys string, cgroupPath string, autoCreate bool) (string, error) { cgroupRoot := FindCgroupMountPoint(subsys) if _, err := os.Stat(path.Join(cgroupRoot, cgroupPath)); err == nil || (autoCreate \u0026\u0026 os.IsNotExist(err)) { if os.IsNotExist(err) { err := os.Mkdir(path.Join(cgroupRoot, cgroupPath), 0755) if err != nil { return \"\", errors.New(\"cgroup path error :\" + err.Error()) } return path.Join(cgroupRoot, cgroupPath), nil } return path.Join(cgroupRoot, cgroupPath), nil } else { return \"\", errors.New(\"cgroup path error :\" + err.Error()) } } æ‰¾åˆ°äº†cgroupæŒ‚è½½çš„ç»å¯¹è·¯å¾„ï¼Œå°±å¯ä»¥é€šè¿‡æ“ä½œæ–‡ä»¶æ¥è¿›è¡Œèµ„æºé™åˆ¶,è¿™é‡Œä»¥memoryä¸ºä¾‹ï¼š é€šè¿‡setæ–¹æ³•ï¼Œå°†è®¾ç½®çš„å†…å­˜èµ„æºé™åˆ¶å†™å…¥memory.limit_in_bytesæ–‡ä»¶ä¸­ï¼› é€šè¿‡applyæ–¹æ³•ï¼ŒæŠŠpidå†™å…¥åˆ°tasksï¼Œç›®æ ‡è¿›ç¨‹åŠ å…¥åˆ°è¯¥cgroupä¸­(ï¼ï¼ï¼è¿™é‡Œå¿…é¡»è¦æ³¨æ„ï¼Œå¦‚æœä½ åœ¨setä¸­å†™å…¥çš„æ•°æ®æ ¼å¼ä¸äº‰å–ï¼Œæ˜¯æ— æ³•å°†pidå†™å…¥tasksçš„)ï¼› é€šè¿‡removeæ–¹æ³•ï¼Œåˆ™æ˜¯å–æ¶ˆè¯¥cgroup // è®¾ç½®å¯¹åº”çš„cgroup memoryé™åˆ¶ func (m *MemorySubsystem) Set(cgroupPath string, resource *ResouceConfig) error { //è·å–subsystemè·¯å¾„(cgroupç»å¯¹è·¯å¾„) absolutePath, err := GetCgroupAbsolutePath(m.Name(), cgroupPath, true) if err != nil { return err } //è®¾ç½®å†…å­˜é™åˆ¶ if resource.MemoryLimit != \"\"{ err = os.WriteFile(path.Join(absolutePath, \"memory.limit_in_bytes\"), []byte(resource.MemoryLimit), 0644) if err != nil { return errors.New(\"set memory failed,error:\" + err.Error()) } } return nil } func (m *MemorySubsystem) Apply(cgroupPath string, pid int) error { absolutePath,err := GetCgroupAbsolutePath(m.Name(),cgroupPath,false) if err != nil{ return errors.New(\"apply cgroup faield ,error:\"+err.Error()) } err = os.WriteFile(path.Join(absolutePath, \"tasks\"), []byte(strconv.Itoa(pid)), 0644) if err != nil { return errors.New(\"apply cgroup faield ,error:\" + err.Error()) } return nil } func (m *MemorySubsystem) Remove(cgroupPath string) error { absolutePath ,err := GetCgroupAbsolutePath(m.Name(),cgroupPath,false) if err != nil{ return err } err = os.Remove(absolutePath) if err != nil{ return err } return nil } ","date":"2024-02-24","objectID":"/%E4%BB%8E0%E5%88%B01%E5%86%99docker%E4%B9%8B%E4%BA%8C%E6%9E%84%E5%BB%BA%E7%AE%80%E6%98%93%E5%AE%B9%E5%99%A8/:0:1","tags":["container"],"title":"ä»0åˆ°1å†™dockerä¹‹äºŒæ„å»ºç®€æ˜“å®¹å™¨","uri":"/%E4%BB%8E0%E5%88%B01%E5%86%99docker%E4%B9%8B%E4%BA%8C%E6%9E%84%E5%BB%BA%E7%AE%80%E6%98%93%E5%AE%B9%E5%99%A8/"},{"categories":["äº‘åŸç”Ÿ"],"content":"å‚è€ƒæ–‡æ¡£ ã€Šè‡ªå·±åŠ¨æ‰‹å†™dockerã€‹ https://tech.meituan.com/2015/03/31/cgroups.html https://www.cnblogs.com/charlieroro/p/10281469.html https://access.redhat.com/documentation/zh-cn/red_hat_enterprise_linux/7/html/resource_management_guide/index ","date":"2024-02-24","objectID":"/%E4%BB%8E0%E5%88%B01%E5%86%99docker%E4%B9%8B%E4%BA%8C%E6%9E%84%E5%BB%BA%E7%AE%80%E6%98%93%E5%AE%B9%E5%99%A8/:1:0","tags":["container"],"title":"ä»0åˆ°1å†™dockerä¹‹äºŒæ„å»ºç®€æ˜“å®¹å™¨","uri":"/%E4%BB%8E0%E5%88%B01%E5%86%99docker%E4%B9%8B%E4%BA%8C%E6%9E%84%E5%BB%BA%E7%AE%80%E6%98%93%E5%AE%B9%E5%99%A8/"},{"categories":["äº‘åŸç”Ÿ"],"content":"ç†è§£dockerçš„ä¸‰å¤§åº•åº§æ¦‚å¿µ","date":"2024-02-24","objectID":"/%E4%BB%8E0%E5%88%B01%E5%86%99docker%E4%B9%8B%E4%B8%80%E6%A6%82%E5%BF%B5%E7%90%86%E8%A7%A3/","tags":["container"],"title":"ä»0åˆ°1å†™dockerä¹‹ä¸€æ¦‚å¿µç†è§£","uri":"/%E4%BB%8E0%E5%88%B01%E5%86%99docker%E4%B9%8B%E4%B8%80%E6%A6%82%E5%BF%B5%E7%90%86%E8%A7%A3/"},{"categories":["äº‘åŸç”Ÿ"],"content":"(ä¸€)æ¦‚å¿µç†è§£ é¡¹ç›®åœ°å€ æ¬¢è¿folkï¼Œstarï¼ŒfollowğŸ¥°ï¼Œæœ‰é—®é¢˜æ¬¢è¿æissueï¼Œpr ","date":"2024-02-24","objectID":"/%E4%BB%8E0%E5%88%B01%E5%86%99docker%E4%B9%8B%E4%B8%80%E6%A6%82%E5%BF%B5%E7%90%86%E8%A7%A3/:0:0","tags":["container"],"title":"ä»0åˆ°1å†™dockerä¹‹ä¸€æ¦‚å¿µç†è§£","uri":"/%E4%BB%8E0%E5%88%B01%E5%86%99docker%E4%B9%8B%E4%B8%80%E6%A6%82%E5%BF%B5%E7%90%86%E8%A7%A3/"},{"categories":["äº‘åŸç”Ÿ"],"content":"docker ä¸‰å¤§æ ¸å¿ƒæŠ€æœ¯ï¼š Namespace: UTS Namespace ä¸»è¦ç”¨æ¥éš”ç¦» nodename å’Œ domainname ä¸¤ä¸ªç³»ç»Ÿæ ‡è¯† IPC Namespace ç”¨æ¥éš”ç¦» System V IPC å’Œ POSIX message queues(è¿›ç¨‹é—´é€šä¿¡) PID Namespaceæ˜¯ç”¨æ¥éš”ç¦»è¿›ç¨‹ IDçš„ MountNamespaceç”¨æ¥éš”ç¦»å„ä¸ªè¿›ç¨‹çœ‹åˆ°çš„æŒ‚è½½ç‚¹è§†å›¾ User Namespace ä¸»è¦æ˜¯éš”ç¦»ç”¨æˆ·çš„ç”¨æˆ·ç»„ ID Network Namespace æ˜¯ç”¨æ¥éš”ç¦»ç½‘ç»œè®¾å¤‡ã€ IPåœ°å€ç«¯å£ ç­‰ç½‘ç»œæ¢°çš„ Namespaceã€‚ Cgroups: å››ä¸ªé‡è¦çš„æ¦‚å¿µï¼štasksï¼Œcgroupï¼Œhierarchyï¼Œsubsystem tasks:å°±æ˜¯ä¸€ä¸ªè¿›ç¨‹ cgroup:æ§åˆ¶æ—ç¾¤ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªæŒ‰æŸç§è§„å®šåˆ’åˆ†çš„è¿›ç¨‹ç»„ï¼Œcgroupsä½¿ç”¨çš„èµ„æºéƒ½æ˜¯ä»¥æ§åˆ¶æ—ç¾¤ä¸ºå•ä½åˆ’åˆ†çš„ hierarchy:å±‚çº§ï¼Œæ˜¯ç”±å¤šä¸ªcgroupç»„æˆçš„æ ‘çŠ¶å…³ç³»ï¼Œ subsystem:èµ„æºå­ç³»ç»Ÿï¼Œç›¸å½“äºèµ„æºæ§åˆ¶å™¨ï¼Œå¦‚cpuï¼Œmemoryå­ç³»ç»Ÿï¼Œå¿…é¡»é™„åŠ åˆ°æŸä¸ªå±‚çº§hierarchyæ‰èƒ½èµ·ä½œç”¨ï¼Œ union file system: æŠŠå…¶ä»–æ–‡ä»¶ç³»ç»Ÿè”åˆåˆ°ä¸€ä¸ªè”åˆæŒ‚è½½ç‚¹çš„æ–‡ä»¶ç³»ç»ŸæœåŠ¡ï¼Œå…·æœ‰å†™æ—¶å¤åˆ¶å’Œè”åˆæŒ‚è½½çš„ç‰¹æ€§ ç°åœ¨dockerå¤šé‡‡ç”¨çš„æ˜¯overlayFSï¼ŒåŒ…å«å››ä¸ªéƒ¨åˆ†ï¼Œupperï¼Œlowerï¼Œworkï¼Œmerged ","date":"2024-02-24","objectID":"/%E4%BB%8E0%E5%88%B01%E5%86%99docker%E4%B9%8B%E4%B8%80%E6%A6%82%E5%BF%B5%E7%90%86%E8%A7%A3/:1:0","tags":["container"],"title":"ä»0åˆ°1å†™dockerä¹‹ä¸€æ¦‚å¿µç†è§£","uri":"/%E4%BB%8E0%E5%88%B01%E5%86%99docker%E4%B9%8B%E4%B8%80%E6%A6%82%E5%BF%B5%E7%90%86%E8%A7%A3/"},{"categories":["äº‘åŸç”Ÿ"],"content":"å‚è€ƒæ–‡æ¡£ï¼š ã€Šè‡ªå·±åŠ¨æ‰‹å†™dockerã€‹ https://blog.csdn.net/qq_31960623/article/details/120260769 https://www.cnblogs.com/crazymakercircle/p/15400946.html#autoid-h3-2-2-0 ","date":"2024-02-24","objectID":"/%E4%BB%8E0%E5%88%B01%E5%86%99docker%E4%B9%8B%E4%B8%80%E6%A6%82%E5%BF%B5%E7%90%86%E8%A7%A3/:2:0","tags":["container"],"title":"ä»0åˆ°1å†™dockerä¹‹ä¸€æ¦‚å¿µç†è§£","uri":"/%E4%BB%8E0%E5%88%B01%E5%86%99docker%E4%B9%8B%E4%B8%80%E6%A6%82%E5%BF%B5%E7%90%86%E8%A7%A3/"},{"categories":["æ‚äº‹"],"content":"æˆ‘çš„2023å¹´åº¦æ€»ç»“","date":"2024-01-02","objectID":"/2023%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/","tags":["æ‚äº‹"],"title":"2023å¹´åº¦æ€»ç»“","uri":"/2023%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/"},{"categories":["æ‚äº‹"],"content":"2023å¹´åº¦æ€»ç»“ğŸ¥³ ","date":"2024-01-02","objectID":"/2023%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/:0:0","tags":["æ‚äº‹"],"title":"2023å¹´åº¦æ€»ç»“","uri":"/2023%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/"},{"categories":["æ‚äº‹"],"content":"å‰è¨€ çœ‹åˆ°å¾ˆå¤šå­¦é•¿éƒ½åœ¨å†™å¹´åº¦æ€»ç»“ï¼Œé‚£æˆ‘ä¹Ÿè·Ÿä¸ªé£å§ï¼Œè®°å½•ä¸€ä¸‹è¿‡å»ä¸€å¹´çš„æ”¶è·å’Œæ„Ÿæ‚Ÿå§ã€‚é©¬ä¸Šå°±æ˜¯æœŸæœ«å‘¨ï¼Œå¤ªå¤šä¸œè¥¿è¦å­¦ï¼Œåé¢åº”è¯¥æ²¡å¤šå°‘æ—¶é—´ï¼Œç´¢æ€§å°±ç°åœ¨å†™äº†ã€‚ ","date":"2024-01-02","objectID":"/2023%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/:0:1","tags":["æ‚äº‹"],"title":"2023å¹´åº¦æ€»ç»“","uri":"/2023%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/"},{"categories":["æ‚äº‹"],"content":"ç»å† é«˜è€ƒ ç°åœ¨å›æƒ³èµ·æ¥å¥½åƒæ•™å®¤ï¼Œé£Ÿå ‚ï¼Œå¯å®¤ä¸‰ç‚¹ä¸€çº¿ï¼Œä¹Ÿæ²¡æœ‰ä»€ä¹ˆèƒ½å›æƒ³çš„èµ·æ¥äº†ã€‚ é«˜è€ƒå‘æŒ¥æ­£å¸¸ï¼Œæ¥äº†é‡é‚®ğŸ¥¹ï¼Œå¯¹è‡ªå·±çš„å®åŠ›è¿˜æ˜¯æœ‰é¢„æœŸï¼Œä¹Ÿæ²¡ä»€ä¹ˆå¤§ä¸äº†äº†ã€‚ æš‘å‡ 18å¹´ä»¥æ¥ï¼Œå¯ä»¥è¯´ä»Šå¹´çš„æš‘å‡æ˜¯æœ€å……å®çš„ä¸€ä¸ªæš‘å‡äº†ğŸ˜ã€‚ å›æƒ³èµ·å¾€å¹´çš„æš‘å‡éƒ½æ˜¯å¤©å¤©æ‰“æ¸¸æˆï¼Œæ‰“å¾—æ˜å¤©é»‘åœ°ã€‚ä»Šå¹´çš„æš‘å‡è¿˜æ˜¯å­¦åˆ°äº†å¾ˆå¤šä¸œè¥¿ã€‚ åˆšè€ƒå®Œé«˜è€ƒï¼Œå¿—æ„¿å¡«æŠ¥å…¨å¡«çš„è®¡ç®—æœºä¸“ä¸šï¼Œå°±å‡†å¤‡è¿›å†›äº’è”ç½‘~~ï¼ˆä¸çŸ¥é“æ‰¾å·¥ä½œæ—¶çš„è‡ªå·±ä¼šä¸ä¼šæ€ªè‡ªå·±,äº’è”ç½‘å¯’å†¬äº†ï¼‰~~ï¼Œå¼€å§‹ç½‘ä¸Šæ‰¾ç¼–ç¨‹çš„æ•™ç¨‹å­¦ä¹ ï¼Œå½“æ—¶ä¸çŸ¥é“è¦å­¦ä»€ä¹ˆç¼–ç¨‹è¯­è¨€ï¼Œçœ‹ç½‘ä¸Šæ¨èå°±å¼€å§‹å­¦ä¹ pythonäº†ã€‚å½“æ—¶å°±çœ‹å¥½äº†é‡é‚®ï¼Œå¿—æ„¿ä¸€åŠéƒ½æ˜¯é‡é‚®ï¼Œå°±é˜´å·®é˜³é”™åŠ äº†é‡é‚®çš„è´´å§ç¾¤ï¼Œåˆ°å¤„é—®å­¦é•¿å­¦å§ã€‚ ç¾¤é‡Œæœ‰ä¸€ä¸ªå­¦å§ä¸»åŠ¨åŠ äº†æˆ‘ï¼ˆäººå¾ˆå¥½ï¼Œä½†æ˜¯æ˜¯å–å¡çš„ï¼‰ï¼Œå½“æ—¶èŠäº†å¾ˆå¤šï¼Œåœ¨å¥¹é‚£é‡Œäº†è§£åˆ°äº†è½¯å·¥ä¼šå­¦C++ï¼Œäºæ˜¯æˆ‘å°±æ”¾å¼ƒäº†å­¦ä¹ pythonï¼Œè½¬æŠ•C++ã€‚ä¹Ÿåœ¨å¥¹é‚£é‡Œæ­£å¼äº†è§£åˆ°äº†çº¢å²©ï¼Œè“å±±ï¼Œå‹¤å¥‹èœ‚ç­‰å·¥ä½œå®¤ï¼Œå½“æ—¶å°±å¯¹è¿™äº›å·¥ä½œå®¤äº§ç”Ÿäº†å…´è¶£ã€‚ åœ¨è´´å§ç¾¤ä¹Ÿè®¤è¯†åˆ°äº†ä¸€ä¸ªçº¢å²©çš„å­¦é•¿ï¼ˆçº¢å²©å®‰å“çš„ï¼Œç°åœ¨æ˜¯è…¾è®¯âœŒï¸ğŸ˜­ï¼‰ï¼Œå’Œä»–æ²Ÿé€šä¹‹åï¼Œä»–ç›´æ¥å»ºè®®æˆ‘å­¦goï¼Œdockerï¼ŒlinuxåŸºç¡€ï¼Œmysqlç­‰ç­‰ï¼Œç»™å½“æ—¶æ‡µæ‡‚çš„æˆ‘å¸¦æ¥ä¸å°çš„éœ‡æ’¼ğŸ«¨ã€‚ ä¹‹ååˆäº†è§£åˆ°äº†ä¸€ä¸ªåŒä¸“ä¸šåŒçº§çš„å¤§ä½¬ï¼Œæ­¤æ—¶æˆ‘è¿˜åœ¨å­¦C++çš„æŒ‡é’ˆï¼Œä»–å°±å·²ç»ä¼šäº†pythonï¼ŒC++ï¼Œgoï¼Œrustï¼Œæ›´ä¸ç”¨è¯´æ•°æ®åº“å’Œdockeré‚£äº›äº†ã€‚æœ¬ä»¥ä¸ºæš‘å‡å­¦ç‚¹C++ï¼Œèƒ½å¼€å­¦è–„çº±åŒå­¦ï¼Œçœ‹æ¥è¿˜æ˜¯æƒ³å¤šäº†ğŸ¤¡ï¼Œå“ˆå“ˆå“ˆå“ˆã€‚ Q:æš‘å‡æ”¶è·åˆ°äº†ä»€ä¹ˆå‘¢ï¼Ÿ A:ä¸€ç‚¹ç‚¹C++è¯­æ³•ï¼ˆè‡³å°‘å­¦æ ¡çš„ç¨‹åºåŒ–ç»“æ„è®¾è®¡çš„è¿›åº¦è¿˜æ²¡æˆ‘å¿«ï¼Œè™½ç„¶è¿˜è®²äº†ä¸€äº›åº•å±‚åŸç†å•¥çš„ï¼Œä½†è¿˜æ˜¯è§‰å¾—ä¸Šè¯¾è€½è¯¯å­¦ä¹ ï¼‰ï¼Œgoçš„è¯­æ³•ï¼Œå’Œéƒ¨åˆ†åŸºç¡€linuxå‘½ä»¤ã€‚å¦å¤–è¿˜æœ‰ä¸€ä¸ªé©¾é©¶è¯ğŸªªã€‚ æ–°å­¦æœŸ åŠ å…¥äº†çº¢å²©å’Œè“å±±ä½œä¸ºå­¦å‘˜è¿›ä¸€æ­¥å­¦ä¹ ï¼Œä¹Ÿäº†è§£åˆ°äº†ä¸¤è¾¹çš„ç‰›é€¼çš„å­¦é•¿ï¼ˆæ¯”å¦‚è¢ç¥ï¼Œç‹é‘«å­¦é•¿ï¼Œç´«é›¨å“¥ï¼Œæ—­å“¥ç­‰ç­‰ï¼Œæ­¤å¤„çœç•¥ä¸€åƒå­—ï¼‰ï¼Œçº¢å²©æ„Ÿè§‰å‹åŠ›æœ‰ç‚¹å¤§ï¼Œæ¯•ç«Ÿè¦åˆ·äººï¼Œè“å±±å‹åŠ›ä¸æ˜¯å¾ˆå¤§ï¼Œè€Œä¸”è¿˜æœ‰å¤§å·¥ä½ï¼ˆå¯¹äºæŒ¤åœ¨çš‡å®¶é‡Œé¢ç”Ÿå­˜çš„æˆ‘æ¥è¯´å¤ªæœ‰è¯±æƒ‘åŠ›äº†ï¼‰ã€‚ æ ¹æ®æš‘å‡äº†è§£åˆ°çš„ä¸€äº›ä¿¡æ¯ï¼Œæˆ‘åšå®šåœ°é€‰æ‹©äº†æ¯•ä¸šå·¥ä½œçš„é“è·¯ï¼Œæ¯•ç«Ÿæˆ‘ä¹Ÿä¸æƒ³æµªè´¹ä¸¤ä¸‰å¹´çš„æ—¶é—´å»è¯»ç ”ï¼Œæœ€åæœ¬ç¡•åŒè–ªçš„ç»“æœï¼ˆè¦æ˜¯ä¸€ç›´éƒ½æ˜¯ç°åœ¨è¿™ä¸ªäº’è”ç½‘è¡Œæƒ…ï¼Œè¯´ä¸å®šè¿˜æ‰¾ä¸åˆ°å·¥ä½œğŸ˜­ï¼‰ã€‚ åˆšå¼€å­¦è·Ÿç°åœ¨æœŸæœ«æ¯”èµ·æ¥å˜åŒ–ç¡®å®å¾ˆå¤§ï¼Œæ›´å¤šçš„æ˜¯æˆ‘çš„å¿ƒæ€ä¸Šï¼Œä¸å¾—ä¸è¯´å¤§å­¦ç¡®å®å¾ˆå®¹æ˜“è®©äººå •è½ï¼š åˆšå¼€å­¦é‚£ä¼šç¡®å®å­¦çš„å¾ˆå¿«ï¼Œå†›è®­æœŸé—´ä¸€ç›´åœ¨çœ‹è®¡ç®—æœºç½‘ç»œï¼Œè™½ç„¶æ²¡å­¦å¤šå°‘ã€‚ç„¶åå†›è®­ç»“æŸå›½åº†æ”¾å‡ï¼Œä¸€ä¸ªäººå®ˆèˆï¼ŒæŠŠmysqlç³»ç»Ÿåˆ·äº†ä¸€éï¼ŒæŠŠè¡¨é”è¡Œé”å•¥çš„å­¦äº†ï¼Œå°±æ²¡å­¦äº†ï¼Œå¥½åƒè¿˜æœ‰è¯»å†™åˆ†ç¦»ï¼ˆä½†æ˜¯ç°åœ¨å°±åŸºæœ¬åªç”¨åˆ°ç®€å•çš„crudğŸ˜…ï¼Œå…¶ä»–çš„å¿˜çš„å·®ä¸å¤šäº†ï¼‰ã€‚ç„¶åè·Ÿç€è“å±±å»å¹´å¼€æºå‡ºæ¥çš„è¯¾ä»¶ï¼ŒæŠŠrediså’Œdockeræµ…æµ…åœ°è¿‡äº†ä¸€éï¼ˆå› ä¸ºæµ…ï¼Œæ‰€ä»¥åé¢åˆå­¦äº†ä¸€éï¼‰ã€‚ åˆšå¼€å§‹æˆ‘å¯¹æ¸¸æˆæ ¹æœ¬ä¸æ„Ÿå…´è¶£ï¼Œä½†æ˜¯é€æ¸è·Ÿç€å®¤å‹ä¸€èµ·æ‰“æ¸¸æˆï¼Œå–œæ¬¢ä¸Šäº†ç©cs2ã€‚ç„¶åå°±èŠ±äº†å¾ˆå¤šæ—¶é—´æ¥è·Ÿå®¤å‹æ‰“æ¸¸æˆäº†ï¼Œæ…¢æ…¢åœ°ä¹Ÿæ²¡æœ‰ä¹‹å‰é‚£ä¹ˆå·äº†ï¼Œæ‰€ä»¥è¯´å¯å®¤çœŸçš„ä¸é€‚åˆå­¦ä¹ ã€‚ å…¶ä»–çš„ä¹Ÿæ²¡å•¥å¥½è¯´çš„äº†â€¦ ","date":"2024-01-02","objectID":"/2023%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/:0:2","tags":["æ‚äº‹"],"title":"2023å¹´åº¦æ€»ç»“","uri":"/2023%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/"},{"categories":["æ‚äº‹"],"content":"2024ä¸ŠåŠå¹´çš„ç›®æ ‡ 1.æŠŠä¸šåŠ¡çš„èœåèƒ½å­¦çš„éƒ½å­¦äº†(è¿™ä¸ªå°±æ¯”è¾ƒé•¿è¿œäº†) 2.æœ€è¿‘åœ¨å°è¯•å¤åˆ»ä¸€ä¸ªdockerğŸ³ï¼Œå°½é‡åœ¨å¯’å‡ä¹‹å‰å®Œæˆå§ 3.åšæŒåœ¨å·¥ä½œå®¤çš„å­¦ä¹ ï¼ŒåŠ å…¥ä¸€ä¸ªå·¥ä½œå®¤ 4.å­¦ä¹ è®¡ç®—æœºåŸºç¡€å››å¤§ä»¶(æœ€è¿‘åœ¨å­¦ä¹ æ•°æ®ç»“æ„ï¼Œäº‰å–å¿«ç‚¹å­¦å®Œå§) 5.åšæŒæ¯å¤©éƒ½åˆ·ç‚¹leetcode(å‰ææ˜¯å…ˆå­¦å®Œæ•°æ®ç»“æ„ä¸ç®—æ³•) 6.å­¦ä¹ C++ 7.å­¦ä¹ RustğŸ¦€(æœ€è¿‘æ˜¯æ²¡æ—¶é—´å­¦å’¯) 8.æ‰¾ä¸ªå¥³æœ‹å‹ğŸ«£ 9.work \u0026\u0026 life balanceğŸ¥¹ to be continueâ€¦","date":"2024-01-02","objectID":"/2023%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/:0:3","tags":["æ‚äº‹"],"title":"2023å¹´åº¦æ€»ç»“","uri":"/2023%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/"},{"categories":["æ•°æ®ç»“æ„ä¸ç®—æ³•"],"content":"å­¦ä¹ ç¬”è®°","date":"2023-12-24","objectID":"/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E4%BA%8C/","tags":["æ•°æ®ç»“æ„ä¸ç®—æ³•"],"title":"å­¦ä¹ ç¬”è®°ï¼šæ•°æ®ç»“æ„ä¸ç®—æ³•(äºŒ)","uri":"/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E4%BA%8C/"},{"categories":["æ•°æ®ç»“æ„ä¸ç®—æ³•"],"content":"æ•°æ®ç»“æ„ä¸ç®—æ³•å…¥é—¨(äºŒ) ","date":"2023-12-24","objectID":"/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E4%BA%8C/:0:0","tags":["æ•°æ®ç»“æ„ä¸ç®—æ³•"],"title":"å­¦ä¹ ç¬”è®°ï¼šæ•°æ®ç»“æ„ä¸ç®—æ³•(äºŒ)","uri":"/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E4%BA%8C/"},{"categories":["æ•°æ®ç»“æ„ä¸ç®—æ³•"],"content":"ç¬¬ä¸‰ç« ï¼ˆç»­ï¼‰ é™æ€é“¾è¡¨ï¼ˆæ¸¸æ ‡å®ç°æ³•ï¼‰ï¼š è®©æ•°ç»„çš„å…ƒç´ éƒ½æ˜¯ç”±ä¸¤ä¸ªæ•°æ®åŸŸç»„æˆï¼Œdataå’Œcurã€‚ä¹Ÿå°±æ˜¯ è¯´ï¼Œæ•°ç»„çš„æ¯ä¸ªä¸‹æ ‡éƒ½å¯¹åº”ä¸€ä¸ªdataå’Œä¸€ä¸ªcurã€‚æ•°æ®åŸŸdataï¼Œç”¨æ¥å­˜ æ”¾æ•°æ®å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯é€šå¸¸æˆ‘ä»¬è¦å¤„ç†çš„æ•°æ®ï¼›è€Œcurç›¸å½“äºå•é“¾è¡¨ä¸­çš„ nextæŒ‡é’ˆï¼Œå­˜æ”¾è¯¥å…ƒç´ çš„åç»§åœ¨æ•°ç»„ä¸­çš„ä¸‹æ ‡ï¼Œæˆ‘ä»¬æŠŠcurå«åšæ¸¸æ ‡ã€‚ #define MAXSIZE 1000 typedef struct { ElemType data; int cur;//æ¸¸æ ‡Cursor,ä¸º0è¡¨ç¤ºæ— æŒ‡å‘ }Component, StaticLinkList[MAXSIZE]; //å¯¹äºä¸æä¾›ç»“æ„structçš„ç¨‹åºè®¾è®¡è¯­è¨€ï¼Œå¯ä»¥ä½¿ç”¨ä¸€å¯¹å¹¶è¡Œæ•°æ®dataå’Œcuræ¥å¤„ç† åˆå§‹åŒ–é™æ€é“¾è¡¨ï¼š //åˆå§‹åŒ–æ•°ç»„çŠ¶æ€ Status InitList(StaticLinkList space){ int i ; for (i = 0 ; i \u003cMAXSIZE-1;i++){ space[i].cur = i +1; } space[MAXSIZE -1 ].cur = 0;//æœ€åä¸€ä¸ªå…ƒç´ çš„curå­˜æ”¾ç¬¬ä¸€ä¸ªæœ‰æ•°å€¼çš„å…ƒç´ çš„ä¸‹æ ‡ï¼Œç›¸å½“äºå•é“¾è¡¨ä¸­çš„å¤´ç»“ç‚¹ä½œç”¨ return OK; } é™æ€é“¾è¡¨çš„æ’å…¥æ“ä½œï¼š ä¸ºäº†è¾¨æ˜æ•°ç»„ä¸­å“ªäº›åˆ†é‡æœªè¢«ä½¿ç”¨ï¼Œè§£å†³çš„åŠæ³•æ˜¯å°†æ‰€æœ‰æœªè¢«ä½¿ç”¨è¿‡ çš„åŠå·²è¢«åˆ é™¤çš„åˆ†é‡ç”¨æ¸¸æ ‡é“¾æˆä¸€ä¸ªå¤‡ç”¨çš„é“¾è¡¨ï¼Œæ¯å½“è¿›è¡Œæ’å…¥æ—¶ï¼Œ ä¾¿å¯ä»¥ä»å¤‡ç”¨é“¾è¡¨ä¸Šå–å¾—ç¬¬ä¸€ä¸ªç»“ç‚¹ä½œä¸ºå¾…æ’å…¥çš„æ–°ç»“ç‚¹ã€‚ int Malloc_SLL(StaticLinkList space ){ //è¿”å›ç¬¬ä¸€ä¸ªå¤‡ç”¨ç©ºé—²çš„ä¸‹æ ‡ int i = space[0].cur; if (space[0].cur){ //å› ä¸ºæŠŠç¬¬ä¸€ä¸ªç©ºé—²çš„ä¸‹æ ‡è¿”å›ï¼Œæ‰€ä»¥éœ€è¦æŠŠä¸‹ä¸€ä¸ªåˆ†é‡æ‹¿æ¥å¤‡ç”¨ space[0].cur = space[i].cur; } return i; } å…·ä½“å®ç°ï¼š //åœ¨ç¬¬iä¸ªå…ƒç´ å‰æ’å…¥æ–°çš„æ•°æ®å…ƒç´ e Status ListInsert(StaticLinkList L , int i ,ElemType e){ int j , k , l; //kæ˜¯æœ€åä¸€ä¸ªå…ƒç´ çš„ä¸‹æ ‡ k = MAXSIZE -1; if (i\u003c1 || i \u003e ListLength(L)+1){ return ERROR; } j = Malloc_SLL(L);//è¿”å›ç©ºé—²åˆ†é‡çš„æ¸¸æ ‡ if (j ){ L[j].data = e; //å¾ªç¯æ‰¾åˆ°ç¬¬iä¸ªå…ƒç´ ä¹‹å‰çš„ä½ç½® for ( l = 1; l \u003ci -1 ; l++){ k = L[k].cur;//k = ç¬¬i-1ä¸ªå…ƒç´ çš„æ¸¸æ ‡ } L[j].cur = L[k].cur;//è®©æ’å…¥å…ƒç´ çš„curæŒ‡å‘ç¬¬iä¸ªå…ƒç´  L[k].cur = j;//è®©ç¬¬i-1ä¸ªå…ƒç´ çš„curæŒ‡å‘æ–°å…ƒç´  return OK; } return ERROR; } é™æ€é“¾è¡¨çš„åˆ é™¤æ“ä½œï¼š Status ListDelete(StaticLinkList L, int i ){ int j , k ; if (i \u003c1 || i \u003eListLength(L)){ return ERROR; } k = MAXSIZE -1; for (j = 1;j\u003c=i -1;j++){ k = L[k].cur; } j = L[k].cur; L[k].cur = L[j].cur; Free_SSL(L,j); return OK; } //å°†ä¸‹æ ‡ä¸ºkçš„ç©ºé—²ç»“ç‚¹å›æ”¶åˆ°å¤‡ç”¨é“¾è¡¨ Status Free_SSL(StaticLinkList space,int k ){ //æŠŠå¤‡ç”¨é“¾è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„curå€¼èµ‹ç»™è¦åˆ é™¤çš„åˆ†é‡çš„cur space[k].cur =space[0].cur; //è¦åˆ é™¤çš„åˆ†é‡ä¸‹æ ‡èµ‹å€¼ç»™å¤‡ç”¨é“¾è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„cur space[0].cur = k; } è·å–é™æ€é“¾è¡¨çš„å…ƒç´ ä¸ªæ•°ï¼š //è¿”å›é™æ€é“¾è¡¨çš„æ•°æ®å…ƒç´ çš„ä¸ªæ•° int ListLength(StaticLinkList L){ int j =0 ; int i = L[MAXSIZE -1 ].cur; while(i){ i = L[i].cur; j++; } return j; } å¾ªç¯é“¾è¡¨ï¼š å°†å•é“¾è¡¨ä¸­ç»ˆç«¯ç»“ç‚¹çš„æŒ‡é’ˆç«¯ç”±ç©ºæŒ‡é’ˆæ”¹ä¸ºæŒ‡å‘å¤´ç»“ç‚¹ï¼Œå°±ä½¿æ•´ä¸ªå• é“¾è¡¨å½¢æˆä¸€ä¸ªç¯ï¼Œè¿™ç§å¤´å°¾ç›¸æ¥çš„å•é“¾è¡¨ç§°ä¸ºå•å¾ªç¯é“¾è¡¨ï¼Œç®€ç§°å¾ªç¯é“¾è¡¨ï¼ˆcircular linked listï¼‰ã€‚ ï¼ˆä¸ç”¨å¤´æŒ‡é’ˆï¼Œè€Œæ˜¯ä½¿ç”¨æŒ‡å‘ç»ˆç«¯ç»“ç‚¹çš„å°¾æŒ‡é’ˆï¼‰ åˆå¹¶ä¸¤ä¸ªå¾ªç¯é“¾è¡¨çš„æ“ä½œï¼š /* ä¿å­˜Aè¡¨çš„å¤´ç»“ç‚¹ï¼Œå³â‘  */ p = rearA-\u003enext; /*å°†æœ¬æ˜¯æŒ‡å‘Bè¡¨çš„ç¬¬ä¸€ä¸ªç»“ç‚¹ï¼ˆä¸æ˜¯å¤´ç»“ç‚¹ï¼‰ */ rearA-\u003enext = rearB-\u003enext-\u003enext; /* èµ‹å€¼ç»™reaA-\u003enextï¼Œå³â‘¡ */ q = rearB-\u003enext; /* å°†åŸAè¡¨çš„å¤´ç»“ç‚¹èµ‹å€¼ç»™rearB-\u003enextï¼Œå³â‘¢ */ rearB-\u003enext = p; /* é‡Šæ”¾q */ free(q); åŒå‘é“¾è¡¨ï¼š åŒå‘é“¾è¡¨ï¼ˆdouble linkedlistï¼‰ï¼šæ˜¯åœ¨å•å‘é“¾è¡¨çš„æ¯ä¸ªç»“ç‚¹ä¸­ï¼Œå†è®¾ç½®ä»¥ä¸€ä¸ªæŒ‡å‘å…¶å‰é©±ç»“ç‚¹çš„æŒ‡é’ˆåŸŸã€‚æ‰€ä»¥åœ¨åŒå‘é“¾è¡¨ä¸­çš„ç»“ç‚¹éƒ½æœ‰ä¸¤ä¸ªæŒ‡é’ˆ åŸŸï¼Œä¸€ä¸ªæŒ‡å‘ç›´æ¥åç»§ï¼Œå¦ä¸€ä¸ªæŒ‡å‘ç›´æ¥å‰é©±ã€‚ ä»£ç å®ç°ï¼š typedef struct DulNode{ ElemType data; struct DulNode *prior;//ç›´æ¥å‰é©±æŒ‡é’ˆ struct DulNode *next ;//ç›´æ¥åç»­æŒ‡é’ˆ }DulNode,*DuLinkList; ","date":"2023-12-24","objectID":"/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E4%BA%8C/:0:1","tags":["æ•°æ®ç»“æ„ä¸ç®—æ³•"],"title":"å­¦ä¹ ç¬”è®°ï¼šæ•°æ®ç»“æ„ä¸ç®—æ³•(äºŒ)","uri":"/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E4%BA%8C/"},{"categories":["æ•°æ®ç»“æ„ä¸ç®—æ³•"],"content":"ç¬¬å››ç«  æ ˆä¸é˜Ÿåˆ— 4.2.1æ ˆçš„å®šä¹‰ï¼š æ ˆ(stack)æ˜¯é™å®šä»…åœ¨è¡¨å°¾è¿›è¡Œæ’å…¥å’Œåˆ é™¤æ“ä½œçš„çº¿æ€§è¡¨ æˆ‘ä»¬æŠŠå…è®¸æ’å…¥å’Œåˆ é™¤çš„ä¸€ç«¯ç§°ä¸ºæ ˆé¡¶(top)ï¼Œå¦ä¸€ç«¯ç§°ä¸ºæ ˆåº• (bottom)ï¼Œä¸å«ä»»ä½•æ•°æ®å…ƒç´ çš„æ ˆç§°ä¸ºç©ºæ ˆã€‚æ ˆåˆç§°ä¸ºåè¿›å…ˆå‡º (LastIn First Out)çš„çº¿æ€§è¡¨ï¼Œç®€ç§°LIFOç»“æ„ã€‚ æ ˆçš„æ’å…¥æ“ä½œï¼šä¹Ÿå«è¿›æ ˆï¼Œå‹æ ˆï¼Œå…¥æ ˆï¼ˆpushï¼‰ æ ˆçš„åˆ é™¤æ“ä½œï¼šä¹Ÿå«å‡ºæ ˆï¼Œå¼¹æ ˆï¼ˆpopï¼‰ 4.3æ ˆçš„æŠ½è±¡æ•°æ®ç±»å‹ ADT æ ˆ(stack) Data åŒçº¿æ€§è¡¨ã€‚å…ƒç´ å…·æœ‰ç›¸åŒçš„ç±»å‹ï¼Œç›¸é‚»å…ƒç´ å…·æœ‰å‰é©±å’Œåç»§å…³ç³»ã€‚ Operation InitStack(*S): //åˆå§‹åŒ–æ“ä½œï¼Œå»ºç«‹ä¸€ä¸ªç©ºæ ˆSã€‚ DestroyStack(*S): // è‹¥æ ˆå­˜åœ¨ï¼Œåˆ™é”€æ¯å®ƒã€‚ ClearStack(*S): //å°†æ ˆæ¸…ç©ºã€‚ StackEmpty(S): // è‹¥æ ˆä¸ºç©ºï¼Œè¿”å›trueï¼Œå¦åˆ™è¿”å›falseã€‚ GetTop(S, *e): //è‹¥æ ˆå­˜åœ¨ä¸”éç©ºï¼Œç”¨eè¿”å›Sçš„æ ˆé¡¶å…ƒç´ ã€‚ Push(*S, e): //è‹¥æ ˆSå­˜åœ¨ï¼Œæ’å…¥æ–°å…ƒç´ eåˆ°æ ˆSä¸­å¹¶æˆä¸ºæ ˆé¡¶å…ƒç´ ã€‚ Pop(*S, *e): // åˆ é™¤æ ˆSä¸­æ ˆé¡¶å…ƒç´ ï¼Œå¹¶ç”¨eè¿”å›å…¶å€¼ã€‚ StackLength(S): // è¿”å›æ ˆSçš„å…ƒç´ ä¸ªæ•°ã€‚ endADT 4.4æ ˆçš„é¡ºåºå­˜å‚¨ç»“æ„åŠå…¶å®ç° ç»“æ„å®šä¹‰ï¼š //SElemType è§†å®é™…æƒ…å†µè€Œå®šï¼Œè¿™é‡Œå‡è®¾ä¸ºint typedef int SElemType ; const int MAXSIZE = 5; typedef struct { SElemType data[MAXSIZE]; int top;//è¡¨ç¤ºæ ˆé¡¶æŒ‡é’ˆ }SqStack; è¿›æ ˆæ“ä½œ(push): //push Status Push (SqStack *S , SElemType e ) { //æ ˆæ»¡ if (S-\u003etop ==MAXSIZE-1){ return ERROR; } //æ ˆé¡¶æŒ‡é’ˆåŠ ä¸€ S-\u003etop ++; //å°†æ–°æ’å…¥çš„å…ƒç´ èµ‹å€¼åˆ°æ ˆé¡¶ S-\u003edata[S-\u003etop]=e; return OK; } å‡ºæ ˆæ“ä½œ(pop): //pop //è‹¥æ ˆä¸ç©ºï¼Œåˆ™åˆ é™¤Sçš„æ ˆé¡¶å…ƒç´ ï¼Œç”¨eè¿”å›å…¶å€¼ï¼Œ å¹¶è¿”å›OK;å¦åˆ™è¿”å›ERROR Status Pop(SqStack *S,SElemType e) { //ç©ºæ ˆ if (S -\u003etop ==-1){ return ERROR; } e=S-\u003edata[S-\u003etop]; S-\u003etop--; return OK; } 4.5ä¸¤æ ˆå…±äº«ç©ºé—´ ç»“æ„ï¼š //ä¸¤æ ˆå…±äº«ç©ºé—´ typedef struct { SElemType data[MAXSIZE]; int top1; //æ ˆä¸€æ ˆé¡¶æŒ‡é’ˆ int top2; //æ ˆäºŒæ ˆé¡¶æŒ‡é’ˆ }SqDoubleStack; æ’å…¥æ“ä½œï¼š Status Push(SqDoubleStack *S,SElemType e,int StackNumber) { //æ ˆæ»¡äº† if (S-\u003etop1 +1 == S-\u003etop2) { return ERROR; } if (StackNumber == 1) S-\u003edata[++S-\u003etop1]=e; else if (StackNumber ==2) S-\u003edata[--S-\u003etop2]=e; return OK; } åˆ é™¤æ“ä½œï¼š //å¦‚æœæ ˆä¸ä¸ºç©ºï¼Œå°±ç”¨eè¿”å›åˆ é™¤çš„å€¼ï¼Œå¹¶ä¸”è¿”å›okï¼Œå¤±è´¥åˆ™è¿”å›error Status Pop(SqDoubleStack *S,SElemType *e,int StackNumber ) { if (StackNumber == 1){ if (S-\u003etop1 ==-1) { //è¯´æ˜æ ˆä¸€ä¸ºç©º return ERROR; } *e = S-\u003edata[S-\u003etop1--]; } else if (StackNumber ==2){ if (S-\u003etop2 ==-1) { //è¯´æ˜æ ˆäºŒä¸ºç©º return ERROR; } *e = S-\u003edata[S-\u003etop2++]; } return OK; } 4.6 æ ˆçš„é“¾å¼å­˜å‚¨ç»“æ„åŠå®ç° æ ˆçš„é“¾å¼å­˜å‚¨ç»“æ„ï¼Œç®€ç§°é“¾æ ˆ //é“¾æ ˆçš„ç»“æ„å®šä¹‰ //é“¾æ ˆç»“ç‚¹ typedef struct StackNode { SElemType data; struct StackNode *next; }StackNode,*LinkStackPtr; //æ•´ä¸ªé“¾æ ˆ typedef struct LinkStack { LinkStackPtr top;//æ ˆé¡¶æŒ‡é’ˆ int count ; //æ ˆå…ƒç´ ä¸ªæ•° }LinkStack; è¿›æ ˆæ“ä½œpushï¼š //è¿›æ ˆæ“ä½œ //æ’å…¥eä¸ºæ–°å…ƒç´ åˆ°é“¾æ ˆçš„æ ˆé¡¶ Status Push(LinkStack *S,SElemType e) { LinkStackPtr s = (LinkStackPtr)malloc(sizeof(StackNode)); s-\u003edata = e; //æ¥ç€å°†å½“å‰æ ˆé¡¶å…ƒç´ èµ‹å€¼ç»™æ–°ç»“ç‚¹çš„ç›´æ¥åç»­ï¼Œ s-\u003enext = S-\u003etop; //å°†æ–°ç»“ç‚¹èµ‹å€¼ç»™æ ˆé¡¶æŒ‡é’ˆtop S-\u003etop = s; S-\u003ecount ++; return OK; } å‡ºæ ˆæ“ä½œPopï¼š //å‡ºæ ˆæ“ä½œ //è‹¥æ ˆä¸ä¸ºç©ºï¼Œå°±åˆ é™¤æ ˆé¡¶å…ƒç´ å¹¶ç”¨eæ¥è¿”å›åˆ é™¤çš„å…ƒç´ ï¼Œ //å‡è®¾å˜é‡pç”¨æ¥å­˜å‚¨è¦åˆ é™¤çš„æ ˆé¡¶å…ƒç´ ï¼Œå°†æ ˆé¡¶æŒ‡é’ˆåç§»ä¸€ä½ï¼Œå†é‡Šæ”¾æ‰p Status Pop(LinkStack *S,SElemType *e) { LinkStackPtr p ; //åˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©º if (StackEmpty(S)){ return ERROR; } *e= S-\u003etop-\u003edata; //å°†æ ˆé¡¶ç»“ç‚¹æŒ‡é’ˆèµ‹å€¼ç»™p p = S-\u003etop; //ä½¿æ ˆé¡¶æŒ‡é’ˆä¸‹ç§»åˆ°åä¸€ä½ S-\u003etop = S-\u003etop-\u003enext; //é‡Šæ”¾ç»“ç‚¹p free(p); S-\u003ecount--; return OK; } 4.7æ ˆçš„åº”ç”¨ï¼š 1.é€’å½’ é€’å½’å‡½æ•°ï¼šç›´æ¥è°ƒç”¨è‡ªå·±æˆ–é€šè¿‡ä¸€ç³»åˆ—çš„è°ƒç”¨è¯­å¥é—´æ¥åœ°è°ƒç”¨è‡ªå·±çš„å‡½æ•°ã€‚ é€’å½’è¿‡ç¨‹é€€å›çš„é¡ºåºæ˜¯å®ƒå‰è¡Œé¡ºåºçš„é€†åºã€‚åœ¨é€€å›è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½è¦æ‰§è¡ŒæŸäº›åŠ¨ä½œï¼ŒåŒ…æ‹¬æ¢å¤åœ¨å‰è¡Œè¿‡ç¨‹ä¸­å­˜å‚¨èµ·æ¥çš„æŸäº›æ•°æ®ã€‚ å› æ­¤è¦å®ç°è¿™æ ·çš„éœ€æ±‚ï¼Œç¼–è¯‘å™¨å°±æ˜¯ä½¿ç”¨æ ˆæ¥å®ç°é€’å½’ 2.å››åˆ™è¿ç®—è¡¨è¾¾å¼ 1.åç¼€ï¼ˆé€†æ³¢å…°ï¼‰è¡¨è¾¾å¼ï¼šæ‰€æœ‰çš„ç¬¦å·éƒ½è¦åœ¨è¿ç®—æ•°å­—çš„åé¢å‡ºç° 2.åç¼€è¡¨è¾¾å¼è¿ç®—ç»“æœï¼šè§„åˆ™:ä»å·¦åˆ°å³éå†è¡¨è¾¾å¼çš„æ¯ä¸ªæ•°å­—å’Œç¬¦å·ï¼Œé‡åˆ°æ˜¯æ•°å­—å°±è¿›æ ˆï¼Œé‡åˆ°æ˜¯ç¬¦å·ï¼Œå°±å°†å¤„äºæ ˆé¡¶ä¸¤ä¸ªæ•°å­—å‡ºæ ˆï¼Œè¿›è¡Œç®—ï¼Œè¿ç®—ç»“æœè¿›æ ˆï¼Œä¸€ç›´åˆ°æœ€ç»ˆè·å¾—ç»“æœ 3.ä¸­ç¼€è¡¨è¾¾å¼ï¼šæ ‡å‡†çš„å››åˆ™è¿ç®—è¡¨è¾¾å¼ 4.ä¸­ç¼€è¡¨è¾¾å¼è½¬æ¢ä¸ºåç¼€è¡¨è¾¾å¼çš„è§„åˆ™ï¼šä»å·¦åˆ°å³éå†ä¸­ç¼€è¡¨è¾¾å¼çš„æ¯ä¸ªæ•°å­—å’Œç¬¦å·ï¼Œè‹¥æ˜¯æ•°å­—å°±è¾“å‡ºï¼Œå³æˆä¸ºåç¼€è¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†;è‹¥æ˜¯ç¬¦å·ï¼Œåˆ™åˆ¤æ–­å…¶ä¸æ ˆé¡¶ç¬¦å·çš„ä¼˜å…ˆçº§ï¼Œæ˜¯å³æ‹¬å·æˆ–ä¼˜å…ˆçº§ä¸é«˜äºæ ˆé¡¶ç¬¦å·(ä¹˜é™¤ä¼˜å…ˆåŠ å‡)åˆ™æ ˆé¡¶å…ƒç´ ä¾æ¬¡å‡ºæ ˆå¹¶è¾“å‡ºï¼Œå¹¶å°†å½“å‰ç¬¦å·è¿›æ ˆï¼Œä¸€ç›´åˆ°æœ€ç»ˆè¾“å‡ºåç¼€è¡¨è¾¾å¼ä¸ºæ­¢ã€‚ 4.8é˜Ÿåˆ—çš„å®šä¹‰ï¼š é˜Ÿåˆ—æ˜¯åªå…è®¸åœ¨ä¸€ç«¯è¿›è¡Œæ’å…¥æ“ä½œï¼Œä¸€ç«¯è¿›è¡Œåˆ é™¤æ“ä½œçš„çº¿æ€§è¡¨ (First in First out )ç®€ç§°FIFOï¼Œå…è®¸æ’å…¥çš„ä¸€å¤´å«åšé˜Ÿå°¾ï¼Œå…è®¸åˆ é™¤çš„ä¸€å¤´å«åšé˜Ÿå¤´ 4.9é˜Ÿåˆ—çš„æŠ½è±¡æ•°æ®ç±»å‹ ADT é˜Ÿåˆ—(Queue) Data //åŒçº¿æ€§è¡¨ã€‚å…ƒç´ å…·æœ‰ç›¸åŒçš„ç±»å‹ï¼Œç›¸é‚»å…ƒç´ å…·æœ‰å‰é©±å’Œåç»§å…³ç³»ã€‚ Operation InitQueue(*Q);//åˆå§‹åŒ–æ“ä½œï¼Œå»ºç«‹ä¸€ä¸ªç©ºé˜Ÿåˆ—Qã€‚ DestroyQueue(*Q);//è‹¥é˜Ÿåˆ—Qå­˜åœ¨ï¼Œåˆ™é”€æ¯å®ƒã€‚ ClearQueue(*Q);//å°†é˜Ÿåˆ—Qæ¸…ç©ºã€‚ QueueEmpty(Q);// è‹¥é˜Ÿåˆ—Qä¸ºç©ºï¼Œè¿”å›trueï¼Œå¦åˆ™è¿”å›falseã€‚ GetHead(Q, *e);//è‹¥é˜Ÿåˆ—Qå­˜åœ¨ä¸”éç©ºï¼Œç”¨eè¿”å›é˜Ÿåˆ—Qçš„é˜Ÿå¤´å…ƒç´ ã€‚ EnQueue(*Q, e);// è‹¥é˜Ÿåˆ—Qå­˜åœ¨ï¼Œæ’å…¥æ–°å…ƒç´ eåˆ°é˜Ÿåˆ—Qä¸­å¹¶æˆä¸ºé˜Ÿå°¾å…ƒç´  DeQueue(*Q, *e);//åˆ é™¤é˜Ÿåˆ—Qä¸­é˜Ÿå¤´å…ƒç´ ï¼Œå¹¶ç”¨eè¿”å›å…¶å€¼ QueueLength(Q);//è¿”å›é˜Ÿåˆ—Qçš„å…ƒç´ ä¸ªæ•° endADT 4.10å¾ªç¯é˜Ÿåˆ— å¾ªåºå­˜å‚¨ç»“æ„çš„ä¸è¶³: å…¥é˜Ÿåˆ—æ“ä½œï¼Œå°±æ˜¯åœ¨é˜Ÿå°¾æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(1) å‡ºé˜Ÿåˆ—æ“ä½œï¼Œå°±æ˜¯ä»çº¿æ€§è¡¨ä¸‹æ ‡ä¸º0çš„ä½ç½®å‡ºåˆ—ï¼Œå…¨éƒ¨å…ƒç´ éƒ½è¦ç§»åŠ¨ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(n) å½“åªæœ‰ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œé˜Ÿå°¾å’Œå¯¹å¤´é‡å ï¼Œä½¿å¾—æ“ä½œéº»çƒ¦ï¼Œæ‰€ä»¥å¼•å…¥ä¸¤ä¸ªæŒ‡é’ˆï¼Œä¸€ä¸ªæ˜¯frontæŒ‡å‘é˜Ÿå¤´å…ƒç´ ï¼Œä¸€ä¸ªæ˜¯rearæŒ‡å‘é˜Ÿå°¾å…ƒç´  çš„ä¸‹ä¸€ä¸ªä½ç½®ï¼Œè¿™æ ·å½“frontå’Œrearç›¸ç­‰æ—¶ï¼Œä¸æ˜¯åªå‰©ä¸€ä¸ªå…ƒç´ ï¼Œè€Œæ˜¯è¿™æ˜¯ä¸€ä¸ªç©ºé˜Ÿåˆ— å¦‚æœä¸€ä¸ªé˜Ÿåˆ—å³åœ¨å‡ºåˆ—ä¹Ÿåœ¨å…¥åˆ—ï¼Œä½¿rearè¶…å‡ºäº†çº¿æ€§è¡¨çš„æœ€å¤§å…ƒç´ ä¸ªæ•°ï¼Œä½†æ˜¯é˜Ÿåˆ—é˜Ÿå¤´è¿˜æœ‰ç©ºé—²ï¼Œè¿™æ ·çš„ç°è±¡ç§°ä¸ºâ€œå‡æº¢å‡ºâ€ å¾ªç¯é˜Ÿåˆ—å®šä¹‰ï¼šé˜Ÿå¤´é˜Ÿå°¾ç›¸è¿çš„é¡ºåºå­˜å‚¨ç»“æ„ å¾ªç¯é˜Ÿåˆ—æ»¡çš„æ¡ä»¶ï¼š(rear+1)%QueueSize==front å¾ªç¯é˜Ÿåˆ—ç©ºçš„æ¡ä»¶ï¼šrear = front å¾ªç¯é˜Ÿåˆ—é˜Ÿåˆ—é•¿åº¦ï¼š(rear-front+QueueSize)%QueueSize å¾ªç¯é˜Ÿåˆ—çš„ç»“æ„å®šä¹‰: //QElemTypeçš„ç±»å‹è§†å®é™…æƒ…å†µè€Œå®šï¼Œè¿™é‡Œå‡è®¾ä¸ºint typedef int QElemType ; typedef struct { QElemType data[MAXSIZE]; int front; int rear;//å°¾è¿½é’ˆï¼ŒæŒ‡å‘é˜Ÿåˆ—çš„é˜Ÿå°¾å…ƒç´ çš„ä¸‹ä¸€ä¸ªä½ç½® }SqQueue; å¾ªç¯åˆ—è¡¨åˆå§‹åŒ–æ“ä½œï¼š Status InitSqQueue(SqQueue *Q){ Q-\u003efront=0; Q-\u003erear=0; return OK; } è·å–å¾ªç¯åˆ—è¡¨çš„é•¿åº¦ï¼š int SqQueueLenth(SqQueue Q","date":"2023-12-24","objectID":"/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E4%BA%8C/:0:2","tags":["æ•°æ®ç»“æ„ä¸ç®—æ³•"],"title":"å­¦ä¹ ç¬”è®°ï¼šæ•°æ®ç»“æ„ä¸ç®—æ³•(äºŒ)","uri":"/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E4%BA%8C/"},{"categories":["æ•°æ®ç»“æ„ä¸ç®—æ³•"],"content":"ç¬¬äº”ç«  ä¸² 5.1ä¸²çš„å®šä¹‰ï¼š ä¸²(string)ï¼šæ˜¯æŒ‡ç”±ä¸€ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ç»„æˆçš„æœ‰é™åºåˆ— é›¶ä¸ªå­—ç¬¦çš„ä¸²å°±æ˜¯ç©ºä¸² å­ä¸²å°±æ˜¯è¯¥ä¸²ä¸­è¿ç»­çš„å…ƒç´ ç»„æˆçš„å­åºåˆ—ï¼ŒåŒ…å«å­ä¸²çš„ä¸²å°±æ˜¯ä¸»ä¸² å­ä¸²çš„ç¬¬ä¸€ä¸ªå­—ç¬¦åœ¨ä¸»ä¸²çš„åºå·å°±æ˜¯å­ä¸²åœ¨ä¸»ä¸²çš„ä½ç½® 5.2ä¸²çš„æŠ½è±¡æ•°æ®ç±»å‹ ADT ä¸²(string) Data ä¸²ä¸­å…ƒç´ ä»…ç”±ä¸€ä¸ªå­—ç¬¦ç»„æˆï¼Œç›¸é‚»å…ƒç´ å…·æœ‰å‰é©±å’Œåç»§å…³ç³»ã€‚ Operation StrAssign(T, *chars): StrCopy(T, S): ClearString(S): StringEmpty(S): StrLength(S): StrCompare(S, T): Concat(T, S1, S2): SubString(Sub, S, pos, len) Index(S,T,pos): Replace(S,T,V): StrInsert(S,pos,T): StrDelete(S,pos,len): endADT 5.3ä¸²çš„å­˜å‚¨ç»“æ„ 1.ä¸²çš„é¡ºåºå­˜å‚¨ç»“æ„ï¼šç”±ä¸€ç»„å†…å­˜åœ°å€è¿ç»­çš„å­˜å‚¨å•å…ƒè¿›è¡Œå­˜å‚¨ä¸²ä¸­çš„å­—ç¬¦åºåˆ—ï¼Œä¸€èˆ¬æ˜¯æ ¹æ®é¢„å®šä¹‰çš„é•¿åº¦ï¼Œä¸ºä¸²åˆ†é…ä¸€ä¸ªå®šé•¿å­˜å‚¨åŒºï¼Œä¸€èˆ¬ä¸ºå®šé•¿æ•°ç»„ 2.ä¸²çš„é“¾å¼å­˜å‚¨ç»“æ„ï¼šä¸€ä¸ªç»“ç‚¹æ”¾ä¸€ä¸ªå­—ç¬¦æˆ–è€…å¤šä¸ªå­—ç¬¦ 5.4æœ´ç´ çš„æ¨¡å¼åŒ¹é…ç®—æ³• ç®—æ³•å®ç°ï¼š //index //å‡è®¾S[0],å’ŒT[0]å­˜å‚¨å„å­—ç¬¦ä¸²çš„é•¿åº¦ //è¿”å›Tåœ¨Sçš„ç¬¬posä¸ªå­—ç¬¦ä¹‹åçš„ä½ç½® int Index(string S,string T,int pos){ //iç”¨äºSä¸­å½“å‰ä½ç½®ä¸‹æ ‡ï¼Œè‹¥posä¸ä¸º1ï¼Œåˆ™ä»posä½ç½®å¼€å§‹ int i = pos; //jç”¨äºTä¸­å½“å‰ä½ç½®ä¸‹æ ‡ int j = 1; while(i \u003cS[0] \u0026\u0026j \u003cT[0]) { //ä¸¤å­—æ¯ç›¸åŒåˆ™ç»§ç»­ if (S[i] == T[j]){ i ++; j++; }else { //ä¸åŒå°±æŒ‡é’ˆå›é€€é‡æ–°å¼€å§‹åŒ¹é… /* ié€€å›åˆ°ä¸Šæ¬¡åŒ¹é…é¦–ä½çš„ä¸‹ä¸€ä½ */ i = i - j + 2; /* jé€€å›åˆ°å­ä¸²Tçš„é¦–ä½ */ j = 1; } } if (j == T[0]){ return i -T[0]; }else { return 0; } } 5.5 KMPæ¨¡å¼åŒ¹é…ç®—æ³• ä¸€è„¸æ‡µé€¼ğŸ˜³ï¼Œå•ç‹¬å†™ä¸ªåšå®¢è¡¥å……å§ğŸ˜­ ","date":"2023-12-24","objectID":"/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E4%BA%8C/:0:3","tags":["æ•°æ®ç»“æ„ä¸ç®—æ³•"],"title":"å­¦ä¹ ç¬”è®°ï¼šæ•°æ®ç»“æ„ä¸ç®—æ³•(äºŒ)","uri":"/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E4%BA%8C/"},{"categories":["äº‘åŸç”Ÿ"],"content":"dockeråŸºç¡€å‘½ä»¤ï¼Œdockerçš„æ ¸å¿ƒæŠ€æœ¯ï¼Œdockerfileç¼–å†™","date":"2023-12-24","objectID":"/docker%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93/","tags":["docker"],"title":"DockeråŸºç¡€çŸ¥è¯†æ€»ç»“","uri":"/docker%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93/"},{"categories":["äº‘åŸç”Ÿ"],"content":"docker åŸºç¡€çŸ¥è¯† ","date":"2023-12-24","objectID":"/docker%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93/:0:0","tags":["docker"],"title":"DockeråŸºç¡€çŸ¥è¯†æ€»ç»“","uri":"/docker%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93/"},{"categories":["äº‘åŸç”Ÿ"],"content":"ä»€ä¹ˆæ˜¯dockerï¼Ÿ Docker!=è½»é‡çº§è™šæ‹Ÿæœº Dockerä½¿ç”¨çš„æ˜¯å®¹å™¨åŒ–æŠ€æœ¯ï¼Œdockeråˆ©ç”¨çš„æ˜¯å®¿ä¸»æœºçš„æ“ä½œç³»ç»Ÿå†…æ ¸ Dockeræ˜¯ä¸€ä¸ªClient-Serverç»“æ„çš„ç³»ç»Ÿï¼ŒDockerå®ˆæŠ¤è¿›ç¨‹è¿è¡Œåœ¨ä¸»æœºä¸Šï¼Œ ç„¶åé€šè¿‡Socketè¿æ¥ä»å®¢æˆ·ç«¯è®¿é—®Dockerå®ˆæŠ¤è¿›ç¨‹ã€‚ Dockerå®ˆæŠ¤è¿›ç¨‹ä»å®¢æˆ·ç«¯æ¥å—å‘½ä»¤ï¼Œå¹¶æŒ‰ç…§å‘½ä»¤ï¼Œç®¡ç†è¿è¡Œåœ¨ä¸»æœºä¸Šçš„å®¹å™¨ã€‚ ä¸€ä¸ªdocker å®¹å™¨ï¼Œæ˜¯ä¸€ä¸ªè¿è¡Œæ—¶ç¯å¢ƒï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºè¿›ç¨‹è¿è¡Œçš„é›†è£…ç®±ã€‚ ","date":"2023-12-24","objectID":"/docker%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93/:0:1","tags":["docker"],"title":"DockeråŸºç¡€çŸ¥è¯†æ€»ç»“","uri":"/docker%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93/"},{"categories":["äº‘åŸç”Ÿ"],"content":"docker å‘½ä»¤ç®€ä»‹ ç†Ÿèƒ½ç”Ÿå·§ï¼Œè¿™é‡Œä»…åšæ€»ç»“å¤§éƒ¨åˆ†å‘½ä»¤ä½œç”¨ï¼Œå…¶å®è§åçŸ¥æ„ //å¸¸è§å‘½ä»¤ //å®¹å™¨æ“ä½œ //å®¹å™¨æ“ä½œå‘½ä»¤éƒ½å¯ä»¥åŠ container,ä¾‹ï¼šdocker container run XXX docker attach //å°†æœ¬åœ°æ ‡å‡†è¾“å…¥ã€è¾“å‡ºå’Œé”™è¯¯æµé™„åŠ åˆ°æ­£åœ¨è¿è¡Œçš„å®¹å™¨ï¼Œé€šä¿—çš„å°±æ˜¯å¯ä»¥è¿›å…¥å®¹å™¨ docker run //åˆ›å»ºå¹¶è¿è¡Œä¸€ä¸ªå®¹å™¨,é€‰é¡¹-dï¼šå¯ä»¥è®©å®¹å™¨åœ¨åå°è¿è¡Œ docker exec //è¿›å…¥ä¸€ä¸ªå®¹å™¨,é€‰é¡¹-itï¼šä¿æŒæ ‡å‡†è¾“å…¥æ‰“å¼€ï¼Œå¹¶åˆ†é…ä¸€ä¸ªä¼ªç»ˆç«¯ docker stats //å±•ç¤ºè¿è¡Œä¸­çš„å®¹å™¨çš„çŠ¶æ€ docker start //å¯åŠ¨ä¸€ä¸ªæˆ–å¤šä¸ªåœæ­¢çš„å®¹å™¨ docker stop //åœæ­¢ä¸€ä¸ªæˆ–å¤šä¸ªè¿è¡Œçš„å®¹å™¨ docker kill //æ€æ­»ä¸€ä¸ªæˆ–å¤šä¸ªè¿è¡Œçš„å®¹å™¨ docker ps //å±•ç¤ºæ­£åœ¨è¿è¡Œçš„å®¹å™¨ docker rm //åˆ é™¤å®¹å™¨ docker rmi //åˆ é™¤é•œåƒ docker rename //é‡å‘½åå®¹å™¨ docker restart //é‡å¯ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨ docker logs //è®°å½•ä¸€ä¸ªå®¹å™¨çš„æ—¥å¿— docker top //å±•ç¤ºè¿è¡Œä¸­å®¹å™¨çš„è¿›ç¨‹ä¿¡æ¯ docker export //å¯¼å‡ºå®¹å™¨ï¼Œé€šå¸¸ä¸importè”ç”¨ docker import //å¯¼å…¥å®¹å™¨ï¼Œé€šå¸¸ä¸exportè”ç”¨ docker pause //æš‚åœä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨çš„æ‰€æœ‰è¿›ç¨‹ docker unpause //è§£é™¤ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨çš„æ‰€æœ‰æš‚åœçš„è¿›ç¨‹ docker port //å±•ç¤ºå®¹å™¨çš„ç«¯å£æ˜ å°„å…³ç³» docker update //æ›´æ–°å®¹å™¨çš„é…ç½®æ–‡ä»¶ docker wait //é˜»å¡ç›´åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨åœæ­¢ï¼Œæ‰“å°å®ƒä»¬çš„é€€å‡ºä»£ç  docker commit //é€šè¿‡ä¸€ä¸ªå®¹å™¨ç”Ÿæˆä¸€ä¸ªé•œåƒ docker cp //ä»å®¹å™¨å’Œæœ¬åœ°ä¸»æœºä¹‹é—´å¤åˆ¶æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ docker diff //å±•ç¤ºå®¹å™¨å†…æ–‡ä»¶ç³»ç»Ÿçš„å˜æ›´ //é•œåƒæ“ä½œ docker build //é€šè¿‡dockerfileç”Ÿæˆä¸€ä¸ªé•œåƒ docker images //å±•ç¤ºæ‰€æœ‰é•œåƒ docker pull //ä»dockerHubä¸­æ‹‰å–é•œåƒ docker push //å°†é•œåƒæ¨é€åˆ°dockerHub docker search //æœç´¢é•œåƒ docker save //å­˜å…¥ï¼šå°†ä¸€ä¸ªæˆ–å¤šä¸ªé•œåƒæ‰“åŒ…ä¸ºtaræ ¼å¼ docker load //åŠ è½½ï¼šåŠ è½½é•œåƒä¿å­˜æ–‡ä»¶ï¼Œä½¿ç”Ÿæˆé•œåƒ docker tag //åˆ›å»ºæŒ‡å®šé•œåƒçš„æ ‡ç­¾ (æºå¸¦imageå­å‘½ä»¤) docker image build //é€šè¿‡dockerfileç”Ÿæˆä¸€ä¸ªé•œåƒ docker image ls //å±•ç¤ºæ‰€æœ‰é•œåƒ docker image pull //æ‹‰å–é•œåƒ docker image push //æ¨é€é•œåƒ docker image history//å±•ç¤ºä¸€ä¸ªé•œåƒçš„å†å² docker image import //ä»tarballå¯¼å…¥å†…å®¹ä»¥åˆ›å»ºæ–‡ä»¶ç³»ç»Ÿæ˜ åƒ docker image inspect//å±•ç¤ºä¸€ä¸ªæˆ–å¤šä¸ªé•œåƒçš„çš„è¯¦ç»†ä¿¡æ¯ docker image load //åŠ è½½ï¼šåŠ è½½é•œåƒä¿å­˜æ–‡ä»¶ï¼Œä½¿ç”Ÿæˆé•œåƒ docker image save //å­˜å…¥ï¼šå°†ä¸€ä¸ªæˆ–å¤šä¸ªé•œåƒæ‰“åŒ…ä¸ºtaræ ¼å¼ docker image prune //åˆ é™¤ä¸ç”¨çš„é•œåƒ docker image rm //åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªé•œåƒ docker image tag //åˆ›å»ºæŒ‡å®šé•œåƒçš„æ ‡ç­¾ //... okå•Šï½æ„Ÿè§‰å°±è¿™äº›å‘½ä»¤å¸¸ç”¨ï¼Œæ²¡åˆ—å‡ºæ¥çš„ï¼Œè¿˜æœ‰ä¸€äº›è¯¦ç»†å‚æ•°å°±æŸ¥å®˜ç½‘å§ï¼Œå®˜ç½‘æ›´è¯¦ç»†ã€‚ ","date":"2023-12-24","objectID":"/docker%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93/:0:2","tags":["docker"],"title":"DockeråŸºç¡€çŸ¥è¯†æ€»ç»“","uri":"/docker%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93/"},{"categories":["äº‘åŸç”Ÿ"],"content":"docker çš„æ ¸å¿ƒæŠ€æœ¯ å…ˆçœ‹çœ‹AIæ€ä¹ˆè¯´ï¼Ÿ Linuxå®¹å™¨ï¼ˆLinux Containersï¼ŒLXCï¼‰ï¼šDockeråˆ©ç”¨Linuxå†…æ ¸æä¾›çš„å®¹å™¨åŒ–æŠ€æœ¯ï¼Œå®ç°äº†éš”ç¦»è¿›ç¨‹ã€æ–‡ä»¶ç³»ç»Ÿã€ç½‘ç»œå’Œèµ„æºçš„è½»é‡çº§è™šæ‹ŸåŒ–ã€‚Linuxå®¹å™¨æ˜¯Dockerå®ç°å®¹å™¨åŒ–çš„åŸºç¡€ã€‚ å‘½åç©ºé—´ï¼ˆNamespacesï¼‰ï¼šDockerä½¿ç”¨å‘½åç©ºé—´æ¥éš”ç¦»è¿›ç¨‹çš„è¿è¡Œç¯å¢ƒï¼ŒåŒ…æ‹¬PIDï¼ˆè¿›ç¨‹IDï¼‰ã€ç½‘ç»œã€IPCï¼ˆè¿›ç¨‹é—´é€šä¿¡ï¼‰ã€æŒ‚è½½ç‚¹å’ŒUTSï¼ˆä¸»æœºåå’ŒåŸŸåï¼‰ç­‰ã€‚æ¯ä¸ªå®¹å™¨éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„å‘½åç©ºé—´ï¼Œä½¿å¾—å®¹å™¨å†…çš„è¿›ç¨‹æ„ŸçŸ¥ä¸åˆ°å®¿ä¸»æœºæˆ–å…¶ä»–å®¹å™¨çš„å­˜åœ¨ã€‚ æ§åˆ¶ç»„ï¼ˆControl Groupsï¼Œcgroupsï¼‰ï¼šDockeråˆ©ç”¨æ§åˆ¶ç»„æ¥é™åˆ¶å’Œåˆ†é…å®¹å™¨å¯ä½¿ç”¨çš„èµ„æºï¼Œå¦‚CPUã€å†…å­˜ã€ç£ç›˜å’Œç½‘ç»œå¸¦å®½ç­‰ã€‚æ§åˆ¶ç»„å¯ä»¥å¯¹å®¹å™¨è¿›è¡Œèµ„æºé…é¢å’Œä¼˜å…ˆçº§ç®¡ç†ï¼Œç¡®ä¿å®¹å™¨ä¹‹é—´äº’ä¸å¹²æ‰°ã€‚ è”åˆæ–‡ä»¶ç³»ç»Ÿï¼ˆUnionFSï¼‰ï¼šDockerä½¿ç”¨è”åˆæ–‡ä»¶ç³»ç»Ÿå°†å®¹å™¨çš„æ–‡ä»¶ç³»ç»Ÿä¸å®¿ä¸»æœºçš„æ–‡ä»¶ç³»ç»Ÿè¿›è¡Œå±‚å å¹¶å…±äº«ï¼Œä»¥å®ç°é•œåƒçš„é«˜æ•ˆå­˜å‚¨å’Œå®¹å™¨çš„å¿«é€Ÿå¯åŠ¨ã€‚å¸¸ç”¨çš„è”åˆæ–‡ä»¶ç³»ç»Ÿæœ‰AUFSã€OverlayFSå’ŒDeviceMapperç­‰ã€‚ Dockeré•œåƒï¼ˆDocker Imageï¼‰ï¼šDockeré•œåƒæ˜¯å®¹å™¨è¿è¡Œæ—¶çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ŒåŒ…å«äº†è¿è¡Œä¸€ä¸ªå®¹å™¨æ‰€éœ€çš„æ–‡ä»¶ç³»ç»Ÿã€ä¾èµ–åº“å’Œé…ç½®ç­‰ã€‚é•œåƒå¯ä»¥é€šè¿‡Dockerfileå®šä¹‰å’Œæ„å»ºï¼Œä¹Ÿå¯ä»¥ä»Docker Hubç­‰é•œåƒä»“åº“ä¸­è·å–ã€‚ Dockerå®¹å™¨ï¼ˆDocker Containerï¼‰ï¼šDockerå®¹å™¨æ˜¯åŸºäºé•œåƒåˆ›å»ºçš„è¿è¡Œå®ä¾‹ï¼Œå¯ä»¥ç‹¬ç«‹è¿è¡Œåœ¨å®¿ä¸»æœºä¸Šï¼Œå¹¶ä¸å…¶ä»–å®¹å™¨éš”ç¦»ã€‚å®¹å™¨å¯ä»¥æ–¹ä¾¿åœ°å¯åŠ¨ã€åœæ­¢ã€æš‚åœå’Œé”€æ¯ï¼Œæä¾›äº†ä¸€ç§è½»é‡çº§ã€å¯ç§»æ¤çš„åº”ç”¨éƒ¨ç½²æ–¹å¼ã€‚ è¿™äº›æ ¸å¿ƒæŠ€æœ¯å…±åŒæ„æˆäº†Dockerçš„åŸºç¡€æ¶æ„ï¼Œä½¿å¾—Dockerèƒ½å¤Ÿå®ç°é«˜æ•ˆã€å¯ç§»æ¤ã€å¯æ‰©å±•çš„å®¹å™¨åŒ–åº”ç”¨éƒ¨ç½²å’Œç®¡ç†ã€‚ (æ€»ç»“åˆ°ä½ï¼Œæœ‰äº›è¯æ±‡æˆ‘ä¹Ÿä¸æ‡‚ğŸ˜­) é‚£ä¹ˆå¯ä»¥çœ‹å‡ºdockerçš„ä¸‰å¤§åº•åº§ï¼šNamespaces,control Groups(cgroups),UnionFS ä¸€.Namespaces(å‘½åç©ºé—´) Namespase æ˜¯linuxå†…æ ¸æä¾›çš„éš”ç¦»è¿›ç¨‹èµ„æºçš„æ–¹æ¡ˆï¼Œè™šæ‹Ÿèµ„æºçš„éš”ç¦» ä¸»è¦åˆ†ä¸ºäº†7ç±» 1.PIDå‘½åç©ºé—´ï¼šéš”ç¦»äº†è¿›ç¨‹id 2.Mountå‘½åç©ºé—´ï¼šéš”ç¦»æ–‡ä»¶ç³»ç»ŸæŒ‚è½½ç‚¹ 3.Networkå‘½åç©ºé—´ï¼šéš”ç¦»ç½‘ç»œè®¾å¤‡ï¼Œipåœ°å€ï¼Œè·¯ç”±è¡¨ï¼Œé˜²ç«å¢™ç­‰ 4.UTSå‘½åç©ºé—´ï¼šéš”ç¦»ä¸»æœºå’ŒåŸŸå 5.IPCå‘½åç©ºé—´ï¼šéš”ç¦» System V IPC å’Œ POSIX æ¶ˆæ¯é˜Ÿåˆ—(è¿™ä¸ªæ˜¯å•¥ï¼Ÿæ²¡å­¦æœ‰ç‚¹æ‡µ)ï¼Œ(IPCæ˜¯linuxè¿›ç¨‹é—´æ•°æ®äº¤äº’å’ŒåŒæ­¥çš„æ–¹å¼) 6.Userå‘½åç©ºé—´ï¼šéš”ç¦»ç”¨æˆ·å’Œç”¨æˆ·ç»„ 7.Cgroupå‘½åç©ºé—´ï¼šéš”ç¦»è¿›ç¨‹ç»„é—´çš„èµ„æº PIDéš”ç¦»(æ²¡çœ‹æ‡‚ï¼Œä»¥åè¡¥å……) ç½‘ç»œéš”ç¦»ï¼š docker æä¾›çš„å››ç§ç½‘ç»œæ¨¡å¼ï¼šhost,container,none,bridge é»˜è®¤ä¸ºç½‘æ¡¥æ¨¡å¼ åœ¨è¯¥æ¨¡å¼ä¸‹ï¼Œé™¤äº†ä¼šåˆ†é…éš”ç¦»çš„ç½‘ç»œå‘½åç©ºé—´ï¼Œdockerè¿˜ä¼šç»™å®¹å™¨åˆ†é…ipåœ°å€ dockeræœåŠ¡å™¨åœ¨ä¸»æœºå¯åŠ¨åï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„docker0è™šæ‹Ÿç½‘æ¡¥ï¼Œä¹‹åæ‰€æœ‰çš„æœåŠ¡é»˜è®¤æƒ…å†µä¸‹éƒ½ä¼šè¿æ¥åˆ°è¯¥è™šæ‹Ÿç½‘å¡ é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯ä¸ªå®¹å™¨åœ¨åˆ›å»ºçš„æ—¶å€™éƒ½ä¼šåˆ›å»ºä¸€å¯¹è™šæ‹Ÿç½‘å¡ï¼Œè¿™ä¸€å¯¹æ„æˆä¸€ä¸ªæ•°æ®é€šé“ï¼Œå…¶ä¸­ä¸€ä¸ªç½‘å¡ä¼šæ”¾åœ¨å®¹å™¨ä¸­ï¼ŒåŠ å…¥åˆ°docker0ç½‘æ¡¥ä¸­. docker0ä¼šä¸ºæ¯ä¸ªå®¹å™¨åˆ†é…ä¸€ä¸ªä¸åŒçš„ipåœ°å€ï¼Œå¹¶å°†docker0ç‚¹ipåœ°å€è®¾ç½®ä¸ºé»˜è®¤ç½‘å…³ ç½‘æ¡¥ docker0 é€šè¿‡ iptables ä¸­çš„é…ç½®ä¸å®¿ä¸»æœºå™¨ä¸Šçš„ç½‘å¡ç›¸è¿ï¼Œæ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„è¯·æ±‚éƒ½ä¼šé€šè¿‡ iptables è½¬å‘åˆ° docker0 å¹¶ç”±ç½‘æ¡¥åˆ†å‘ç»™å¯¹åº”çš„æœºå™¨ã€‚ libnetwork:æœ‰å¾…è¡¥å…… å®¹å™¨ç½‘ç»œæ¨¡å‹ï¼šæœ‰å¾…è¡¥å…… äºŒ.CGroups(æ§åˆ¶ç»„) CGroupsç”¨æˆ·éš”ç¦»å®¿ä¸»æœºçš„ç‰©ç†èµ„æºï¼Œä¾‹å¦‚ CPUã€å†…å­˜ã€ç£ç›˜ I/O å’Œç½‘ç»œå¸¦å®½ã€‚ æ¯ä¸€ä¸ªCGroupéƒ½æ˜¯ä¸€ç»„æ‹¥æœ‰ç›¸åŒå±æ€§çš„è¿›ç¨‹ï¼ŒCCroupæ˜¯æœ‰å±‚çº§å…³ç³»çš„ï¼Œå­ç±»å¯ä»¥ç»§æ‰¿çˆ¶ç±»çš„éš”ç¦»æ ‡å‡† (ä¹Ÿæ˜¯æŒºå¤æ‚çš„ï¼Œä»¥åè¡¥å……) ä¸‰.UnionFS(è”åˆæ–‡ä»¶ç³»ç»Ÿ) ä»€ä¹ˆæ˜¯é•œåƒï¼Ÿ imageæ˜¯dockeréƒ¨ç½²çš„åŸºæœ¬å•ä½ï¼ŒåŒ…å«ç¨‹åºæ–‡ä»¶ï¼Œä»¥åŠè¿è¡Œæ‰€éœ€çš„èµ„æºæ–‡ä»¶ï¼Œå¯¹å¤–è¡¨ç°ä¸ºæ–‡ä»¶çš„å½¢å¼(mountç‚¹å½¢å¼) ä»€ä¹ˆæ˜¯UnionFSï¼Ÿ UnionFSæ˜¯linuxç‚¹æ–‡ä»¶ç³»ç»ŸæŠ€æœ¯ï¼Œç”¨äºå°†å¤šä¸ªæ–‡ä»¶ç³»ç»ŸæŒ‚è½½åˆ°åŒä¸€ä¸ªæŒ‚è½½ç‚¹ AUFSï¼šAdvanced UnionFSï¼ŒUnionFSå…ˆè¿›ç‰ˆ,æä¾›æ›´ä¼˜ç§€çš„æ€§èƒ½å’Œæ•ˆç‡ å››.æ€»ç»“ï¼š docker = LXC + AUFS(docker = linux container + advance UnionFS) LXC:ç”¨æ¥è¿›è¡Œèµ„æºç®¡ç† AUFS:ç”¨æ¥è¿›è¡Œé•œåƒç®¡ç† cgroupï¼ŒLXCï¼Œdockerä¸‰è€…çš„å…³ç³»ï¼š cgroup â€”â€“\u003eLXCâ€”â€”\u003edocker è¿›è¡Œå±‚å±‚å°è£… ","date":"2023-12-24","objectID":"/docker%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93/:0:3","tags":["docker"],"title":"DockeråŸºç¡€çŸ¥è¯†æ€»ç»“","uri":"/docker%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93/"},{"categories":["äº‘åŸç”Ÿ"],"content":"DockerFileçš„ç¼–å†™ DockerFile æ˜¯æ–‡æœ¬æ–‡ä»¶ï¼Œ å…¶ä¸­çš„æ¯æ¡æŒ‡ä»¤éƒ½ä¼šå»ºç«‹ä¸€å±‚ï¼Œæ¯æ¡æŒ‡ä»¤å°±å¯¹åº”è¿™ä¸€å±‚è¯¥å¦‚ä½•æ„å»º FROMæŒ‡å®šåŸºç¡€é•œåƒ FROMæ˜¯å¿…å¤‡æŒ‡ä»¤ï¼Œä¹Ÿæ˜¯ç¬¬ä¸€æ¡æŒ‡ä»¤ å¯ä»¥é€‰æ‹©ç°æœ‰çš„é•œåƒï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨scratché•œåƒï¼Œä»£è¡¨ç©ºé•œåƒï¼Œè¿™å°±æ„å‘³ç€ä½ ä¸é€‰æ‹©ä»»ä½•é•œåƒä½œä¸ºä½ çš„åŸºç¡€é•œåƒï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥æ‰€å†™çš„æŒ‡ä»¤å°†ä½œä¸ºé•œåƒçš„ç¬¬ä¸€å±‚å­˜åœ¨ ä¾‹å¦‚goå¼€å‘çš„åº”ç”¨ï¼Œç¼–è¯‘ä¹‹åç›´æ¥ç”Ÿæˆçš„å°±æ˜¯å¯æ‰§è¡Œçš„2è¿›åˆ¶æ–‡ä»¶ï¼Œä¸éœ€è¦ä¾èµ–æ“ä½œç³»ç»Ÿï¼Œæ‰€ä¾èµ–çš„åº“éƒ½åŒ…å«åœ¨äº†å¯æ‰§è¡Œæ–‡ä»¶ä¸­ï¼Œæ‰€ä»¥å¾ˆé€‚åˆä½¿ç”¨FROM scratchï¼Œè®©é•œåƒä½“ç§¯å˜å¾—å°å·§ RUNæ‰§è¡Œå‘½ä»¤è¡Œå‘½ä»¤ RUNæŒ‡ä»¤æ˜¯ç”¨æ¥æ‰§è¡Œå‘½ä»¤è¡Œå‘½ä»¤çš„ shellæ ¼å¼ï¼š RUN \u003cå‘½ä»¤\u003e execæ ¼å¼ï¼š RUN [\"å¯æ‰§è¡Œæ–‡ä»¶\",\"å‚æ•°A\",\"å‚æ•°B\",...] å› ä¸ºæ¯æ¡æŒ‡ä»¤å¯¹åº”ä¸€å±‚ï¼Œæ‰€ä»¥å°½é‡æŠŠå¤šæ¡shellå‘½ä»¤å†™åœ¨åŒä¸€æ¡RUNæŒ‡ä»¤ä¸­ï¼Œä½¿ç”¨\u0026\u0026è¿æ¥ï¼Œå¯ä»¥é˜²æ­¢äº§ç”Ÿè‡ƒè‚¿ï¼Œå¤šå±‚çš„é•œåƒ Dockerfile æ”¯æŒ Shell ç±»çš„è¡Œå°¾æ·»åŠ  \\ çš„å‘½ä»¤æ¢è¡Œæ–¹å¼ï¼Œä»¥åŠè¡Œé¦– # è¿›è¡Œæ³¨é‡Šçš„æ ¼å¼ã€‚ åœ¨æ¯ä¸€å±‚çš„æ„å»ºç»“å°¾ï¼Œè®°å¾—åˆ é™¤æ— å…³æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥é¿å…è‡ƒè‚¿çš„é•œåƒäº§ç”Ÿ æ„å»ºé•œåƒ docker build [OPTIONS] PATH | URL | - ä¾‹å¦‚ï¼šdocker build -t nginx:v3 . é•œåƒæ„å»ºä¸Šä¸‹æ–‡(context) é€šè¿‡ä¸Šé¢çš„ä¾‹å­å¯ä»¥çœ‹åˆ°æœ€åæœ‰ä¸€ä¸ª . ï¼Œ. è¡¨ç¤ºå½“å‰ç›®å½•ï¼Œæ³¨æ„ä¸è¦è¯¯è®¤ä¸ºæ˜¯DockerFileç›®å½•ï¼Œè¿™æ˜¯åœ¨æŒ‡å®šä¸Šä¸‹æ–‡è·¯å¾„ã€‚ ä»€ä¹ˆæ˜¯ä¸Šä¸‹æ–‡å‘¢ï¼Ÿ docker åœ¨è¿è¡Œæ—¶åˆ†ä¸ºdockerå¼•æ“(æœåŠ¡ç«¯å®ˆæŠ¤è¿›ç¨‹)å’Œå®¢æˆ·ç«¯å·¥å…·,dockerå¼•æ“æä¾›äº†ä¸€ç»„REAT API(docker remote API)ï¼Œå®¢æˆ·ç«¯å·¥å…·é€šè¿‡apiè¿œç¨‹è°ƒç”¨æœåŠ¡ç«¯çš„æœåŠ¡ï¼Œè®©æˆ‘ä»¬ä»¥ä¸ºå„ç§dockeræœåŠ¡æ˜¯åœ¨æœ¬æœºè¿›è¡Œçš„ï¼Œå®é™…ä¸Šæ˜¯åœ¨è¿œç¨‹çš„æœåŠ¡ç«¯è¿›è¡Œçš„ï¼Œè¿™å°±è®©æˆ‘ä»¬æ“æ§è¿œç¨‹æœåŠ¡ç«¯å¼•æ“æ›´åŠ ä¾¿æ·ã€‚ ä½†æ˜¯ï¼Œæˆ‘ä»¬æ„å»ºDockerFileæ—¶å¯ä¸æ­¢ä½¿ç”¨RUNæŒ‡ä»¤ï¼Œè¿˜éœ€è¦ä¸€äº›æœ¬åœ°æ–‡ä»¶ï¼Œä½†æ˜¯åœ¨è¿™æ ·c/sæ¶æ„ä¸‹ï¼Œè¯¥å¦‚ä½•å°†æœ¬åœ°æ–‡ä»¶æä¾›ç»™è¿œç¨‹æœåŠ¡å™¨ï¼Ÿ æ‰€ä»¥å°±å¼•å…¥äº†ä¸Šä¸‹æ–‡è¿™ä¸€æ¦‚å¿µï¼Œé€šè¿‡æ„å»ºä¸Šä¸‹æ–‡ï¼Œå½“æ‰§è¡Œdocker build å‘½ä»¤æ—¶ï¼Œå°±ä¼šæ ¹æ®æ„å»ºçš„ä¸Šä¸‹æ–‡ï¼Œå°†æ‰€éœ€çš„æœ¬åœ°æ–‡ä»¶æ‰“åŒ…ï¼Œä¸Šä¼ åˆ°dockerå¼•æ“ï¼Œdockerå¼•æ“å±•å¼€ä¸Šä¸‹æ–‡åŒ…å°±å¯ä»¥è·å¾—æ‰€æœ‰æ„å»ºæ‰€éœ€çš„æ–‡ä»¶ COPY ./package.json /app/ è¿™é‡Œçš„æ„æ€å°±æ˜¯æŠŠ**ä¸Šä¸‹æ–‡(context)**ç›®å½•ä¸‹çš„package.jsonæ–‡ä»¶å¤åˆ¶,è€Œä¸æ˜¯DockerFileæˆ–å…¶ä»–ç›®å½•ä¸‹ ä¸€èˆ¬å°†DockerFileæ”¾åœ¨ç©ºç›®å½•ä¸‹æˆ–é¡¹ç›®ç›®å½•ä¸‹ï¼Œå¦‚ä½•è¯¥ç›®å½•ä¸‹æ²¡æœ‰æ‰€éœ€æ–‡ä»¶ï¼Œéœ€è¦æŠŠæ–‡ä»¶å¤åˆ¶ä¸€ä»½ï¼Œå¦‚æœæœ‰ä¸æƒ³ä¸Šä¼ ç»™dockerå¼•æ“çš„æ–‡ä»¶ï¼Œå¯ä»¥é€šè¿‡.dockerignoreæŒ‡å®šä¸æƒ³ä¸Šä¼ çš„æ–‡ä»¶ï¼ŒæŠŠè¯¥æ–‡ä»¶ä»ä¸Šä¸‹æ–‡ä¸­å‰”é™¤(ç±»ä¼¼äº.gitignore) DockerFileçš„å‘½åä¸ä¸€å®šä¸€å®šæ˜¯DockerFileï¼Œä¹Ÿä¸ä¸€å®šæ˜¯åœ¨ä¸Šä¸‹æ–‡ç›®å½•ä¸‹ å…¶ä»–çš„ docker build ç”¨æ³•ï¼š 1.ä½¿ç”¨git repoæ„å»º docker build [OPTIONS] PATH | URL | - æˆ‘ä»¬å¯ä»¥çœ‹åˆ°docker build ä¸æ­¢å¯ä»¥ä»ä¸Šä¸‹æ–‡ç›®å½•ä¸­æ„å»ºï¼Œè¿˜å¯ä»¥ä»URLä¸­æ„å»ºï¼Œä¹Ÿå°±æ˜¯è¯´è¿˜å¯ä»¥ä»gitä»“åº“ä¸­æ„å»ºï¼Œé‚£ä¹ˆæˆ‘ä»¬å°†ä»£ç ä¸Šä¼ åˆ° GitHubä¸Šï¼Œå°±å¯ä»¥ä½¿ç”¨dockerå¿«é€Ÿéƒ¨ç½² 2. ä½¿ç”¨tarå‹ç¼©åŒ… å¦‚æœURLä¸­æ˜¯ä¸€ä¸ªtarå‹ç¼©åŒ…ï¼Œdockerä¼šå»ä¸‹è½½å‹ç¼©åŒ…ï¼Œå¹¶è§£å‹åæ„å»ºé•œåƒ 3.ä»æ ‡å‡†è¾“å…¥è¯»å–DockerFileè¿›è¡Œæ„å»º(ä»¥åè¡¥å……) 4.ä»æ ‡å‡†è¾“å…¥è¯»å–ä¸Šä¸‹æ–‡å‹ç¼©åŒ…è¿›è¡Œæ„å»º(ä»¥åè¡¥å……) ","date":"2023-12-24","objectID":"/docker%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93/:0:4","tags":["docker"],"title":"DockeråŸºç¡€çŸ¥è¯†æ€»ç»“","uri":"/docker%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93/"},{"categories":["äº‘åŸç”Ÿ"],"content":"DockerFileæŒ‡ä»¤è¯¦è§£ é™¤äº†ä»¥ä¸Šæåˆ°çš„FROMï¼ŒRUNåŸºç¡€æŒ‡ä»¤å¤–ï¼Œè¿˜æœ‰å¾ˆå¤šéœ€è¦çš„æŒ‡ä»¤ï¼š COPY å¤åˆ¶æ–‡ä»¶ æ ¼å¼ï¼š COPY [--chown=\u003cuser\u003e:\u003cgroup\u003e] \u003cæºè·¯å¾„\u003e... \u003cç›®æ ‡è·¯å¾„\u003e COPY [--chown=\u003cuser\u003e:\u003cgroup\u003e] [\"\u003cæºè·¯å¾„1\u003e\",... \"\u003cç›®æ ‡è·¯å¾„\u003e\"] æºè·¯å¾„å¯ä»¥æ˜¯å¤šä¸ªï¼Œæ”¯æŒé€šé…ç¬¦ï¼Œç›®æ ‡è·¯å¾„å¯ä»¥æ˜¯å·¥ä½œç›®å½•çš„ç›¸å¯¹è·¯å¾„ï¼Œä¹Ÿå¯ä»¥æ˜¯ç»å¯¹è·¯å¾„ï¼Œä½¿ç”¨ç›¸å¯¹è·¯å¾„éœ€è¦ä½¿ç”¨WORKDIRæŒ‡ä»¤æŒ‡å®šå·¥ä½œç›®å½•ã€‚â€“chown=: é€‰é¡¹æ¥æ”¹å˜æ–‡ä»¶çš„æ‰€å±ç”¨æˆ·åŠæ‰€å±ç»„ã€‚ ADD ä¹Ÿæ˜¯å¤åˆ¶æ–‡ä»¶ï¼Œä½†æ˜¯æ¯”COPYé«˜çº§ æ ¼å¼ï¼šä¸COPYä¸€æ · å½“å¤åˆ¶ä¸€ä¸ªå‹ç¼©åŒ…æ—¶ï¼Œä½¿ç”¨ADDå¯ä»¥è¿›è¡Œè‡ªåŠ¨è§£å‹çš„åŠŸèƒ½(å¦‚æœæœ¬æ¥å°±æƒ³æŠŠå‹ç¼©åŒ…å¤åˆ¶åˆ°ç›®æ ‡ç›®å½•ï¼Œè€Œä¸è§£å‹ç¼©ï¼Œé‚£å°±ä¸è¦ç”¨ADDæŒ‡ä»¤) CMD å®¹å™¨å¯åŠ¨å‘½ä»¤ æ ¼å¼ï¼š shellæ ¼å¼ CMD \u003cå‘½ä»¤\u003e execæ ¼å¼ CMD [\"å¯æ‰§è¡Œæ–‡ä»¶\",\"å‚æ•°A\",\"å‚æ•°B\"...] å‚æ•°åˆ—è¡¨æ ¼å¼ CMD [\"å‚æ•°A\",\"å‚æ•°B\"...] (æŒ‡å®šäº†ENTRYPOINTåï¼ŒCMDå°±ç”¨æ¥æŒ‡å®šå‚æ•°) åœ¨è¿è¡Œæ—¶ä¹Ÿå¯ä»¥æŒ‡å®šæ–°çš„å‘½ä»¤æ¥æ›¿æ¢é•œåƒè®¾ç½®çš„é»˜è®¤å‘½ä»¤ ä½¿ç”¨shellæ ¼å¼çš„å‘½ä»¤ï¼Œå®é™…çš„å‘½ä»¤ä¼šè¢«åŒ…è£…ä¸º sh -c çš„å‚æ•°çš„å½¢å¼è¿›è¡Œæ‰§è¡Œã€‚ ä¸€èˆ¬æ ¼å¼æ¨èä½¿ç”¨execæ ¼å¼ï¼ŒæŒ‡ä»¤ä¼šè¢«è§£æä¸ºjsonæ•°ç»„ï¼Œæ‰€ä»¥ä¸€å®šè¦ä½¿ç”¨åŒå¼•å· å®¹å™¨å‰å°è¿è¡Œå’Œåå°è¿è¡Œçš„é—®é¢˜ï¼š å› ä¸ºå®¹å™¨å†…æ²¡æœ‰åå°æœåŠ¡çš„æ¦‚å¿µï¼Œå®¹å™¨æ˜¯ä¸ºäº†ä¸»è¿›ç¨‹å­˜åœ¨çš„ï¼Œä¸»è¿›ç¨‹é€€å‡ºï¼Œé‚£ä¹ˆå®¹å™¨ä¹Ÿä¼šé€€å‡ºï¼Œé‚£ä¹ˆæ‰§è¡Œshellæ ¼å¼å‘½ä»¤æ—¶ï¼Œä¸»è¿›ç¨‹å®é™…ä¸Šæ˜¯sh ï¼Œå½“è¯¥æ¡å‘½ä»¤ç»“æŸåï¼Œshä¹Ÿå°±ç»“æŸäº†ï¼Œä¸»è¿›ç¨‹é€€å‡ºï¼Œé‚£ä¹ˆå®¹å™¨å°±é€€å‡ºäº†ï¼Œæ‰€ä»¥æˆ‘ä»¬åº”è¯¥ä½¿ç”¨execæ ¼å¼å‘½ä»¤ç›´æ¥æ‰§è¡Œå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¹¶åœ¨å‰å°è¿è¡Œ ENTRYPOINT å…¥å£ç‚¹ ENTRYPOINTæ ¼å¼ä¸RUNæ ¼å¼ä¸€æ ·ï¼Œåˆ†ä¸ºshellå’Œexecæ ¼å¼ ENTRYPOINTä¹Ÿæ˜¯ç”¨æ¥æŒ‡å®šå®¹å™¨å¯åŠ¨ç¨‹åºå’Œå¯åŠ¨å‚æ•°ï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶æ›¿ä»£ï¼Œéœ€è¦é€šè¿‡ docker run çš„å‚æ•° â€“entrypoint æ¥æŒ‡å®š å½“æŒ‡å®šäº†ENTRYPOINTåï¼ŒCMDæŒ‡ä»¤å°±æ˜¯ç”¨æ¥æŒ‡å®šå‚æ•°ï¼Œå®é™…æ‰§è¡Œæ—¶å˜æˆäº†ï¼š ENTRYPOINT \u003cCMD\u003e åº”ç”¨åœºæ™¯ä¸€ï¼šè®©é•œåƒæƒ³å‘½ä»¤ä¸€æ ·ä½¿ç”¨ åº”ç”¨åœºæ™¯äºŒï¼šåº”ç”¨è¿è¡Œå‰çš„å‡†å¤‡å·¥ä½œ ENV è®¾ç½®ç¯å¢ƒå˜é‡ å°±æ˜¯ç”¨æ¥è®¾ç½®ç¯å¢ƒå˜é‡çš„ æ ¼å¼ï¼š ENV \u003ckey\u003e \u003cvalue\u003e ENV \u003ckey1\u003e=\u003cvalue1\u003e \u003ckey2\u003e=\u003cvalue2\u003e... ARG æ„å»ºå‚æ•° ä¹Ÿæ˜¯ç”¨æ¥è®¾ç½®ç¯å¢ƒå˜é‡çš„ï¼Œä½†æ˜¯ä¸ENVæœ‰åŒºåˆ«ï¼šARGæ„å»ºçš„ç¯å¢ƒå˜é‡åœ¨å®¹å™¨è¿è¡Œæ—¶æ˜¯ä¸å­˜åœ¨çš„ æ ¼å¼ï¼š ARG \u003cå‚æ•°å\u003e[=\u003cé»˜è®¤å€¼\u003e] Dockerfile ä¸­çš„ ARG æŒ‡ä»¤æ˜¯å®šä¹‰å‚æ•°åç§°ï¼Œä»¥åŠå®šä¹‰å…¶é»˜è®¤å€¼ã€‚è¯¥é»˜è®¤å€¼å¯ä»¥åœ¨æ„å»ºå‘½ä»¤ docker build ä¸­ç”¨ â€“build-arg \u003cå‚æ•°å\u003e=\u003cå€¼\u003e æ¥è¦†ç›–ã€‚ ARGæŒ‡ä»¤æ˜¯æœ‰ç”Ÿæ•ˆèŒƒå›´çš„ï¼Œå¦‚æœåœ¨FROMå‰ä½¿ç”¨ï¼Œé‚£ä¹ˆå®šä¹‰çš„å‚æ•°åªèƒ½åœ¨FROMæŒ‡ä»¤ä¸­ä½¿ç”¨ï¼Œå¦‚æœè¦åœ¨FROMåä¹Ÿä½¿ç”¨ï¼Œé‚£ä¹ˆå°±è¦åœ¨FROMåä¹Ÿè¦å†ä½¿ç”¨ARGæŒ‡ä»¤ï¼Œåˆ†åˆ«æŒ‡å®šå˜é‡ VOLUME å®šä¹‰åŒ¿åå· VOLUMEæŒ‡ä»¤å¯ä»¥æŒ‡å®šæŸäº›ç›®å½•ä¸ºåŒ¿åå·ï¼Œå°†åŠ¨æ€æ•°æ®å­˜å‚¨åœ¨åŒ¿åå·ä¸­ï¼Œå¯ä»¥é¿å…ç”¨æˆ·å¿˜è®°æŒ‡å®šæ•°æ®å·ï¼Œä½¿å®¹å™¨æ­£å¸¸è¿è¡Œï¼Œè€Œä¸ä¼šå°†åŠ¨æ€æ•°æ®è¿‡å¤šçš„å­˜å‚¨åœ¨å®¹å™¨å­˜å‚¨å±‚ æ ¼å¼ï¼š VOLUME [\"è·¯å¾„1\",\"è·¯å¾„2\"] VOLUME \u003cè·¯å¾„\u003e EXPOSE æš´éœ²ç«¯å£ æ ¼å¼ï¼š EXPOSE \u003cç«¯å£ä¸€\u003e [\u003cç«¯å£äºŒ\u003e...] EXPOSEæŒ‡ä»¤ç”¨äºå£°æ˜ç«¯å£ï¼Œä¹Ÿåªæ˜¯ç”¨äºå£°æ˜å®¹å™¨æ‰“ç®—ä½¿ç”¨ä»€ä¹ˆç«¯å£è€Œå·²ï¼Œé•œåƒå¯åŠ¨æ—¶ä¹Ÿä¸ä¼šå› ä¸ºè¿™ä¸ªå£°æ˜å°±å¯åŠ¨è¯¥ç«¯å£æœåŠ¡ï¼Œåªæ˜¯ç”¨äºæ–¹ä¾¿é•œåƒä½¿ç”¨è€…å¯¹å®¹å™¨è¿›è¡Œç«¯å£æ˜ å°„ï¼Œå¦å¤–è¿˜å¯ä»¥åœ¨è¿è¡Œæ—¶éšæœºç«¯å£æ˜ å°„æ—¶ï¼Œå°±æ˜¯ä½¿ç”¨docker run -Pæ—¶ï¼Œå¯ä»¥éšæœºç«¯å£æ˜ å°„åˆ°EXPOSEæŒ‡å®šçš„ç«¯å£ WORKDIR æŒ‡å®šå·¥ä½œç›®å½• WORKDIRç”¨äºæŒ‡å®šå·¥ä½œç›®å½•(æˆ–è€…æˆä¸ºå½“å‰ç›®å½•),å°±æ˜¯pwdçš„å‘½ä»¤å±•ç¤ºçš„å·¥ä½œç›®å½• æ ¼å¼ï¼š WORKDIR \u003cå·¥ä½œç›®å½•\u003e å¦‚æœWORKDIRä½¿ç”¨çš„æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œé‚£ä¹ˆæ‰€åˆ‡æ¢çš„è·¯å¾„ä¸ä¹‹å‰WORKDIRæœ‰å…³ USER æŒ‡å®šç”¨æˆ· ä½¿ç”¨USERæŒ‡ä»¤æ—¶ï¼Œç¡®ä¿ç”¨æˆ·å­˜åœ¨ æ ¼å¼ï¼š USER \u003cç”¨æˆ·å\u003e[:\u003cç”¨æˆ·ç»„\u003e] HEALTHYCHECK å¥åº·æ£€æŸ¥ æ ¼å¼ï¼š HEALTHCHECK [é€‰é¡¹] CMD \u003cå‘½ä»¤\u003eï¼šè®¾ç½®æ£€æŸ¥å®¹å™¨å¥åº·çŠ¶å†µçš„å‘½ä»¤ HEALTHCHECK NONEï¼šå¦‚æœåŸºç¡€é•œåƒæœ‰å¥åº·æ£€æŸ¥æŒ‡ä»¤ï¼Œä½¿ç”¨è¿™è¡Œå¯ä»¥å±è”½æ‰å…¶å¥åº·æ£€æŸ¥æŒ‡ä»¤ ONBUILD å½“å‰é•œåƒä½œä¸ºåŸºç¡€é•œåƒæ‰§è¡Œ ONBUILDæŒ‡ä»¤æ‰€æŒ‡å®šçš„æŒ‡ä»¤åœ¨å½“å‰é•œåƒæ„å»ºæ—¶ä¸ä¼šæ‰§è¡Œï¼Œä¹‹åå½“å½“å‰é•œåƒä½œä¸ºåŸºç¡€é•œåƒæ—¶ï¼Œæ‰ä¼šæ‰§è¡Œ æ ¼å¼ï¼š ONBUILD \u003cå…¶ä»–å‘½ä»¤\u003e LABEL æ·»åŠ å…ƒæ•°æ® LABELä»¥å‡å€¼å¯¹çš„å½¢å¼ç»™é•œåƒæ·»åŠ å…ƒæ•°æ® LABEL \u003ckey\u003e=\u003cvalue\u003e \u003ckey\u003e=\u003cvalue\u003e \u003ckey\u003e=\u003cvalue\u003e ... SHELL æŒ‡ä»¤ ç”¨äºæŒ‡å®šRUN CMD ENTRYPOINTæŒ‡ä»¤çš„shell,Linux ä¸­é»˜è®¤ä¸º [\"/bin/sh\", â€œ-câ€] æ ¼å¼ï¼š SHELL [\"executable\", \"parameters\"] å‚è€ƒèµ„æ–™ï¼š è“å±±ç¬¬10èŠ‚è¯¾è¯¾ä»¶ dockeræŠ€æœ¯å…¥é—¨ä¸å®æˆ˜ dockerå…¥é—¨åˆ°å®è·µ ","date":"2023-12-24","objectID":"/docker%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93/:0:5","tags":["docker"],"title":"DockeråŸºç¡€çŸ¥è¯†æ€»ç»“","uri":"/docker%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93/"},{"categories":["å¾®æœåŠ¡"],"content":"ä½¿ç”¨grpcå’Œnet/rpcåˆ†åˆ«å†™ä¸€ä¸ªç®€å•çš„rpcæœåŠ¡","date":"2023-12-14","objectID":"/%E7%AE%80%E5%8D%95%E7%9A%84rpc%E6%9C%8D%E5%8A%A1demo/","tags":["å¾®æœåŠ¡"],"title":"ç®€å•çš„RPCæœåŠ¡demo","uri":"/%E7%AE%80%E5%8D%95%E7%9A%84rpc%E6%9C%8D%E5%8A%A1demo/"},{"categories":["å¾®æœåŠ¡"],"content":"RPC learning ","date":"2023-12-14","objectID":"/%E7%AE%80%E5%8D%95%E7%9A%84rpc%E6%9C%8D%E5%8A%A1demo/:0:0","tags":["å¾®æœåŠ¡"],"title":"ç®€å•çš„RPCæœåŠ¡demo","uri":"/%E7%AE%80%E5%8D%95%E7%9A%84rpc%E6%9C%8D%E5%8A%A1demo/"},{"categories":["å¾®æœåŠ¡"],"content":"ä¸€.grpc demo 1.ä½¿ç”¨protoæ–‡ä»¶ç”Ÿæˆgoä»£ç : \u0026ç¼–å†™protoæ–‡ä»¶ //çº¦å®šè¯­æ³• syntax = \"proto3\"; //è¿™éƒ¨åˆ†å†…å®¹æ˜¯å…³äºæœ€åç”Ÿæˆçš„goæ–‡ä»¶å­˜åœ¨å“ªä¸ªæ–‡ä»¶ç›®å½•ï¼Œ. ä»£è¡¨å½“å‰é¡¹ç›®ç›®å½•ä¸‹ï¼Œserverä»£è¡¨æœ€åç”Ÿæˆçš„æ–‡ä»¶çš„åå­— option go_package = \".;service\"; //service ç›¸å½“äºæ˜¯goçš„å‡½æ•° //service å®šä¹‰ä¸€ä¸ªæœåŠ¡ï¼Œå®¢æˆ·ç«¯å¯ä»¥ä¼ å…¥å‚æ•°ï¼Œè¿”å›æœåŠ¡ç«¯çš„å“åº” //å‘é€ä¸€ä¸ªHelloRequest è¿”å›ä¸€ä¸ªHelloResponse service SayHello { rpc SayHello(HelloRequest) returns (HelloResponse) {} } //message ç›¸å½“äºæ˜¯goçš„ç»“æ„ä½“ï¼Œ //åé¢çš„ç‰¹æ®Š\"èµ‹å€¼\",ä»£è¡¨çš„æ˜¯ä½ç½®é¡ºåº,è€Œä¸æ˜¯çœŸæ­£çš„èµ‹å€¼ message HelloRequest{ string requestName = 1; } message HelloResponse{ string responseMessage = 1; } \u0026ç”Ÿæˆgoä»£ç  (è®°å¾—åˆ‡æ¢åˆ°protoç›®å½•ä¸‹,å¹¶æ³¨æ„å‘½ä»¤ä¸­çš„ç©ºæ ¼ä»¥åŠä¸‹åˆ’çº¿ç­‰çš„ç¬¦å·) protoc --go_out=. hello.proto protoc --go-grpc_out=. hello.proto 2.protoæ–‡ä»¶ä»‹ç»ï¼š syntax:çº¦å®šè¯­æ³• option:è¿™éƒ¨åˆ†å†…å®¹æ˜¯å…³äºæœ€åç”Ÿæˆçš„goæ–‡ä»¶å­˜åœ¨å“ªä¸ªæ–‡ä»¶ç›®å½• message ï¼šä¼ è¾“çš„æ¶ˆæ¯æ ¼å¼çš„å®šä¹‰ 1.å­—æ®µè§„åˆ™ï¼š required:å¿…å¡«å­—æ®µï¼Œprotobuf2ä¸­ä½¿ç”¨ï¼Œprotobuf3ä¸­åˆ é™¤ optional:å¯é€‰å­—æ®µï¼Œprotobuf3ä¸­åˆ å»äº†requiredå’Œoptionalï¼Œé»˜è®¤optional repeateï¼šå¯é‡å¤å­—æ®µï¼Œé‡å¤çš„å€¼çš„é¡ºåºä¼šè¢«ä¿ç•™åˆ°goä¸­é‡å¤çš„ä¼šè¢«å®šä¹‰ä¸ºåˆ‡ç‰‡ 2.æ¶ˆæ¯å·ï¼š ä¹Ÿå°±æ˜¯çœ‹èµ·æ¥åƒèµ‹å€¼çš„\"æ“ä½œ\" æ¯ä¸ªå­—æ®µéƒ½å¿…é¡»è¦æœ‰çš„æ¶ˆæ¯å·[1,2^29-1]çš„æ•´æ•° 3.åµŒå¥—æ¶ˆæ¯ï¼šæ”¯æŒåµŒå¥—æ¶ˆæ¯ service:å®šä¹‰ä¸€ä¸ªrpcæœåŠ¡æ¥å£ service æœåŠ¡æ¥å£å{ rpc æœåŠ¡å‡½æ•°å(å‚æ•°) returns(è¿”å›å‚æ•°){} } 3.æœåŠ¡ç«¯ç¼–å†™ package main import ( pb \"RPClearning/hello_server/proto\" \"context\" \"errors\" \"fmt\" \"google.golang.org/grpc\" \"google.golang.org/grpc/metadata\" \"net\" ) type server struct { pb.UnimplementedSayHelloServer } // ä¸šåŠ¡ func (s *server) SayHello(ctx context.Context, req *pb.HelloRequest) (*pb.HelloResponse, error) { //è¿›è¡Œtokenæ ¡éªŒ //è·å–å…ƒæ•°æ® æ³¨ï¼šè¿”å›çš„å…ƒæ•°æ®åˆ‡ç‰‡ä¸­çš„æ‰€æœ‰keyéƒ½æ˜¯å°å†™ï¼å°å†™ï¼å°å†™ï¼ md, ok := metadata.FromIncomingContext(ctx) if !ok { return nil, errors.New(\"æœªä¼ è¾“token\") } var appID string var appKey string if v, ok := md[\"appid\"]; ok { appID = v[0] } if v, ok := md[\"appkey\"]; ok { appKey = v[0] } if appID != \"lance\" || appKey != \"123\" { return \u0026pb.HelloResponse{ResponseMessage: \"tokené”™è¯¯ \" + req.RequestName}, nil } fmt.Println(\"hello \" + req.RequestName) return \u0026pb.HelloResponse{ResponseMessage: \"hello \" + req.RequestName}, nil } func main() { //ç›‘å¬ç«¯å£ listener, _ := net.Listen(\"tcp\", \":9090\") //åˆ›å»ºä¸€ä¸ªgrpcæœåŠ¡ grpcServer := grpc.NewServer() //åœ¨grpcæœåŠ¡ç«¯ä¸­æ³¨å†Œç¼–å†™çš„æœåŠ¡ pb.RegisterSayHelloServer(grpcServer, \u0026server{}) //ä¸€å®šè¦æ˜¯å¼•ç”¨ä¼ é€’å¯¹è±¡ //å¯åŠ¨æœåŠ¡ err := grpcServer.Serve(listener) if err != nil { fmt.Printf(\"failed to serve :%v\", \u0026err) return } } 4.å®¢æˆ·ç«¯ç¼–å†™ package main import ( pb \"RPClearning/hello_server/proto\" \"context\" \"fmt\" \"google.golang.org/grpc\" \"google.golang.org/grpc/credentials/insecure\" \"log\" ) type ClientToken struct { } func (c ClientToken) GetRequestMetadata(ctx context.Context, uri ...string) (map[string]string, error) { return map[string]string{ \"appID\" : \"lance\", \"appKey\": \"123\", }, nil } func (c ClientToken) RequireTransportSecurity() bool { return false //æ˜¯å¦å¸¦å®‰å…¨éªŒè¯ } func main() { //è¿æ¥åˆ°serverç«¯,æ­¤å¤„ç¦æ­¢å®‰å…¨ä¼ è¾“ var opts []grpc.DialOption opts = append(opts, grpc.WithTransportCredentials(insecure.NewCredentials())) opts = append(opts, grpc.WithPerRPCCredentials(new(ClientToken))) conn, err := grpc.Dial(\"127.0.0.1:9090\", opts...) if err != nil { log.Fatalf(\"didn't connect :%v\", err) } defer conn.Close() //å»ºç«‹è¿æ¥ client := pb.NewSayHelloClient(conn) //æ‰§è¡Œrpcè°ƒç”¨ï¼ˆè¿™ä¸ªæ–¹æ³•åœ¨æœåŠ¡ç«¯æ¥å®ç°ï¼Œå¹¶è¿”å›ç»“æœï¼‰ response, _ := client.SayHello(context.Background(), \u0026pb.HelloRequest{RequestName: \"lance\"}) res := response.GetResponseMessage() fmt.Println(\"response:\", res) } ","date":"2023-12-14","objectID":"/%E7%AE%80%E5%8D%95%E7%9A%84rpc%E6%9C%8D%E5%8A%A1demo/:0:1","tags":["å¾®æœåŠ¡"],"title":"ç®€å•çš„RPCæœåŠ¡demo","uri":"/%E7%AE%80%E5%8D%95%E7%9A%84rpc%E6%9C%8D%E5%8A%A1demo/"},{"categories":["å¾®æœåŠ¡"],"content":"äºŒ.net/rpc demo 1.æœåŠ¡ç«¯ä»£ç ï¼š package main import ( \"net\" \"net/rpc\" ) type Server struct { } // é€šè¿‡é˜…è¯»æºç ï¼Œå‘ç°methodæ˜¯æœ‰è¦æ±‚çš„ ï¼š // Method needs three ins: receiver, *args, *reply. // First arg need not be a pointer. // Second arg must be a pointer. // Reply type must be exported. // Method needs one out. // The return type of the method must be error func (s Server) SayHello(args []string, what *string) error { *what = args[0] + \" say hello to \" + args[1] return nil } func main() { //æ–°å»ºä¸€ä¸ªå¯¹è±¡å®ä¾‹ s := new(Server) //æ³¨å†ŒæœåŠ¡ err := rpc.Register(s) if err != nil { panic(err) } //ç›‘å¬ listener, errs := net.Listen(\"tcp\", \":9090\") if errs != nil { panic(err) } //å¯åŠ¨æœåŠ¡ for { conn, err := listener.Accept() if err != nil { continue } go rpc.ServeConn(conn) } } 2.å®¢æˆ·ç«¯ä»£ç  package main import ( \"fmt\" \"net/rpc\" ) var Names = []string{\"lance\", \"longxu\"} var What string func main() { client, err := rpc.Dial(\"tcp\", \"localhost:9090\") must(err) defer client.Close() //err = client.Call(\"Server.SayHello\", Names, \u0026What) //if err != nil { // panic(err) //} // ï¼ï¼ï¼ï¼æ³¨æ„è¿™é‡ŒserviceMethodä¸åº”è¯¥åªä¼ å…¥method è€Œæ˜¯åº”è¯¥ä¼ å…¥object.Methodè¿™æ ·çš„æ ¼å¼,å¦åˆ™ä¼šæŠ¥ service/method request ill-formedçš„é”™è¯¯ call := \u003c-client.Go(\"Server.SayHello\", Names, \u0026What, make(chan *rpc.Call, 1)).Done fmt.Println(call.ServiceMethod) fmt.Println(call.Reply) fmt.Println(call.Args) fmt.Println(call.Error) if call.Error != nil { panic(err) } fmt.Println(\"rpcè°ƒç”¨æˆåŠŸï¼Œå–å¾—å€¼ï¼š\", What) } func must(err error) { if err != nil { panic(err) } } ","date":"2023-12-14","objectID":"/%E7%AE%80%E5%8D%95%E7%9A%84rpc%E6%9C%8D%E5%8A%A1demo/:0:2","tags":["å¾®æœåŠ¡"],"title":"ç®€å•çš„RPCæœåŠ¡demo","uri":"/%E7%AE%80%E5%8D%95%E7%9A%84rpc%E6%9C%8D%E5%8A%A1demo/"},{"categories":["å·¥å…·"],"content":"å¦‚ä½•ä½¿ç”¨viperé…ç½®é¡¹ç›®","date":"2023-12-01","objectID":"/viper/","tags":["å·¥å…·"],"title":"viper:Goè¯­è¨€é…ç½®ç®¡ç†ç¥å™¨","uri":"/viper/"},{"categories":["å·¥å…·"],"content":"viper:Goè¯­è¨€é…ç½®ç®¡ç†ç¥å™¨ å‚è€ƒæ–‡æ¡£ï¼šviper æ–‡æ¡£æ±‰åŒ–ï¼šææ–‡å‘¨çš„åšå®¢ ä¸€.å®‰è£… go get github.com/spf13/viper äºŒ.æ”¯æŒç‰¹æ€§ 1.è®¾ç½®é»˜è®¤å€¼ 2.ä»json ,toml,yaml,hcl,envfile,java propertiesæ ¼å¼çš„é…ç½®æ–‡ä»¶è¯»å–é…ç½®ä¿¡æ¯ 3.å®æ—¶ç›‘æ§å’Œé‡æ–°è¯»å–é…ç½®æ–‡ä»¶(optional) 4.ä»ç¯å¢ƒå˜é‡ä¸­è¯»å– 5.ä»è¿œç¨‹é…ç½®ç³»ç»Ÿï¼ˆetcdå’ŒConsulï¼‰è¯»å–å¹¶ç›‘æ§é…ç½®å˜åŒ– 6.ä»å‘½ä»¤è¡Œå‚æ•°è¯»å–é…ç½® 7.ä»bufferè¯»å–é…ç½® 8.æ˜¾ç¤ºé…ç½®å€¼ ä¸‰.viperå¯ä»¥åšä»€ä¹ˆï¼Ÿ 1.æŸ¥æ‰¾ï¼ŒåŠ è½½å’Œååºåˆ—åŒ–json,toml,yaml,hcl,ini,envfile,java propertiesæ ¼å¼çš„é…ç½®æ–‡ä»¶ã€‚ 2.æä¾›ä¸€ç§æœºåˆ¶ä¸ºä½ ä¸åŒé…ç½®é€‰é¡¹æŒ‡å®šé€‰é¡¹çš„å€¼ã€‚ 3.æä¾›ä¸€ç§æœºåˆ¶æ¥é€šè¿‡å‘½ä»¤è¡Œå‚æ•°è¦†ç›–æŒ‡å®šé€‰é¡¹çš„å€¼ã€‚ 4.æä¾›åˆ«åç³»ç»Ÿï¼Œä¸€è¾¹åœ¨ä¸ç ´åç°æœ‰ä»£ç çš„æƒ…å†µä¸‹è½»æ¾é‡å‘½åå‚æ•°ã€‚ 5.å½“ç”¨æˆ·æä¾›ä¸é»˜è®¤å€¼ç›¸åŒçš„å‘½ä»¤è¡Œæˆ–é…ç½®æ–‡ä»¶æ—¶ï¼Œå¯ä»¥å¾ˆå®¹æ˜“çš„åˆ†è¾¨å‡ºå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ã€‚ å››.viperä¼˜å…ˆçº§ (ä»é«˜åˆ°ä½) 1.æ˜¾å¼è°ƒç”¨Setè®¾ç½®å€¼ 2.å‘½ä»¤è¡Œå‚æ•°ï¼ˆflagï¼‰ 3.ç¯å¢ƒå˜é‡ 4.é…ç½®æ–‡ä»¶ 5.key/valueå­˜å‚¨ 6.é»˜è®¤å€¼ äº”.å°†å€¼å­˜å…¥viper 1.è®¾ç½®é»˜è®¤å€¼ï¼š viper.SetDefault(\"name\", \"lance\")//è®¾ç½®nameé»˜è®¤å€¼ä¸ºlance value := viper.GetString(\"name\") //è·å–é»˜è®¤å€¼ fmt.Println(value)//æ‰“å°lance 2.è¯»å–é…ç½®æ–‡ä»¶ï¼š viperå¯ä»¥æœç´¢å¤šä¸ªè·¯å¾„ï¼Œä½†æ˜¯ç›®å‰å•ä¸ªviperå®ä¾‹åªæ”¯æŒå•ä¸ªé…ç½®æ–‡ä»¶ã€‚ viperä¸é»˜è®¤ä»»ä½•é…ç½®æœç´¢è·¯å¾„ï¼Œå°†é»˜è®¤å†³ç­–ç•™ç»™åº”ç”¨ç¨‹åºã€‚ æœç´¢é…ç½®æ–‡ä»¶ï¼š ä¸éœ€è¦ä»»ä½•ç‰¹å®šçš„è·¯å¾„ï¼Œä½†æ˜¯è‡³å°‘åº”è¯¥æä¾›ä¸€ä¸ªé…ç½®æ–‡ä»¶é¢„æœŸå‡ºç°çš„è·¯å¾„ é…ç½®æ–‡ä»¶æœ‰æ‰©å±•åï¼š viper.SetConfigFile(\"./config.yaml\")//é€šè¿‡æŒ‡å®šé…ç½®æ–‡ä»¶è·¯å¾„ é…ç½®æ–‡ä»¶æ— æ‰©å±•å viper.SetConfigName(\"config1\")//é…ç½®æ–‡ä»¶åç§°ï¼ˆæœ¬èº«å°±æ²¡æœ‰æ‰©å±•åï¼‰ viper.SetConfigType(\"yaml\")//æ²¡æœ‰æ‰©å±•åï¼Œå¿…é¡»é…ç½®æ­¤é¡¹ viper.AddConfigPath(\".\")//æœç´¢é…ç½®æ–‡ä»¶æ‰€åœ¨çš„è·¯å¾„ viper.AddConfigPath(\"./...\")//å¤šæ¬¡è°ƒç”¨ä»¥æ·»åŠ å¤šä¸ªæœç´¢è·¯å¾„ ... è¯»å–é…ç½®æ–‡ä»¶ï¼š //è¯´æ˜ï¼š è¿™é‡Œæ‰§è¡Œviper.ReadInConfig()ä¹‹åï¼Œviperæ‰èƒ½ç¡®å®šåˆ°åº•ç”¨å“ªä¸ªæ–‡ä»¶ err := viper.ReadInConfig() // æŸ¥æ‰¾å¹¶è¯»å–é…ç½®æ–‡ä»¶ if err != nil { if err == err.(viper.ConfigFileNotFoundError) { panic(err) // å¤„ç†æ‰¾ä¸åˆ°é…ç½®æ–‡ä»¶çš„é”™è¯¯ } panic(err) } å¦‚æœæœ‰å¤šä¸ªåŒåé…ç½®æ–‡ä»¶ï¼Œæ‰©å±•åä¼˜å…ˆçº§ï¼š json\u003etoml\u003eyaml\u003eyml\u003eproperties(javaä¸­çš„é…ç½®æ–‡ä»¶å)\u003eprops(javaä¸­çš„é…ç½®æ–‡ä»¶å) 3.å†™å…¥é…ç½®æ–‡ä»¶ï¼š å·²ç»é¢„å®šä¹‰è·¯å¾„ï¼š //è‹¥æ²¡æœ‰é¢„å®šä¹‰è·¯å¾„ä¼šæŠ¥é”™ viper.WriteConfig()//è¦†ç›–å­˜åœ¨çš„é…ç½®æ–‡ä»¶ viper.SafeWriteConfig()//ä¸ä¼šè¦†ç›–å­˜åœ¨çš„é…ç½®æ–‡ä»¶ï¼Œé…ç½®æ–‡ä»¶ä¸å­˜åœ¨å°±åˆ›å»ºé…ç½®æ–‡ä»¶ ç»™å®šè·¯å¾„ï¼š viper.WriteConfigAs()//è¦†ç›–å½“å‰é…ç½®æ–‡ä»¶ viper.SafeWriteConfigAs()//ä¸ä¼šè¦†ç›–å­˜åœ¨çš„é…ç½®æ–‡ä»¶ï¼Œé…ç½®æ–‡ä»¶ä¸å­˜åœ¨å°±åˆ›å»ºé…ç½®æ–‡ä»¶ 4.ç›‘æ§å¹¶é‡æ–°è¯»å–é…ç½®æ–‡ä»¶ï¼š viperæ”¯æŒåœ¨è¿è¡Œæ—¶å®æ—¶è¯»å–é…ç½®æ–‡ä»¶çš„åŠŸèƒ½ //ä¹‹å‰å·²ç»æ·»åŠ å¥½äº†é…ç½®è·¯å¾„ viper.WatchConfig() viper.OnConfigChange(func(e fsnotify.Event) { // é…ç½®æ–‡ä»¶å‘ç”Ÿå˜æ›´ä¹‹åä¼šè°ƒç”¨çš„å›è°ƒå‡½æ•° fmt.Println(\"Config file changed:\", e.Name) }) 5.ä»io.Readerè¯»å–é…ç½®ï¼š å®ç°è‡ªå·±æ‰€éœ€çš„é…ç½®åŸå¹¶å°†å…¶æä¾›ç»™viper viper.SetConfigFile(\"./config.yaml\") config := []byte(` hello : world ping: pong `) err := viper.ReadConfig(bytes.NewBuffer(config)) if err != nil { panic(err) } //åªæ˜¯è¯»å–ï¼Œæœªå†™å…¥é…ç½®æ–‡ä»¶ value := viper.Get(\"ping\") fmt.Println(value) 6.è¦†ç›–è®¾ç½®ï¼š è¿™äº›å¯èƒ½æ¥è‡ªå‘½ä»¤è¡Œæ ‡å¿—ï¼Œä¹Ÿå¯èƒ½æ¥è‡ªä½ è‡ªå·±çš„åº”ç”¨ç¨‹åºé€»è¾‘ viper.Set(\"Verbose\", true) viper.Set(\"LogFile\", LogFile) 7.æ³¨å†Œå’Œä½¿ç”¨åˆ«åï¼š åˆ«åå…è®¸å¤šä¸ªé”®å¼•ç”¨å•ä¸ªå€¼ viper.RegisterAlias(\"loud\", \"Verbose\") // æ³¨å†Œåˆ«åï¼ˆæ­¤å¤„loudå’ŒVerboseå»ºç«‹äº†åˆ«åï¼‰ viper.Set(\"verbose\", true) // ç»“æœä¸ä¸‹ä¸€è¡Œç›¸åŒ viper.Set(\"loud\", true) // ç»“æœä¸å‰ä¸€è¡Œç›¸åŒ viper.GetBool(\"loud\") // true viper.GetBool(\"verbose\") // true 8.ä½¿ç”¨ç¯å¢ƒå˜é‡ 9.ä½¿ç”¨Flags 10.è¿œç¨‹Key/Valueå­˜å‚¨æ”¯æŒ 11.ç›‘æ§etcdä¸­çš„æ›´æ”¹-æœªåŠ å¯† (ä»¥åæœ‰å¾…è¡¥å……) å…­.ä»viperè·å–å€¼ å¸¸ç”¨æ ¹æ®å€¼ç±»å‹è·å–å€¼çš„æ–¹æ³•ï¼š Get(key string) : interface{} GetBool(key string) : bool GetFloat64(key string) : float64 GetInt(key string) : int GetIntSlice(key string) : []int GetString(key string) : string GetStringMap(key string) : map[string]interface{} GetStringMapString(key string) : map[string]string GetStringSlice(key string) : []string GetTime(key string) : time.Time GetDuration(key string) : time.Duration IsSet(key string) : bool //åˆ¤æ–­é”®æ˜¯å¦å­˜åœ¨ AllSettings() : map[string]interface{} 1.è®¿é—®åµŒå¥—çš„é”® è®¿é—®å™¨æ–¹æ³•ä¹Ÿæ¥å—æ·±åº¦åµŒå¥—é”®çš„æ ¼å¼åŒ–è·¯å¾„ã€‚ä¾‹å¦‚ï¼Œå¦‚æœåŠ è½½ä¸‹é¢çš„JSONæ–‡ä»¶ï¼š { \"host\": { \"address\": \"localhost\", \"port\": 5799 }, \"datastore\": { \"metric\": { \"host\": \"127.0.0.1\", \"port\": 3099 }, \"warehouse\": { \"host\": \"198.0.0.1\", \"port\": 2112 } } } viperé€šè¿‡ä¼ å…¥ . åˆ†éš”çš„è·¯å¾„æ¥è®¿é—®åµŒå¥—å­—æ®µï¼š //å·²ç»è¯»å–äº†é…ç½®æ–‡ä»¶ viper.GetString(\"datastore.metric.host\")//è¿”å›127.0.0.1 å¦‚ä½•å­˜åœ¨é”®ä¸­åŒ…å« \" . â€œçš„æƒ…å†µï¼Œå¹¶ä¸”ä¸åˆ†éš”çš„é”®è·¯å¾„åŒ¹é…ï¼Œé‚£ä¹ˆè¿”å›è¿™ä¸ªé”®çš„å€¼ï¼š { \"datastore.metric.host\": \"0.0.0.0\", \"host\": { \"address\": \"localhost\", \"port\": 5799 }, \"datastore\": { \"metric\": { \"host\": \"127.0.0.1\", \"port\": 3099 }, \"warehouse\": { \"host\": \"198.0.0.1\", \"port\": 2112 } } } viper.GetString(\"datastore.metric.host\") // è¿”å› \"0.0.0.0\" ï¼ˆæ–‡æ¡£åŸæ–‡ï¼‰ï¼š è¿™éµå®ˆä¸Šé¢å»ºç«‹çš„ä¼˜å…ˆè§„åˆ™ï¼›æœç´¢è·¯å¾„å°†éå†å…¶ä½™é…ç½®æ³¨å†Œè¡¨ï¼Œç›´åˆ°æ‰¾åˆ°ä¸ºæ­¢ã€‚(è¯‘æ³¨ï¼šå› ä¸ºViperæ”¯æŒä»å¤šç§é…ç½®æ¥æºï¼Œä¾‹å¦‚ç£ç›˜ä¸Šçš„é…ç½®æ–‡ä»¶\u003eå‘½ä»¤è¡Œæ ‡å¿—ä½\u003eç¯å¢ƒå˜é‡\u003eè¿œç¨‹Key/Valueå­˜å‚¨\u003eé»˜è®¤å€¼ï¼Œæˆ‘ä»¬åœ¨æŸ¥æ‰¾ä¸€ä¸ªé…ç½®çš„æ—¶å€™å¦‚æœåœ¨å½“å‰é…ç½®æºä¸­æ²¡æ‰¾åˆ°ï¼Œå°±ä¼šç»§ç»­ä»åç»­çš„é…ç½®æºæŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°ä¸ºæ­¢ã€‚) ä¾‹å¦‚ï¼Œåœ¨ç»™å®šæ­¤é…ç½®æ–‡ä»¶çš„æƒ…å†µä¸‹ï¼Œdatastore.metric.hostå’Œdatastore.metric.portå‡å·²å®šä¹‰ï¼ˆå¹¶ä¸”å¯ä»¥è¢«è¦†ç›–ï¼‰ã€‚å¦‚æœå¦å¤–åœ¨é»˜è®¤å€¼ä¸­å®šä¹‰äº†datastore.metric.protocolï¼ŒViperä¹Ÿä¼šæ‰¾åˆ°å®ƒã€‚ ç„¶è€Œï¼Œå¦‚æœdatastore.metricè¢«ç›´æ¥èµ‹å€¼è¦†ç›–ï¼ˆè¢«flagï¼Œç¯å¢ƒå˜é‡ï¼Œset()æ–¹æ³•ç­‰ç­‰â€¦ï¼‰ï¼Œé‚£ä¹ˆdatastore.metricçš„æ‰€æœ‰å­é”®éƒ½å°†å˜ä¸ºæœªå®šä¹‰çŠ¶æ€ï¼Œå®ƒä»¬è¢«é«˜ä¼˜å…ˆçº§é…ç½®çº§åˆ«â€œé®è”½â€ï¼ˆshadowedï¼‰äº† 2.æå–å­æ ‘ è¿˜æ˜¯ä»¥ä¸Šé¢çš„é…ç½®æ–‡ä»¶ä¸ºä¾‹ï¼š { \"host\": { \"address\": \"localhost\", \"port\": 5799 }, \"datastore\": { \"metric\": { \"host\": \"127.0.0.1\", \"port\": 3","date":"2023-12-01","objectID":"/viper/:0:0","tags":["å·¥å…·"],"title":"viper:Goè¯­è¨€é…ç½®ç®¡ç†ç¥å™¨","uri":"/viper/"},{"categories":["Go"],"content":"goé¢å¯¹å¯¹è±¡çš„ç®€çŸ­æ€»ç»“","date":"2023-12-01","objectID":"/go%E7%9A%84%E9%9D%A2%E5%AF%B9%E5%AF%B9%E8%B1%A1/","tags":["Goç‰¹æ€§"],"title":"Goçš„é¢å¯¹å¯¹è±¡","uri":"/go%E7%9A%84%E9%9D%A2%E5%AF%B9%E5%AF%B9%E8%B1%A1/"},{"categories":["Go"],"content":"Goçš„é¢å¯¹å¯¹è±¡ Goæ˜¯é¢å‘å¯¹è±¡çš„è¯­è¨€å—ï¼Ÿ Yes and No. 1.Goå…è®¸OOçš„ç¼–ç¨‹é£æ ¼ 2.Goçš„structå¯ä»¥çœ‹ä½œå…¶ä»–è¯­è¨€çš„Class 3.Goç¼ºä¹å…¶ä»–è¯­è¨€çš„ç»§æ‰¿ç»“æ„ 4.Goçš„æ¥å£ä¸å…¶ä»–è¯­è¨€æœ‰å¾ˆå¤§å·®å¼‚ Goçš„ â€œç±»â€ 1.å…¶ä»–è¯­è¨€ä¸­ï¼Œå¾€å¾€ç”¨classè¡¨ç¤ºä¸€ç±»æ•°æ® 2.calssçš„æ¯ä¸ªå®ä¾‹ç§°ä½œâ€œå¯¹è±¡â€ 3.Goä¸­ç”¨structè¡¨ç¤ºä¸€ç±»æ•°æ® 4.structæ¯ä¸ªå®ä¾‹å¹¶ä¸æ˜¯â€œå¯¹è±¡â€ï¼Œè€Œæ˜¯æ­¤ç±»å‹çš„â€œå€¼â€ 5.structä¹Ÿå¯ä»¥å®šä¹‰æ–¹æ³• Goçš„ç»§æ‰¿ 1.Goå¹¶æ²¡æœ‰ç»§æ‰¿å…³ç³» 2.æ‰€è°“Goçš„ç»§æ‰¿åªæ˜¯ç»„åˆ 3.ç»„åˆä¸­çš„åŒ¿åå­—æ®µï¼Œé€šè¿‡è¯­æ³•ç³–è¾¾æˆäº†ç±»ä¼¼ç»§æ‰¿çš„æ•ˆæœ Goçš„æ¥å£ 1.æ¥å£å¯ä»¥å®šä¹‰Goä¸­çš„ä¸€ç»„è¡Œä¸ºç›¸ä¼¼çš„struct 2.structå¹¶ä¸æ˜¾å¼å®ç°æ¥å£ï¼Œè€Œæ˜¯éšå¼å®ç° å°ç»“ 1.Goæ²¡æœ‰å¯¹è±¡ï¼Œæ²¡æœ‰ç±»ï¼Œæ²¡æœ‰ç»§æ‰¿ 2.Goé€šè¿‡ç»„åˆåŒ¿åå­—æ®µæ¥è¾¾åˆ°ç±»ä¼¼ç»§æ‰¿çš„æ•ˆæœ 3.é€šè¿‡ä»¥ä¸Šæ‰‹æ®µå»æ‰äº†é¢å¯¹å¯¹è±¡ä¸­å¤æ‚è€Œå†—ä½™çš„éƒ¨åˆ† 4.ä¿ç•™äº†åŸºæœ¬çš„é¢å¯¹å¯¹è±¡ç‰¹æ€§ ","date":"2023-12-01","objectID":"/go%E7%9A%84%E9%9D%A2%E5%AF%B9%E5%AF%B9%E8%B1%A1/:0:1","tags":["Goç‰¹æ€§"],"title":"Goçš„é¢å¯¹å¯¹è±¡","uri":"/go%E7%9A%84%E9%9D%A2%E5%AF%B9%E5%AF%B9%E8%B1%A1/"},{"categories":["æ•°æ®ç»“æ„ä¸ç®—æ³•"],"content":"å­¦ä¹ ç¬”è®°","date":"2023-12-01","objectID":"/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E4%B8%80/","tags":["æ•°æ®ç»“æ„ä¸ç®—æ³•"],"title":"å­¦ä¹ ç¬”è®°ï¼šæ•°æ®ç»“æ„ä¸ç®—æ³•(ä¸€)","uri":"/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E4%B8%80/"},{"categories":["æ•°æ®ç»“æ„ä¸ç®—æ³•"],"content":"æ•°æ®ç»“æ„ä¸ç®—æ³•å…¥é—¨(ä¸€) ","date":"2023-12-01","objectID":"/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E4%B8%80/:0:0","tags":["æ•°æ®ç»“æ„ä¸ç®—æ³•"],"title":"å­¦ä¹ ç¬”è®°ï¼šæ•°æ®ç»“æ„ä¸ç®—æ³•(ä¸€)","uri":"/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E4%B8%80/"},{"categories":["æ•°æ®ç»“æ„ä¸ç®—æ³•"],"content":"ç¬¬ä¸€ç« ï¼šæ•°æ®ç»“æ„ç»ªè®º 1.åŸºæœ¬æ¦‚å¿µä¸æœ¯è¯­ æ•°æ®ï¼šæ˜¯æè¿°å®¢è§‚äº‹ç‰©çš„ç¬¦å·ï¼Œæ˜¯è®¡ç®—æœºä¸­å¯ä»¥æ“ä½œçš„å¯¹è±¡ï¼Œæ˜¯èƒ½è¢«è®¡ç®—æœºè¯†åˆ«ï¼Œå¹¶è¾“å…¥ç»™è®¡ç®—æœºå¤„ç†çš„ç¬¦å·é›†åˆã€‚ æ•°æ®å…ƒç´ ï¼šæ˜¯ç»„æˆæ•°æ®çš„ï¼Œæœ‰ä¸€å®šæ„ä¹‰çš„åŸºæœ¬å•ä½ï¼Œåœ¨è®¡ç®—æœºä¸­é€šå¸¸ä½œä¸ºæ•´ä½“å¤„ç†ï¼Œä¹Ÿè¢«ç§°ä¸ºè®°å½•ã€‚ æ•°æ®é¡¹ï¼šä¸€ä¸ªæ•°æ®å…ƒç´ å¯ä»¥ç”±è‹¥å¹²ä¸ªæ•°æ®é¡¹ç»„æˆï¼ˆæ˜¯æ•°æ®ä¸å¯åˆ†å‰²çš„æœ€å°å•ä½ï¼‰ æ•°æ®å¯¹è±¡ï¼šæ˜¯æ€§è´¨ç›¸åŒçš„æ•°æ®å…ƒç´ çš„é›†åˆï¼Œæ˜¯æ•°æ®çš„å­é›† æ•°æ®ç»“æ„ï¼šæ˜¯ç›¸äº’ä¹‹é—´å­˜åœ¨çš„ä¸€ç§æˆ–å¤šç§ç‰¹å®šå…³ç³»çš„ç‰¹å®šå…³ç³»çš„æ•°æ®å…ƒç´ çš„é›†åˆ 2.é€»è¾‘ç»“æ„å’Œç‰©ç†ç»“æ„ a.é€»è¾‘ç»“æ„ï¼šæ˜¯æŒ‡æ•°æ®å¯¹è±¡ä¸­æ•°æ®å…ƒç´ ä¹‹é—´çš„ç›¸äº’å…³ç³» é›†åˆç»“æ„ï¼šé›†åˆç»“æ„ä¸­çš„æ•°æ®å…ƒç´ é™¤äº†å±äºåŒä¸€ä¸ªé›†åˆå¤–ï¼Œå®ƒä»¬ä¹‹é—´æ²¡æœ‰å…¶ä»–å…³ç³» çº¿æ€§ç»“æ„ï¼šçº¿æ€§ç»“æ„ä¸­çš„æ•°æ®å…ƒç´ ä¹‹é—´æ˜¯ä¸€å¯¹ä¸€çš„å…³ç³» æ ‘å½¢ç»“æ„ï¼šæ ‘å½¢ç»“æ„ä¸­çš„æ•°æ®å…ƒç´ ä¹‹é—´æ˜¯ä¸€å¯¹å¤šçš„å±‚æ¬¡å…³ç³» å›¾å½¢ç»“æ„ï¼šå›¾å½¢ç»“æ„ä¸­çš„æ•°æ®å…ƒç´ ä¹‹é—´æ˜¯å¤šå¯¹å¤šçš„å…³ç³» b.ç‰©ç†ç»“æ„ï¼šæ˜¯æŒ‡æ•°æ®çš„é€»è¾‘ç»“æ„åœ¨è®¡ç®—æœºä¸­çš„å­˜å‚¨å½¢å¼ é¡ºåºå­˜å‚¨ç»“æ„ï¼šæ˜¯æŠŠæ•°æ®å…ƒç´ å­˜æ”¾åœ¨åœ°å€è¿ç»­çš„å­˜å‚¨å•å…ƒé‡Œï¼Œå…¶æ•°æ®é—´çš„é€»è¾‘å…³ç³»å’Œç‰©ç†å…³ç³»æ˜¯ä¸€è‡´çš„ é“¾å¼å­˜å‚¨ç»“æ„ï¼šæ˜¯æŠŠæ•°æ®å…ƒç´ å­˜æ”¾åœ¨ä»»æ„çš„å­˜å‚¨å•å…ƒé‡Œï¼Œè¿™ç»„å­˜å‚¨å•å…ƒå¯ä»¥æ˜¯è¿ç»­çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸è¿ç»­çš„ c.æ€»ç»“ï¼š é€»è¾‘ç»“æ„æ˜¯é¢å‘é—®é¢˜çš„ï¼Œç‰©ç†ç»“æ„å°±æ˜¯é¢å‘è®¡ç®—æœºçš„ï¼Œå…¶åŸºæœ¬çš„ç›®æ ‡å°±æ˜¯å°†æ•°æ®åŠå…¶é€»è¾‘å…³ç³»å­˜å‚¨åˆ°è®¡ç®—æœºçš„å†…å­˜ä¸­ 3.æŠ½è±¡æ•°æ®ç±»å‹ a.æ•°æ®ç±»å‹ï¼šæ˜¯æŒ‡ä¸€ç»„æ€§è´¨ç›¸åŒçš„å€¼çš„é›†åˆåŠå®šä¹‰åœ¨æ­¤é›†åˆä¸Šçš„ä¸€äº›æ“ä½œçš„æ€»ç§° åŸå­ç±»å‹ï¼šæ˜¯ä¸å¯ä»¥å†åˆ†è§£çš„åŸºæœ¬ç±»å‹ï¼ŒåŒ…æ‹¬æ•´å‹ï¼Œå®å‹ï¼Œå­—ç¬¦å‹ç­‰ ç»“æ„ç±»å‹ï¼šç”±è‹¥å¹²ä¸ªç±»å‹ç»„åˆè€Œæˆï¼Œæ˜¯å¯ä»¥å†åˆ†è§£çš„ã€‚ä¾‹å¦‚ï¼Œæ•´å‹æ•°ç»„æ˜¯ç”±è‹¥å¹²æ•´å‹æ•°æ®ç»„æˆçš„ b.æŠ½è±¡æ•°æ®ç±»å‹ï¼šæ˜¯æŒ‡ä¸€ä¸ªæ•°æ®æ¨¡å‹åŠå®šä¹‰åœ¨è¯¥æ¨¡å‹ä¸Šçš„ä¸€ç»„æ“ä½œï¼ˆä½“ç°äº†ç¨‹åºè®¾è®¡ä¸­çš„é—®é¢˜åˆ†è§£ï¼ŒæŠ½è±¡å’Œä¿¡æ¯éšè—çš„ç‰¹æ€§ï¼‰ ","date":"2023-12-01","objectID":"/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E4%B8%80/:0:1","tags":["æ•°æ®ç»“æ„ä¸ç®—æ³•"],"title":"å­¦ä¹ ç¬”è®°ï¼šæ•°æ®ç»“æ„ä¸ç®—æ³•(ä¸€)","uri":"/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E4%B8%80/"},{"categories":["æ•°æ®ç»“æ„ä¸ç®—æ³•"],"content":"ç¬¬äºŒç« ï¼šç®—æ³• 1.å®šä¹‰ ç®—æ³•æ˜¯è§£å†³ç‰¹å®šé—®é¢˜æ±‚è§£æ­¥éª¤çš„æè¿°ï¼Œåœ¨è®¡ç®—æœºä¸­è¡¨ç°ä¸ºæŒ‡ä»¤çš„æœ‰é™åºåˆ—ï¼Œå¹¶ä¸”æ¯æ¡æŒ‡ä»¤è¡¨ç¤ºä¸€ä¸ªæˆ–å¤šä¸ªæ“ä½œ 2.ç®—æ³•çš„ç‰¹æ€§ a.è¾“å…¥è¾“å‡ºï¼šç®—æ³•å…·æœ‰é›¶ä¸ªæˆ–å¤šä¸ªè¾“å…¥ï¼Œè‡³å°‘æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªè¾“å‡º b.æœ‰ç©·æ€§ï¼šæŒ‡ç®—æ³•åœ¨æ‰§è¡Œæœ‰é™çš„æ­¥éª¤ä¹‹åï¼Œè‡ªåŠ¨ç»“æŸè€Œä¸ä¼šå‡ºç°æ— é™å¾ªç¯ï¼Œå¹¶ä¸”æ¯ä¸€ä¸ªæ­¥éª¤åœ¨å¯æ¥å—çš„æ—¶é—´å†…å®Œæˆ c.ç¡®å®šæ€§ï¼šç®—æ³•çš„æ¯ä¸€æ­¥éª¤éƒ½å…·æœ‰ç¡®å®šçš„å«ä¹‰ï¼Œä¸ä¼šå‡ºç°äºŒä¹‰æ€§ d.å¯è¡Œæ€§ï¼šç®—æ³•çš„æ¯ä¸€æ­¥éª¤éƒ½å…·æœ‰ç¡®å®šçš„å«ä¹‰ï¼Œä¸ä¼šå‡ºç°äºŒä¹‰æ€§ 3.ç®—æ³•è®¾è®¡çš„è¦æ±‚ a.æ­£ç¡®æ€§ b.å¯è¯»æ€§ c.å¥å£®æ€§ï¼šå½“è¾“å…¥æ•°æ®ä¸åˆæ³•æ—¶ï¼Œç®—æ³•ä¹Ÿèƒ½åšå‡ºç›¸å…³å¤„ç†ï¼Œè€Œä¸æ˜¯äº§ç”Ÿå¼‚å¸¸æˆ–è«åå…¶å¦™çš„ç»“æœ d.æ—¶é—´æ•ˆç‡é«˜å’Œå­˜å‚¨é‡ä½ 4.ç®—æ³•æ•ˆç‡çš„åº¦é‡æ–¹æ³• a.äº‹åç»Ÿè®¡æ–¹æ³• b.äº‹å‰åˆ†æä¼°ç®—æ–¹æ³• ä¸€ä¸ªç¨‹åºçš„è¿è¡Œæ—¶é—´ï¼Œä¾èµ–äºç®—æ³•çš„å¥½åå’Œé—®é¢˜çš„è¾“å…¥è§„æ¨¡ï¼Œé—®é¢˜è¾“å…¥è§„æ¨¡æ˜¯æŒ‡è¾“å…¥é‡çš„å¤šå°‘ æœ€ç»ˆï¼Œåœ¨åˆ†æç¨‹åºçš„è¿è¡Œæ—¶é—´æ—¶ï¼Œæœ€é‡è¦çš„æ˜¯æŠŠç¨‹åºçœ‹ä½œæ˜¯ç‹¬ç«‹äºç¨‹åºè®¾è®¡è¯­è¨€çš„ç®—æ³•æˆ–ä¸€ç³»åˆ—æ­¥éª¤ 5.å‡½æ•°çš„æ¸è¿‘å¢é•¿ ç»™å®šä¸¤ä¸ªå‡½æ•°f(n)å’Œg(n)ï¼Œé‚£ä¹ˆå­˜åœ¨ä¸€ä¸ªæ•´æ•°Nï¼Œä½¿å¾—å¯¹äºæ‰€æœ‰çš„n\u003eNï¼Œf(n)æ€»æ˜¯æ¯”g(n)å¤§ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¯´f(n)çš„å¢é•¿æ¸è¿‘å¿«äºg(n) 6.ç®—æ³•æ—¶é—´å¤æ‚åº¦ ç®—æ³•çš„æ—¶é—´å¤æ‚ åº¦ï¼Œä¹Ÿå°±æ˜¯ç®—æ³•çš„æ—¶é—´é‡åº¦ï¼Œè®°ä½œï¼šT(n)=O(f(n))ã€‚å®ƒè¡¨ç¤ºéšé—®é¢˜è§„æ¨¡ nçš„å¢å¤§ï¼Œç®—æ³•æ‰§è¡Œæ—¶é—´çš„å¢é•¿ç‡å’Œf(n)çš„å¢é•¿ç‡ç›¸åŒï¼Œç§°ä½œç®—æ³•çš„æ¸ è¿‘æ—¶é—´å¤æ‚åº¦ï¼Œç®€ç§°ä¸ºæ—¶é—´å¤æ‚åº¦ã€‚å…¶ä¸­f(n)æ˜¯é—®é¢˜è§„æ¨¡nçš„æŸä¸ªå‡½ æ•°ã€‚ æ¨å¯¼å¤§Oé˜¶ï¼š 1ï¼ç”¨å¸¸æ•°1å–ä»£è¿è¡Œæ—¶é—´ä¸­çš„æ‰€æœ‰åŠ æ³•å¸¸æ•°ã€‚ 2ï¼åœ¨ä¿®æ”¹åçš„è¿è¡Œæ¬¡æ•°å‡½æ•°ä¸­ï¼Œåªä¿ç•™æœ€é«˜é˜¶é¡¹ã€‚ 3ï¼å¦‚æœæœ€é«˜é˜¶é¡¹å­˜åœ¨ä¸”ä¸æ˜¯1ï¼Œåˆ™å»é™¤ä¸è¿™ä¸ªé¡¹ç›¸ä¹˜çš„å¸¸æ•°ã€‚ 7.ç®—æ³•ç©ºé—´å¤æ‚åº¦ ç®—æ³•çš„ç©ºé—´å¤æ‚åº¦é€šè¿‡è®¡ç®—ç®—æ³•æ‰€éœ€çš„å­˜å‚¨ç©ºé—´å®ç°ï¼Œç®—æ³•ç©ºé—´å¤æ‚ åº¦çš„è®¡ç®—å…¬å¼è®°ä½œï¼šS(n)=O(f(n))ï¼Œå…¶ä¸­ï¼Œnä¸ºé—®é¢˜çš„è§„æ¨¡ï¼Œf(n)ä¸ºè¯­å¥ å…³äºnæ‰€å å­˜å‚¨ç©ºé—´çš„å‡½æ•°ã€‚ ","date":"2023-12-01","objectID":"/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E4%B8%80/:0:2","tags":["æ•°æ®ç»“æ„ä¸ç®—æ³•"],"title":"å­¦ä¹ ç¬”è®°ï¼šæ•°æ®ç»“æ„ä¸ç®—æ³•(ä¸€)","uri":"/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E4%B8%80/"},{"categories":["æ•°æ®ç»“æ„ä¸ç®—æ³•"],"content":"ç¬¬ä¸‰ç« ï¼šçº¿æ€§è¡¨ 1.çº¿æ€§è¡¨çš„å®šä¹‰ï¼š Listï¼šé›¶ä¸ªæˆ–è€…å¤šä¸ªæ•°æ®å…ƒç´ çš„æœ‰é™åºåˆ— 2.çº¿æ€§è¡¨çš„æŠ½è±¡æ•°æ®ç±»å‹å®šä¹‰ï¼š ADT çº¿æ€§è¡¨(List) Data çº¿æ€§è¡¨çš„æ•°æ®å¯¹è±¡é›†åˆä¸º{a1, a2, ......, an}ï¼Œæ¯ä¸ªå…ƒç´ çš„ç±»å‹å‡ä¸º DataTypeã€‚ å…¶ä¸­ï¼Œé™¤ç¬¬ä¸€ä¸ªå…ƒç´ a1å¤–ï¼Œæ¯ä¸€ä¸ªå…ƒç´ æœ‰ä¸”åªæœ‰ä¸€ä¸ªç›´æ¥å‰é©±å…ƒç´ ï¼Œé™¤äº†æœ€åä¸€ä¸ªå…ƒç´ anå¤–ï¼Œæ¯ä¸€ä¸ªå…ƒç´ æœ‰ä¸”åªæœ‰ä¸€ä¸ªç›´æ¥åç»§å…ƒç´ ã€‚ æ•°æ®å…ƒç´ ä¹‹é—´çš„å…³ç³»æ˜¯ä¸€å¯¹ä¸€çš„å…³ç³»ã€‚ Operation InitList(*L): åˆå§‹åŒ–æ“ä½œï¼Œå»ºç«‹ä¸€ä¸ªç©ºçš„çº¿æ€§è¡¨Lã€‚ ListEmpty(L): è‹¥çº¿æ€§è¡¨ä¸ºç©ºï¼Œè¿”å›trueï¼Œå¦åˆ™è¿”å›falseã€‚ ClearList(*L): å°†çº¿æ€§è¡¨æ¸…ç©ºã€‚ GetElem(L, i, *e): å°†çº¿æ€§è¡¨Lä¸­çš„ç¬¬iä¸ªä½ç½®å…ƒç´ å€¼è¿”å›ç»™eã€‚ LocateElem(L, e): åœ¨çº¿æ€§è¡¨Lä¸­æŸ¥æ‰¾ä¸ç»™å®šå€¼eç›¸ç­‰çš„å…ƒç´ ï¼Œå¦‚æœæŸ¥æ‰¾æˆåŠŸï¼Œè¿”å›è¯¥å…ƒç´ åœ¨è¡¨ä¸­åºå·è¡¨ç¤ºæˆåŠŸï¼› 3.çº¿æ€§è¡¨çš„é¡ºåºå­˜å‚¨ç»“æ„ï¼š é¡ºåºå­˜å‚¨ç»“æ„ï¼šä½¿ç”¨ä¸€æ®µåœ°å€è¿ç»­çš„å­˜å‚¨å•å…ƒä¾æ¬¡å­˜å‚¨çº¿æ€§è¡¨çš„æ•°æ®å…ƒç´  ä¸‰ä¸ªå±æ€§ï¼š 1.å­˜å‚¨ç©ºé—´çš„èµ·å§‹ä½ç½®ï¼šæ•°ç»„dataï¼Œå®ƒçš„å­˜å‚¨ä½ç½®å°±æ˜¯å­˜å‚¨ç©ºé—´çš„ å­˜å‚¨ä½ç½®ã€‚ 2.çº¿æ€§è¡¨çš„æœ€å¤§å­˜å‚¨å®¹é‡ï¼šæ•°ç»„é•¿åº¦MaxSizeã€‚ 3.çº¿æ€§è¡¨çš„å½“å‰é•¿åº¦ï¼šlengthã€‚ #define MAXSIZE 20 typedef int ElemType;//å…ƒç´ ç±»å‹ï¼Œçœ‹å…·ä½“æƒ…å†µå®šï¼Œè¿™é‡Œä½¿ç”¨int typedef struct{ ElemType data[MAXSIZE]; int length; }SqList; è·å–å…ƒç´ ï¼š //ä¸€äº›çŠ¶æ€ç  #define OK 1 #define ERROR 0 #define TRUE 1 #define FALSE 0 typedef int Status;//å‡½æ•°ç±»å‹ï¼Œå…¶å€¼ä¸ºå‡½æ•°è¿”å›çš„çŠ¶æ€ç ï¼Œå¦‚OKç­‰ //åˆå§‹æ¡ä»¶ï¼š1\u003c= i \u003c= ListLength(L) Status GetElem(SqList L,int i ,ElemType *e){ if (L.length == 0 ||i \u003c1 || i \u003e L.length ){ return ERROR; } *e = L.data[i - 1]; return OK; } æ’å…¥å…ƒç´ ï¼š æ€è·¯ï¼š å¦‚æœæ’å…¥ä½ç½®ä¸åˆç†ï¼ŒæŠ›å‡ºå¼‚å¸¸ï¼› å¦‚æœçº¿æ€§è¡¨é•¿åº¦å¤§äºç­‰äºæ•°ç»„é•¿åº¦ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸æˆ–åŠ¨æ€å¢åŠ å®¹é‡ï¼› ä»æœ€åä¸€ä¸ªå…ƒç´ å¼€å§‹å‘å‰éå†åˆ°ç¬¬iä¸ªä½ç½®ï¼Œåˆ†åˆ«å°†å®ƒä»¬éƒ½å‘åç§» åŠ¨ä¸€ä¸ªä½ç½®ï¼› å°†è¦æ’å…¥å…ƒç´ å¡«å…¥ä½ç½®iå¤„ï¼Œè¡¨é•¿åŠ 1ã€‚ //åˆå§‹æ¡ä»¶ï¼š1\u003c= i \u003c= ListLength(L) //æ“ä½œç»“æœï¼šLä¸­ç¬¬iä¸ªå…ƒç´ å‰æ’å…¥æ–°å…ƒç´ ï¼ŒLçš„é•¿åº¦+1 Status ListInsert(SqList *L,int i ,ElemType e){ int k ; //åˆ¤æ–­é¡ºåºçº¿æ€§è¡¨æ˜¯å¦å·²ç»æ»¡äº† if (L-\u003elength == MAXSIZE){ return ERROR; } //åˆ¤æ–­iæ˜¯å¦åœ¨èŒƒå›´å†… if (i \u003c1 || i \u003e L-\u003elength+1){ return ERROR; } if (i \u003c L-\u003elength){ //å°†è¦æ’å…¥å…ƒç´ åé¢çš„å…ƒç´ å…¨éƒ¨å‘åç§»åŠ¨ä¸€ä½ for (k = L-\u003elength-1;k\u003e=i -1;k--){ L-\u003edata[k+1] = L-\u003edata[k]; } } L -\u003edata[i] = e; L-\u003elength ++; return OK; } åˆ é™¤æ“ä½œï¼š æ€è·¯ï¼š å¦‚æœåˆ é™¤ä½ç½®ä¸åˆç†ï¼ŒæŠ›å‡ºå¼‚å¸¸ï¼› å–å‡ºåˆ é™¤å…ƒç´ ï¼› ä»åˆ é™¤å…ƒç´ ä½ç½®å¼€å§‹éå†åˆ°æœ€åä¸€ä¸ªå…ƒç´ ä½ç½®ï¼Œåˆ†åˆ«å°†å®ƒä»¬éƒ½å‘ å‰ç§»åŠ¨ä¸€ä¸ªä½ç½®ï¼› è¡¨é•¿å‡1ã€‚ //åˆå§‹æ¡ä»¶ï¼š1\u003c= i \u003c= ListLength(L) //æ“ä½œç»“æœï¼šåˆ é™¤Lä¸­çš„ç¬¬iä¸ªå…ƒç´ ï¼Œå¹¶ç”¨eè¿”å›å€¼ï¼ŒLçš„é•¿åº¦-1 Status ListDelete(SqList *L,int i , ElemType *e){ int k ; if (L-\u003elength == 0){ return ERROR; } if (i \u003c1 || i \u003eL-\u003elength ){ return ERROR; } *e = L-\u003edata[i-1]; if (i \u003cL-\u003elength){ //å°†åˆ é™¤çš„ä½ç½®åç»­å…ƒç´ å‘å‰æ¨ç§» for (k= i;k\u003cL-\u003elength;k++){ L-\u003edata[k-1] = L-\u003edata[k]; } } L-\u003elength --; return OK; } 4.çº¿æ€§è¡¨çš„é“¾å¼å­˜å‚¨ç»“æ„ é“¾å¼å­˜å‚¨ç»“æ„ï¼šç”¨ä¸€ç»„ä»»æ„çš„å­˜å‚¨å•å…ƒå­˜å‚¨çº¿æ€§è¡¨çš„ æ•°æ®å…ƒç´ ï¼Œè¿™ç»„å­˜å‚¨å•å…ƒå¯ä»¥æ˜¯è¿ç»­çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸è¿ç»­çš„ã€‚è¿™å°±æ„ å‘³ç€ï¼Œè¿™äº›æ•°æ®å…ƒç´ å¯ä»¥å­˜åœ¨å†…å­˜æœªè¢«å ç”¨çš„ä»»æ„ä½ç½® æ•°æ®åŸŸï¼šå­˜å‚¨æ•°æ®å…ƒç´ ä¿¡æ¯çš„åŸŸ æŒ‡é’ˆåŸŸï¼šå­˜å‚¨ç›´æ¥åç»­ä½ç½®çš„åŸŸï¼Œå­˜å‚¨çš„ä¿¡æ¯ç§°ä¸ºæŒ‡é’ˆæˆ–é“¾ è¿™ä¸¤éƒ¨åˆ†ç»„æˆæ•°æ®å…ƒç´ a(i)çš„å­˜å‚¨æ˜ åƒï¼Œç§°ä¸ºç»“ç‚¹(Node) å¤´æŒ‡é’ˆï¼šé“¾è¡¨ä¸­ç¬¬ä¸€ä¸ªç»“ç‚¹çš„å­˜å‚¨ä½ç½® ä¸ºæ–¹ä¾¿æ“ä½œï¼Œä¼šåœ¨å•é“¾è¡¨çš„ç¬¬ä¸€ä¸ªç»“ç‚¹å‰é™„è®¾ä¸€ä¸ªç»“ç‚¹ï¼Œç§°ä¸ºå¤´ç»“ç‚¹ å¤´ç»“ç‚¹çš„æ•°æ®åŸŸå¯ä»¥ä¸å­˜ä»»ä½•æ•°æ®ï¼Œä¹Ÿå¯ä»¥å­˜å‚¨çº¿æ€§è¡¨çš„é•¿åº¦ç­‰é™„åŠ ä¿¡æ¯ å¤´ç»“ç‚¹çš„æŒ‡é’ˆåŸŸå­˜å‚¨æŒ‡å‘ç¬¬ä¸€ä¸ªç»“ç‚¹çš„æŒ‡é’ˆ æˆ‘ä»¬è§„å®šé“¾è¡¨æœ€åä¸€ä¸ªç»“ç‚¹æŒ‡é’ˆä¸ºâ€œç©ºâ€ï¼ˆNULLæˆ–^ï¼‰ å¤´æŒ‡é’ˆä¸å¤´ç»“ç‚¹çš„åŒºåˆ«ï¼š å¤´æŒ‡é’ˆï¼š 1.å¤´æŒ‡é’ˆæ˜¯æŒ‡å‘é“¾è¡¨ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆï¼Œè‹¥é“¾è¡¨æœ‰å¤´ç»“ç‚¹ï¼Œåˆ™æ˜¯æŒ‡å‘å¤´ç»“ç‚¹çš„æŒ‡é’ˆ 2.å¤´æŒ‡é’ˆå…·æœ‰æ ‡è¯†ä½œç”¨ï¼Œæ‰€ä»¥å¸¸ç”¨å¤´æŒ‡é’ˆå† ä»¥é“¾è¡¨çš„åå­— 3.æ— è®ºé“¾è¡¨æ˜¯å¦ä¸ºç©ºï¼Œå¤´æŒ‡é’ˆå‡ä¸ä¸ºç©ºã€‚å¤´æŒ‡é’ˆæ˜¯é“¾è¡¨çš„å¿…è¦å…ƒç´  å¤´ç»“ç‚¹ï¼š 1.å¤´ç»“ç‚¹æ˜¯ä¸ºäº†æ“ä½œçš„ç»Ÿä¸€å’Œæ–¹ä¾¿è€Œè®¾ç«‹ï¼Œæ”¾åœ¨ç¬¬ä¸€ä¸ªå…ƒç´ ä¹‹å‰ï¼Œå…¶æ•°æ®åŸŸä¸€èˆ¬æ— æ„ä¹‰ã€‚ 2.æœ‰äº†å¤´èŠ‚ç‚¹ï¼Œå¯¹åœ¨ç¬¬ä¸€å…ƒç´ ç»“ç‚¹å‰æ’å…¥ç»“ç‚¹å’Œåˆ é™¤ç¬¬ä¸€ç»“ç‚¹ï¼Œå…¶æ“ä½œä¸å…¶ä»–ç»“ç‚¹çš„æ“ä½œå°±ç»Ÿä¸€äº† 3.å¤´ç»“ç‚¹ä¸ä¸€å®šæ˜¯é“¾è¡¨å¿…é¡»å…ƒç´  //å•é“¾è¡¨çš„é“¾å¼å­˜å‚¨ç»“æ„ typedef struct Node{ ElemType data; struct Node *next; }Node; typedef struct Node *LinkList; è·å–å…ƒç´ ï¼š è·å–ç¬¬iä¸ªå…ƒç´ çš„æ€è·¯ï¼š 1.å£°æ˜ä¸€ä¸ªæŒ‡é’ˆpæŒ‡å‘é“¾è¡¨ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œåˆå§‹åŒ–jä¸º1 2.å½“j\u003ci æ—¶ï¼Œå°±éå†é“¾è¡¨ï¼Œè®©pçš„æŒ‡é’ˆå‘åç§»åŠ¨ï¼Œä¸æ–­æŒ‡å‘ä¸‹ä¸€ç»“ç‚¹ï¼Œlç´¯åŠ 1 3.è‹¥åˆ°é“¾è¡¨æœ«å°¾Pä¸ºç©ºï¼Œåˆ™è¯´æ˜ç¬¬iä¸ªå…ƒç´ ä¸å­˜åœ¨ 4.è‹¥æŸ¥æ‰¾æˆåŠŸï¼Œè¿”å›ç»“ç‚¹pçš„æ•°æ® //åˆå§‹æ¡ä»¶ï¼š1\u003c= i \u003c= ListLength(L) //æ“ä½œç»“æœï¼šæŸ¥Lä¸­çš„ç¬¬iä¸ªå…ƒç´ ï¼Œå¹¶ç”¨eè¿”å›å€¼ Status GetElem(LinkList L,int i , ElemType *e){ int j =1;//jä¸ºè®¡æ•°å™¨ LinkList p; p = L-\u003enext; while(p\u0026\u0026j\u003ci){ p = p-\u003enext; ++j; } if (!p || j\u003ei){ return ERROR; } *e =p-\u003edata; return OK; } å…ƒç´ çš„æ’å…¥ä¸åˆ é™¤ï¼š 1.æ’å…¥ æ ¸å¿ƒæ­¥éª¤ï¼š s-\u003enext = p-\u003enext ; p-\u003enext = s; å…·ä½“å®ç°ï¼š //åˆå§‹æ¡ä»¶ï¼š1\u003c= i \u003c= ListLength(L) //æ“ä½œç»“æœï¼šåœ¨Lä¸­çš„ç¬¬iä¸ªå…ƒç´ å‰æ’å…¥æ–°çš„æ•°æ®å…ƒç´ eï¼ŒLé•¿åº¦+1 Status ListInsert(LinkList *L,int i ,ElemType e){ int j =1 ; LinkList p,s; p = *L; //æŸ¥æ‰¾ç¬¬i-1ä¸ªå…ƒç´  while(p\u0026\u0026j \u003c1){ p= p-\u003enext; ++j; } if (!p||j \u003ei){ return ERROR; } //ç”Ÿæˆæ–°ç»“ç‚¹(c æ ‡å‡†å‡½æ•°) s = (LinkList)malloc(sizeof(Node)); s-\u003edata= e; //å°†pçš„åç»­ç»“ç‚¹èµ‹å€¼ç»™sçš„åç»­ç»“ç‚¹ s-\u003enext = p-\u003enext; p-\u003enext = s; return OK; } 2.åˆ é™¤ å®é™…ä¸Šå°±æ˜¯ä¸€æ­¥ï¼š p-\u003enext = p-\u003enext-\u003enext; å…·ä½“å®ç°ï¼š /* åˆå§‹æ¡ä»¶ï¼šé¡ºåºçº¿æ€§è¡¨Lå·²å­˜åœ¨ï¼Œ1â‰¤iâ‰¤ ListLength(L) */ /* æ“ä½œç»“æœï¼šåˆ é™¤Lçš„ç¬¬iä¸ªç»“ç‚¹ï¼Œå¹¶ç”¨eè¿”å›å…¶ å€¼ï¼ŒLçš„é•¿åº¦å‡1 */ Status ListDelete(LinkList *L,int i ,ElemType *e){ int j = 1; LinkList p,q; p = *L; while(p-\u003enext \u0026\u0026j \u003ci){ p = p-\u003enext; ++j; } if (!p-\u003enext || j \u003ei){ return ERROR; } q = p-\u003enext; p-\u003enext = q-\u003enext; *e = q-\u003edata; //ç³»ç»Ÿå›æ”¶è¯¥ç»“ç‚¹ï¼Œé‡Šæ”¾å†…å­˜ free(q); return OK; } å•é“¾è¡¨çš„æ•´è¡¨åˆ›å»º 1.å¤´æ’æ³•ï¼š æ€è·¯ï¼š 1.å£°æ˜ä¸€ä¸ªæŒ‡é’ˆpå’Œè®¡æ•°å™¨å˜é‡iï¼› 2.åˆå§‹åŒ–ä¸€ä¸ªç©ºé“¾è¡¨Lï¼› 3.è®©Lçš„å¤´ç»“ç‚¹çš„æŒ‡é’ˆæŒ‡å‘NULLï¼Œå³å»ºç«‹ä¸€ä¸ªå¸¦å¤´ç»“ç‚¹çš„å•é“¾è¡¨ 4.å¾ªç¯ï¼š a.ç”Ÿæˆä¸€æ–°ç»“ç‚¹èµ‹å€¼ç»™pï¼› â€‹ b.éšæœºç”Ÿæˆä¸€ä¸ªæ•°å­—èµ‹å€¼ç»™pçš„æ•°æ®åŸŸp-\u003edata; â€‹ c.å°†pæ’å…¥åˆ°å¤´ç»“ç‚¹ä¸å‰ä¸€æ–°èŠ‚ç‚¹ä¹‹é—´ã€‚ å®ç°ï¼š /* éšæœºäº§ç”Ÿnä¸ªå…ƒç´ çš„å€¼ï¼Œå»ºç«‹å¸¦è¡¨å¤´ç»“ç‚¹çš„å•é“¾ çº¿æ€§è¡¨Lï¼ˆå¤´æ’æ³•ï¼‰ */ void CreateListHead(LinkList *L,int n ){ LinkList p; int i ; //åˆå§‹åŒ–éšæœºæ•°ç§å­ srand(time(0)); *L = (LinkList)malloc(sizeof(Node)); (*L)-\u003enext = NULL; for (i = 0;i\u003cn;i++){ //ç”Ÿæˆ","date":"2023-12-01","objectID":"/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E4%B8%80/:0:3","tags":["æ•°æ®ç»“æ„ä¸ç®—æ³•"],"title":"å­¦ä¹ ç¬”è®°ï¼šæ•°æ®ç»“æ„ä¸ç®—æ³•(ä¸€)","uri":"/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E4%B8%80/"},{"categories":["Go"],"content":"å¯¹åŸºæœ¬æ•°æ®ç±»å‹çš„æºç åˆ†æï¼Œçª¥æ¢å…¶åº•å±‚å®ç°","date":"2023-12-01","objectID":"/go%E7%9A%84%E9%83%A8%E5%88%86%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0/","tags":["goåº•å±‚å®ç°"],"title":"Goçš„éƒ¨åˆ†åŸºæœ¬æ•°æ®ç±»å‹çš„åº•å±‚å®ç°","uri":"/go%E7%9A%84%E9%83%A8%E5%88%86%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0/"},{"categories":["Go"],"content":"éƒ¨åˆ†åŸºæœ¬æ•°æ®ç±»å‹çš„åº•å±‚å®ç° åŸºæœ¬ç±»å‹çš„å­—èŠ‚æ•° 1.intå¤§å°æ ¹æ®ç³»ç»Ÿå­—é•¿ 2.æŒ‡é’ˆçš„å¤§å°ä¹Ÿæ˜¯ç³»ç»Ÿå­—é•¿ ","date":"2023-12-01","objectID":"/go%E7%9A%84%E9%83%A8%E5%88%86%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0/:0:0","tags":["goåº•å±‚å®ç°"],"title":"Goçš„éƒ¨åˆ†åŸºæœ¬æ•°æ®ç±»å‹çš„åº•å±‚å®ç°","uri":"/go%E7%9A%84%E9%83%A8%E5%88%86%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0/"},{"categories":["Go"],"content":"ä¸€.ç©ºç»“æ„ä½“ 1.ç©ºç»“æ„ä½“çš„åœ°å€å‡ç›¸åŒï¼ˆzerobaseï¼‰ï¼ˆä¸è¢«åŒ…å«åœ¨å…¶ä»–ç»“æ„ä½“ä¸­ï¼‰ 2.ç©ºç»“æ„ä½“ä¸»è¦æ˜¯ä¸ºäº†èŠ‚çº¦å†…å­˜ï¼Œå†…å­˜å ç”¨ä¸º0 â€‹ a.ç»“åˆmapï¼šåªæƒ³è¦keyä¸è¦valueæ—¶ï¼Œå¯ä»¥å°†valueç±»å‹è®¾ç½®ä¸ºç©ºç»“æ„ä½“ï¼Œå®ç°hashset â€‹ b.ç»“åˆchannelï¼šåªæƒ³è®©channelå‘ä¸€ä¸ªä¿¡å·ï¼Œè€Œä¸æƒ³æºå¸¦ä»»ä½•ä¿¡æ¯ï¼Œå¯ä»¥å‘ä¸€ä¸ªç©ºç»“æ„ä½“ï¼Œå½“ä½œçº¯ä¿¡å· ","date":"2023-12-01","objectID":"/go%E7%9A%84%E9%83%A8%E5%88%86%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0/:0:1","tags":["goåº•å±‚å®ç°"],"title":"Goçš„éƒ¨åˆ†åŸºæœ¬æ•°æ®ç±»å‹çš„åº•å±‚å®ç°","uri":"/go%E7%9A%84%E9%83%A8%E5%88%86%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0/"},{"categories":["Go"],"content":"äºŒ.å­—ç¬¦ä¸² runtimeåŒ…å¯¹stringåº•å±‚å®ç°ï¼š type stringStruct struct { str unsafe.Pointer //æŒ‡å‘åº•å±‚å­—èŠ‚æ•°ç»„çš„æŒ‡é’ˆ len int //å­—èŠ‚é•¿åº¦ } â€‹ reflectåŒ…ä¸‹çš„StringHeaderå¯¹stringç›¸ä¼¼åº•å±‚å®ç°ï¼ˆå·²è¢«å¼ƒç”¨ï¼‰ type StringHeader struct { Data uintptr Len int } 1.å­—ç¬¦ä¸²æœ¬è´¨æ˜¯ä¸ªç»“æ„ä½“ 2.DataæŒ‡é’ˆæŒ‡å‘åº•å±‚çš„Byteæ•°ç»„ 3.lenè¡¨ç¤ºByteæ•°ç»„é•¿åº¦ï¼Œè€Œä¸æ˜¯å­—ç¬¦é•¿åº¦ å­—ç¬¦ä¸²ç‰¹ç‚¹ 1.å­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªä¸å¯æ”¹å˜çš„å­—èŠ‚åºåˆ—ï¼Œä¸å¯ä¿®æ”¹ 2.å­—ç¬¦ä¸²æ”¯æŒåˆ‡ç‰‡æ“ä½œï¼Œä¸åŒä½ç½®çš„åˆ‡ç‰‡åº•å±‚è®¿é—®çš„æ˜¯åŒä¸€å—å†…å­˜æ•°æ® 3.ç”±äºåªè¯»çš„ç‰¹æ€§ï¼Œç›¸åŒå­—ç¬¦ä¸²é¢å€¼å¸¸é‡é€šå¸¸å¯¹åº”åŒä¸€ä¸ªå­—ç¬¦ä¸²å¸¸é‡ å­—ç¬¦ä¸²çš„è®¿é—® 1.å¯¹å­—ç¬¦ä¸²ä½¿ç”¨lenæ–¹æ³•å¾—åˆ°çš„æ˜¯å­—èŠ‚æ•°è€Œä¸æ˜¯å­—ç¬¦æ•° 2.å¯¹å­—ç¬¦ä¸²ç›´æ¥ä½¿ç”¨ä¸‹æ ‡è®¿é—®ï¼Œå¾—åˆ°çš„æ˜¯å­—èŠ‚ 3.å­—ç¬¦ä¸²è¢«for rangeéå†æ—¶ï¼Œè¢«è§£ç æˆruneç±»å‹çš„å­—ç¬¦ 4.UTF-8 ç¼–ç ç®—æ³•ä½äºruntime/utf-8.go Goä¸­çš„å­—ç¬¦ç¼–ç  1.æ‰€æœ‰å­—ç¬¦ä½¿ç”¨Unicodeå­—ç¬¦é›† 2.ä½¿ç”¨UTF-8ç¼–ç  Unicode 1.ä¸€ç§ç»Ÿä¸€çš„å­—ç¬¦é›† 2.å›Šæ‹¬äº†159ç§æ–‡å­—çš„144679ä¸ªå­—ç¬¦ 3.14ä¸‡ä¸ªå­—ç¬¦è‡³å°‘éœ€è¦3ä¸ªå­—èŠ‚è¡¨ç¤º 4.è‹±æ–‡å­—æ¯å‡æ’åœ¨å‰128ä¸ª UTF-8 1.Unicodeçš„ä¸€ç§å˜é•¿æ ¼å¼ 2.128ä¸ªUS-ASCIIå­—ç¬¦åªéœ€è¦ä¸€ä¸ªå­—èŠ‚ç¼–ç  3.è¥¿æ–¹å¸¸ç”¨å­—ç¬¦éœ€è¦ä¸¤ä¸ªå­—èŠ‚ 4.å…¶ä»–å­—ç¬¦éœ€è¦3ä¸ªå­—èŠ‚ï¼Œæå°‘éœ€è¦4ä¸ªå­—èŠ‚ ","date":"2023-12-01","objectID":"/go%E7%9A%84%E9%83%A8%E5%88%86%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0/:0:2","tags":["goåº•å±‚å®ç°"],"title":"Goçš„éƒ¨åˆ†åŸºæœ¬æ•°æ®ç±»å‹çš„åº•å±‚å®ç°","uri":"/go%E7%9A%84%E9%83%A8%E5%88%86%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0/"},{"categories":["Go"],"content":"å››.åˆ‡ç‰‡ åˆ‡ç‰‡çš„æœ¬è´¨æ˜¯ä¸€ä¸ªç»“æ„ä½“ runtimeåŒ…å¯¹sliceçš„åº•å±‚å®ç°ï¼š type slice struct { array unsafe.Pointer //æŒ‡å‘åº•å±‚æ•°ç»„ len int //åˆ‡ç‰‡å¼•ç”¨çš„åº•å±‚æ•°ç»„çš„é‚£éƒ¨åˆ†çš„é•¿åº¦ cap int //åº•å±‚æ•°ç»„çš„é•¿åº¦å°±æ˜¯åˆ‡ç‰‡çš„å®¹é‡ } åˆ‡ç‰‡çš„åˆ›å»º 1.æ ¹æ®æ•°ç»„åˆ›å»ºï¼ˆä½¿ç”¨ä¸‹æ ‡ï¼‰ 2.å­—é¢é‡ï¼šç¼–è¯‘æ—¶æ’å…¥åˆ›å»ºæ•°ç»„çš„ä»£ç  ç¤ºä¾‹ï¼š goä»£ç  s := []int{3, 2, 1} æ±‡ç¼–ä»£ç ï¼ˆæˆªå–ï¼‰ 0x000e 00014 (E:/golang/GOPATH/src/GoProgram/main.go:6) LEAQ type:[3]int(SB), AX 0x0015 00021 (E:/golang/GOPATH/src/GoProgram/main.go:6) PCDATA $1, $0 0x0015 00021 (E:/golang/GOPATH/src/GoProgram/main.go:6) CALL runtime.newobject(SB) 0x001a 00026 (E:/golang/GOPATH/src/GoProgram/main.go:6) MOVQ $3, (AX) 0x0021 00033 (E:/golang/GOPATH/src/GoProgram/main.go:6) MOVQ $2, 8(AX) 0x0029 00041 (E:/golang/GOPATH/src/GoProgram/main.go:6) MOVQ $1, 16(AX) 3.makeï¼šè¿è¡Œæ—¶åˆ›å»ºæ•°ç»„ ç¤ºä¾‹ ç”¨æˆ·ä»£ç ï¼š s := make([]int) runtimeåŒ…ä¸‹çš„å¯¹makeåˆ›å»ºåˆ‡ç‰‡å®ç°ï¼š func makeslice(et *_type, len, cap int) unsafe.Pointer { mem, overflow := math.MulUintptr(et.Size_, uintptr(cap)) if overflow || mem \u003e maxAlloc || len \u003c 0 || len \u003e cap { // NOTE: Produce a 'len out of range' error instead of a // 'cap out of range' error when someone does make([]T, bignumber). // 'cap out of range' is true too, but since the cap is only being // supplied implicitly, saying len is clearer. // See golang.org/issue/4085. mem, overflow := math.MulUintptr(et.Size_, uintptr(len)) if overflow || mem \u003e maxAlloc || len \u003c 0 { panicmakeslicelen() } panicmakeslicecap() } return mallocgc(mem, et, true) } åˆ‡ç‰‡çš„è¿½åŠ  1.ä¸æ‰©å®¹æ—¶ï¼Œåªè°ƒæ•´lenï¼ˆç¼–è¯‘å™¨è´Ÿè´£ï¼‰ 2.æ‰©å®¹æ—¶ï¼Œç¼–è¯‘æ—¶è½¬ä¸ºè°ƒç”¨ runtime.growslice(),ä½¿ç”¨äºŒå€é•¿çš„åº•å±‚æ•°ç»„æ›¿ä»£åŸæ¥çš„åº•å±‚æ•°ç»„ï¼ŒåºŸå¼ƒåŸåº•å±‚æ•°ç»„ 3.æœŸæœ›å®¹é‡å¤§äºå½“å‰å®¹é‡çš„ä¸¤å€ï¼Œå°±ä¼šä½¿ç”¨æœŸæœ›å®¹é‡ 4.å¦‚æœå½“å‰åˆ‡ç‰‡çš„é•¿åº¦å°äº1024ï¼Œå°†å®¹é‡ç¿»å€ 5.å¦‚æœå½“å‰åˆ‡ç‰‡çš„é•¿åº¦å¤§äº1024ï¼Œæ¯æ¬¡å¢åŠ 25% 6.åˆ‡ç‰‡æ‰©å®¹æ—¶ï¼Œå¹¶å‘ä¸å®‰å…¨ï¼Œæ³¨æ„åˆ‡ç‰‡å¹¶å‘è¦åŠ é” ","date":"2023-12-01","objectID":"/go%E7%9A%84%E9%83%A8%E5%88%86%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0/:0:3","tags":["goåº•å±‚å®ç°"],"title":"Goçš„éƒ¨åˆ†åŸºæœ¬æ•°æ®ç±»å‹çš„åº•å±‚å®ç°","uri":"/go%E7%9A%84%E9%83%A8%E5%88%86%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0/"},{"categories":["Go"],"content":"äº”.map mapçš„åº•å±‚å®ç°æ˜¯å“ˆå¸Œè¡¨(æ•£åˆ—è¡¨)ï¼Œmapçš„æœ¬è´¨æ˜¯æŒ‡é’ˆï¼ŒæŒ‡å‘ä¸€ä¸ªhmapç»“æ„ä½“ï¼ˆA header for a Go map.ï¼‰ hmapä¸­çš„bucketså­—æ®µæŒ‡å‘bmapç»“æ„ä½“ï¼ˆ A bucket for a Go map.ï¼‰ï¼Œbucketï¼ˆå“ˆå¸Œæ¡¶ï¼‰æ˜¯mapçš„å­˜å‚¨ç»“æ„ HashMap çš„åŸºæœ¬æ–¹æ¡ˆï¼š 1.å¼€æ”¾å¯»å€æ³• 2.æ‹‰é“¾æ³• Go çš„map goçš„mapåº•å±‚ç»“æ„â€”â€“\u003eruntime.hmap: // A header for a Go map. type hmap struct { // Note: the format of the hmap is also encoded in cmd/compile/internal/reflectdata/reflect.go. // Make sure this stays in sync with the compiler's definition. count int // # live cells == size of map. Must be first (used by len() builtin) flags uint8 B uint8 // log_2 of # of buckets (can hold up to loadFactor * 2^B items) noverflow uint16 // approximate number of overflow buckets; see incrnoverflow for details hash0 uint32 // hash seed buckets unsafe.Pointer // array of 2^B Buckets. may be nil if count==0. oldbuckets unsafe.Pointer // previous bucket array of half the size, non-nil only when growing nevacuate uintptr // progress counter for evacuation (buckets less than this have been evacuated) extra *mapextra // optional fields } buckets å­—æ®µ(å“ˆå¸Œæ¡¶)æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘ä¸€ä¸ªæ•°ç»„ï¼šä¸€ä¸ªç”±å¾ˆå¤šbmapç»„æˆçš„æ•°ç»„ bmapçš„ç»“æ„â€”â€”\u003eruntime.bmap: // A bucket for a Go map. type bmap struct { // tophash generally contains the top byte of the hash value // for each key in this bucket. If tophash[0] \u003c minTopHash, // tophash[0] is a bucket evacuation state instead. tophash [bucketCnt]uint8 // Followed by bucketCnt keys and then bucketCnt elems. // NOTE: packing all the keys together and then all the elems together makes the // code a bit more complicated than alternating key/elem/key/elem/... but it allows // us to eliminate padding which would be needed for, e.g., map[int64]int8. // Followed by an overflow pointer. } bmapåŒ…å«çš„å­—æ®µï¼š 1.tophashï¼šé•¿åº¦ä¸º8çš„æ•°ç»„ï¼Œé«˜å…«ä½ï¼Œä¸ºäº†å¿«é€Ÿéå† 2.dataï¼škeyå’Œvalueï¼Œä¸€ä¸ªæ¡¶ä¸­å¯ä»¥æ”¾å…«ä¸ªé”®å€¼å¯¹ï¼Œå…«ä¸ªkeyæ”¾ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œå…«ä¸ªvalueæ”¾ä¸€ä¸ªæ•°ç»„ä¸­ 3.overflowï¼šæº¢å‡ºbucketçš„åœ°å€ï¼ˆæŒ‡å‘ä¸‹ä¸€ä¸ªbmapï¼‰ keyï¼Œvalueï¼Œoverflowéƒ½ä¸ä¼šæ˜¾ç¤ºå‡ºæ¥ï¼Œè€Œæ˜¯é€šè¿‡maptypeè®¡ç®—åç§»é‡è·å–ã€‚å› ä¸ºkeyï¼Œvalueçš„æ•°æ®ç±»å‹ä¸ç¡®å®šï¼Œåªæœ‰ç¼–è¯‘çš„æ—¶å€™æ‰ä¼šå°†å…«ä¸ªkeyå’Œå…«ä¸ªvalueæ”¾å…¥å“ˆå¸Œæ¡¶ extraå­—æ®µæŒ‡å‘mapextraç»“æ„ä½“ï¼š mapextraç»“æ„â€”â€”-\u003eruntime.mapextra: type mapextra struct { // If both key and elem do not contain pointers and are inline, then we mark bucket // type as containing no pointers. This avoids scanning such maps. // However, bmap.overflow is a pointer. In order to keep overflow buckets // alive, we store pointers to all overflow buckets in hmap.extra.overflow and hmap.extra.oldoverflow. // overflow and oldoverflow are only used if key and elem do not contain pointers. // overflow contains overflow buckets for hmap.buckets. // oldoverflow contains overflow buckets for hmap.oldbuckets. // The indirection allows to store a pointer to the slice in hiter. overflow *[]*bmap oldoverflow *[]*bmap // nextOverflow holds a pointer to a free overflow bucket. nextOverflow *bmap } nextOverflowå­—æ®µæŒ‡å‘ä¸‹ä¸€ä¸ªå¯ç”¨çš„æº¢å‡ºæ¡¶ mapçš„åˆå§‹åŒ– 1.makeåˆ›å»ºï¼š æ±‡ç¼–ä»£ç ï¼ˆæˆªå–ï¼‰ï¼šå¯ä»¥çœ‹åˆ°åº•å±‚è°ƒç”¨äº†runtime.makemap() 0x0020 00032 (E:/golang/GOPATH/src/GoProgram/main.go:8) CALL runtime.makemap(SB) runtime.makemap func makemap(t *maptype, hint int, h *hmap) *hmap { mem, overflow := math.MulUintptr(uintptr(hint), t.Bucket.Size_) if overflow || mem \u003e maxAlloc { hint = 0 } // initialize Hmap if h == nil { h = new(hmap) } h.hash0 = fastrand() // Find the size parameter B which will hold the requested # of elements. // For hint \u003c 0 overLoadFactor returns false since hint \u003c bucketCnt. B := uint8(0) for overLoadFactor(hint, B) { B++ } h.B = B // allocate initial hash table // if B == 0, the buckets field is allocated lazily later (in mapassign) // If hint is large zeroing this memory could take a while. if h.B != 0 { var nextOverflow *bmap h.buckets, nextOverflow = makeBucketArray(t, h.B, nil) if nextOverflow != nil { h.extra = new(mapextra) h.extra.nextOverflow = nextOverflow } } return h } 2.å­—é¢é‡ â€‹ a.å…ƒç´ å°‘äº25ä¸ªæ—¶ï¼Œè½¬åŒ–ä¸ºç®€å•èµ‹å€¼ â€‹ b.å…ƒç´ å¤šäº25ä¸ªæ—¶ï¼Œè½¬åŒ–ä¸ºå¾ªç¯èµ‹å€¼ mapçš„è®¿é—®ï¼š è®¡ç®—tophash mapçš„æ‰©å®¹ 1.map æº¢å‡ºæ¡¶å¤ªå¤šæ—¶ä¼šå¯¼è‡´ä¸¥é‡çš„æ€§èƒ½ä¸‹é™ 2.runtime.mapassign()å¯èƒ½ä¼šè§¦å‘æ‰©å®¹çš„æƒ…å†µï¼š â€‹ a.è£…è½½å› å­è¶…è¿‡ 6.5ï¼ˆå¹³å‡æ¯ä¸ªæ§½6.5ä¸ªkeyï¼‰ â€‹ b.ä½¿ç”¨äº†å¤ªå¤šæº¢å‡ºæ¡¶ï¼ˆæº¢å‡ºæ¡¶è¶…è¿‡äº†æ™®é€šæ¡¶ï¼‰ mapçš„æ‰©å®¹çš„ç±»å‹ 1.ç­‰é‡æ‰©å®¹ï¼šæ•°æ®ä¸å¤šä½†æ˜¯æº¢å‡ºæ¡¶å¤ªå¤šäº† 2.ç¿»å€æ‰©å®¹ï¼šæ•°æ®å¤ªå¤šäº† æ‰©å®¹æ­¥éª¤ä¸€ï¼š 1.åˆ›å»ºä¸€ç»„æ–°æ¡¶ 2.oldbucketsæŒ‡å‘åŸæœ‰çš„æ¡¶æ•°ç»„ 3.buketsæŒ‡å‘æ–°çš„æ¡¶æ•°ç»„ 4.mapæ ‡è®°ä¸ºæ‰©å®¹çŠ¶æ€ æ‰©å®¹æ­¥éª¤äºŒï¼š 1.å°†æ‰€æœ‰çš„æ•°æ®ä»æ—§æ¡¶é©±é€åˆ°æ–°æ¡¶ 2.é‡‡ç”¨æ¸è¿›å¼é©±é€ 3.æ¯æ¬¡æ“ä½œä¸€ä¸ªæ—§æ¡¶æ—¶ï¼Œå°†æ—§æ¡¶æ•°æ®é©±é€åˆ°æ–°æ¡¶ 4.è¯»å–æ—¶ä¸è¿›è¡Œé©±é€ï¼Œåªåˆ¤æ–­è¯»å–æ–°æ¡¶è¿˜æ˜¯æ—§æ¡¶ æ‰©å®¹æ­¥éª¤ä¸‰: 1.æ‰€æœ‰","date":"2023-12-01","objectID":"/go%E7%9A%84%E9%83%A8%E5%88%86%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0/:0:4","tags":["goåº•å±‚å®ç°"],"title":"Goçš„éƒ¨åˆ†åŸºæœ¬æ•°æ®ç±»å‹çš„åº•å±‚å®ç°","uri":"/go%E7%9A%84%E9%83%A8%E5%88%86%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0/"},{"categories":["Go"],"content":"å…­.æ¥å£ Goéšå¼æ¥å£ç‰¹ç‚¹ 1.åªè¦å®ç°äº†æ¥å£çš„å…¨éƒ¨æ–¹æ³•ï¼Œå°±æ˜¯è‡ªåŠ¨å®ç°æ¥å£ 2.å¯ä»¥åœ¨ä¸ä¿®æ”¹ä»£ç çš„æƒ…å†µä¸‹æŠ½è±¡å‡ºæ–°çš„æ¥å£ ï¼ˆæ›´åŠ æ–¹ä¾¿ç³»ç»Ÿçš„æ‰©å±•å’Œé‡æ„ï¼‰ æ¥å£å€¼çš„åº•å±‚è¡¨ç¤º æ¥å£æ•°æ®ä½¿ç”¨runtime.ifaceè¡¨ç¤ºï¼š type iface struct { tab *itab //æŒ‡å‘itabç»“æ„ä½“ï¼Œitabç»“æ„ä½“ä¸­è®°å½•äº†æ¥å£ç±»å‹ä¿¡æ¯å’Œå®ç°çš„æ–¹æ³• data unsafe.Pointer //æŒ‡å‘åº•å±‚çœŸå®æ•°æ® } type itab struct { inter *interfacetype _type *_type hash uint32 // copy of _type.hash. Used for type switches. _ [4]byte fun [1]uintptr // variable sized. fun[0]==0 means _type does not implement inter. } ç±»å‹æ–­è¨€ 1.ç±»å‹æ–­è¨€æ˜¯ä¸€ä¸ªä½¿ç”¨åœ¨æ¥å£å€¼ä¸Šçš„æ“ä½œ 2.å¯ä»¥å°†æ¥å£å€¼è½¬æ¢ä¸ºå…¶ä»–ç±»å‹å€¼ï¼ˆå®ç°æˆ–è€…å…¼å®¹æ¥å£) 3.å¯ä»¥é…åˆswitchè¿›è¡Œç±»å‹åˆ¤æ–­ ç»“æ„ä½“å’Œç»“æ„ä½“æŒ‡é’ˆå®ç°æ¥å£ å¯æŸ¥çœ‹plan9æ±‡ç¼– go build -gcflags -S main.go åœ¨ä½¿ç”¨ç»“æ„ä½“å®ç°æ¥å£æ—¶ï¼Œç¼–è¯‘å™¨ä¼šä½¿ç”¨ç»“æ„ä½“æŒ‡é’ˆå†å®ç°ä¸€éæ¥å£ï¼Œæ‰€ä»¥ä½¿ç”¨ç»“æ„ä½“å’Œç»“æ„ä½“æŒ‡é’ˆè¿›è¡Œåˆå§‹åŒ–å˜é‡æ—¶ï¼Œéƒ½ä¸ä¼šæŠ¥é”™ã€‚ ä½†ä½¿ç”¨ç»“æ„ä½“æŒ‡é’ˆå®ç°æ¥å£æ—¶ï¼Œç¼–è¯‘å™¨ä¸ä¼šå†ç”¨ç»“æ„ä½“å†æ¥å®ç°æ¥å£ï¼Œæ‰€ä»¥ä½¿ç”¨ç»“æ„ä½“åˆå§‹åŒ–å˜é‡æ—¶ä¼šä¸é€šè¿‡ ç©ºæ¥å£ 1.runtime.efaceç»“æ„ä½“ type eface struct { _type *_type data unsafe.Pointer } 2.ç©ºæ¥å£åº•å±‚ä¸æ˜¯æ™®é€šæ¥å£ 3.ç©ºæ¥å£å€¼å¯ä»¥æ‰¿è½½ä»»ä½•æ•°æ® ç©ºæ¥å£çš„ç”¨é€” 1.ä½œä¸ºä»»æ„ç±»å‹çš„å‡½æ•°å…¥å‚ 2.å‡½æ•°è°ƒç”¨æ—¶ï¼Œä¼šæ–°ç”Ÿæˆä¸€ä¸ªæ–°çš„æ¥å£ï¼Œå†ä¼ å‚ ","date":"2023-12-01","objectID":"/go%E7%9A%84%E9%83%A8%E5%88%86%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0/:0:5","tags":["goåº•å±‚å®ç°"],"title":"Goçš„éƒ¨åˆ†åŸºæœ¬æ•°æ®ç±»å‹çš„åº•å±‚å®ç°","uri":"/go%E7%9A%84%E9%83%A8%E5%88%86%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0/"},{"categories":["Go"],"content":"nil,ç©ºç»“æ„ä½“ï¼Œç©ºæ¥å£åŒºåˆ« nilï¼š æ˜¯å…­ç§ç±»å‹çš„é›¶å€¼ æ¯ç§ç±»å‹çš„nilæ˜¯ä¸åŒçš„ï¼Œæ— æ³•æ¯”è¾ƒ // nil is a predeclared identifier representing the zero value for a // pointer, channel, func, interface, map, or slice type. var nil Type // Type must be a pointer, channel, func, interface, map, or slice type ç©ºç»“æ„ä½“ 1.Goä¸­çš„éå¸¸ç‰¹æ®Šçš„ç±»å‹ 2.ç©ºç»“æ„ä½“çš„å€¼ä¸æ˜¯nil 3.ç©ºç»“æ„ä½“çš„æŒ‡é’ˆä¹Ÿä¸æ˜¯nilï¼Œä½†æ˜¯éƒ½ç›¸åŒï¼ˆzerobaseï¼‰ ç©ºæ¥å£ 1.ç©ºæ¥å£ä¸ä¸€å®šæ˜¯nilæ¥å£ï¼Œï¼ˆæ•°æ®æ˜¯nilï¼Œç±»å‹ä¸æ˜¯nilï¼Œå°±ä¸æ˜¯nilæ¥å£) 2.ä¸¤ä¸ªå±æ€§éƒ½æ˜¯nilæ‰æ˜¯nilæ¥å£ ","date":"2023-12-01","objectID":"/go%E7%9A%84%E9%83%A8%E5%88%86%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0/:0:6","tags":["goåº•å±‚å®ç°"],"title":"Goçš„éƒ¨åˆ†åŸºæœ¬æ•°æ®ç±»å‹çš„åº•å±‚å®ç°","uri":"/go%E7%9A%84%E9%83%A8%E5%88%86%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0/"},{"categories":["Go"],"content":"è®°å½•å¯¹runtimeï¼Œç¼–è¯‘ï¼Œè¿è¡Œçš„å­¦ä¹ ç¬”è®°","date":"2023-12-01","objectID":"/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0go%E7%9A%84runtimego%E7%9A%84%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8Bgo%E7%9A%84%E8%BF%90%E8%A1%8C%E8%BF%87%E7%A8%8B/","tags":["Goåº•å±‚"],"title":"å­¦ä¹ ç¬”è®°ï¼šGoçš„runtimeï¼ŒGoçš„ç¼–è¯‘è¿‡ç¨‹ï¼ŒGoçš„è¿è¡Œè¿‡ç¨‹","uri":"/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0go%E7%9A%84runtimego%E7%9A%84%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8Bgo%E7%9A%84%E8%BF%90%E8%A1%8C%E8%BF%87%E7%A8%8B/"},{"categories":["Go"],"content":"ä»€ä¹ˆæ˜¯Runtimeï¼Ÿ å°±æ˜¯ç¨‹åºçš„è¿è¡Œç¯å¢ƒã€‚ ","date":"2023-12-01","objectID":"/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0go%E7%9A%84runtimego%E7%9A%84%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8Bgo%E7%9A%84%E8%BF%90%E8%A1%8C%E8%BF%87%E7%A8%8B/:0:1","tags":["Goåº•å±‚"],"title":"å­¦ä¹ ç¬”è®°ï¼šGoçš„runtimeï¼ŒGoçš„ç¼–è¯‘è¿‡ç¨‹ï¼ŒGoçš„è¿è¡Œè¿‡ç¨‹","uri":"/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0go%E7%9A%84runtimego%E7%9A%84%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8Bgo%E7%9A%84%E8%BF%90%E8%A1%8C%E8%BF%87%E7%A8%8B/"},{"categories":["Go"],"content":"Goçš„Runtimeç‰¹ç‚¹ï¼š 1.æ²¡æœ‰è™šæ‹Ÿæœºçš„æ¦‚å¿µ 2.Runtimeä½œä¸ºç¨‹åºçš„ä¸€éƒ¨åˆ†æ‰“åŒ…è¿›äºŒè¿›åˆ¶æ–‡ä»¶ 3.Runtimeéšç”¨æˆ·ç¨‹åºä¸€èµ·è¿è¡Œ 4.Runtimeä¸ç”¨æˆ·ç¨‹åºæ²¡æœ‰æ˜æ˜¾ç•Œé™ï¼Œç›´æ¥é€šè¿‡å‡½æ•°è°ƒç”¨ ","date":"2023-12-01","objectID":"/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0go%E7%9A%84runtimego%E7%9A%84%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8Bgo%E7%9A%84%E8%BF%90%E8%A1%8C%E8%BF%87%E7%A8%8B/:0:2","tags":["Goåº•å±‚"],"title":"å­¦ä¹ ç¬”è®°ï¼šGoçš„runtimeï¼ŒGoçš„ç¼–è¯‘è¿‡ç¨‹ï¼ŒGoçš„è¿è¡Œè¿‡ç¨‹","uri":"/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0go%E7%9A%84runtimego%E7%9A%84%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8Bgo%E7%9A%84%E8%BF%90%E8%A1%8C%E8%BF%87%E7%A8%8B/"},{"categories":["Go"],"content":"Goçš„Runtimeèƒ½åŠ›ï¼š 1.å†…å­˜ç®¡ç†èƒ½åŠ› 2.åƒåœ¾å›æ”¶èƒ½åŠ›ï¼ˆGCï¼‰ 3.è¶…å¼ºçš„å¹¶å‘èƒ½åŠ›(åç¨‹è°ƒåº¦) ","date":"2023-12-01","objectID":"/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0go%E7%9A%84runtimego%E7%9A%84%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8Bgo%E7%9A%84%E8%BF%90%E8%A1%8C%E8%BF%87%E7%A8%8B/:0:3","tags":["Goåº•å±‚"],"title":"å­¦ä¹ ç¬”è®°ï¼šGoçš„runtimeï¼ŒGoçš„ç¼–è¯‘è¿‡ç¨‹ï¼ŒGoçš„è¿è¡Œè¿‡ç¨‹","uri":"/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0go%E7%9A%84runtimego%E7%9A%84%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8Bgo%E7%9A%84%E8%BF%90%E8%A1%8C%E8%BF%87%E7%A8%8B/"},{"categories":["Go"],"content":"Goçš„Runtimeå…¶ä»–ç‰¹ç‚¹ï¼š 1.Runtimeæœ‰ä¸€å®šçš„å±è”½ç³»ç»Ÿè°ƒç”¨èƒ½åŠ› 2.ä¸€äº›goçš„å…³é”®å­—å…¶å®æ˜¯Runtimeä¸‹çš„å‡½æ•° ","date":"2023-12-01","objectID":"/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0go%E7%9A%84runtimego%E7%9A%84%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8Bgo%E7%9A%84%E8%BF%90%E8%A1%8C%E8%BF%87%E7%A8%8B/:0:4","tags":["Goåº•å±‚"],"title":"å­¦ä¹ ç¬”è®°ï¼šGoçš„runtimeï¼ŒGoçš„ç¼–è¯‘è¿‡ç¨‹ï¼ŒGoçš„è¿è¡Œè¿‡ç¨‹","uri":"/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0go%E7%9A%84runtimego%E7%9A%84%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8Bgo%E7%9A%84%E8%BF%90%E8%A1%8C%E8%BF%87%E7%A8%8B/"},{"categories":["Go"],"content":"æ€»ç»“ 1.Goçš„Runtimeè´Ÿè´£å†…å­˜ç®¡ç†ï¼Œåƒåœ¾å›æ”¶ï¼Œåç¨‹è°ƒåº¦ 2.Goçš„Runtimeè¢«ç¼–è¯‘ä¸ºç”¨æˆ·ç¨‹åºçš„ä¸€éƒ¨åˆ†ï¼Œä¸€èµ·è¿è¡Œ ","date":"2023-12-01","objectID":"/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0go%E7%9A%84runtimego%E7%9A%84%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8Bgo%E7%9A%84%E8%BF%90%E8%A1%8C%E8%BF%87%E7%A8%8B/:0:5","tags":["Goåº•å±‚"],"title":"å­¦ä¹ ç¬”è®°ï¼šGoçš„runtimeï¼ŒGoçš„ç¼–è¯‘è¿‡ç¨‹ï¼ŒGoçš„è¿è¡Œè¿‡ç¨‹","uri":"/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0go%E7%9A%84runtimego%E7%9A%84%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8Bgo%E7%9A%84%E8%BF%90%E8%A1%8C%E8%BF%87%E7%A8%8B/"},{"categories":["Go"],"content":"Goæ˜¯å¦‚ä½•ç¼–è¯‘çš„ï¼Ÿ ","date":"2023-12-01","objectID":"/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0go%E7%9A%84runtimego%E7%9A%84%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8Bgo%E7%9A%84%E8%BF%90%E8%A1%8C%E8%BF%87%E7%A8%8B/:1:0","tags":["Goåº•å±‚"],"title":"å­¦ä¹ ç¬”è®°ï¼šGoçš„runtimeï¼ŒGoçš„ç¼–è¯‘è¿‡ç¨‹ï¼ŒGoçš„è¿è¡Œè¿‡ç¨‹","uri":"/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0go%E7%9A%84runtimego%E7%9A%84%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8Bgo%E7%9A%84%E8%BF%90%E8%A1%8C%E8%BF%87%E7%A8%8B/"},{"categories":["Go"],"content":"ç¼–è¯‘å‘½ä»¤ï¼š go build -n ","date":"2023-12-01","objectID":"/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0go%E7%9A%84runtimego%E7%9A%84%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8Bgo%E7%9A%84%E8%BF%90%E8%A1%8C%E8%BF%87%E7%A8%8B/:1:1","tags":["Goåº•å±‚"],"title":"å­¦ä¹ ç¬”è®°ï¼šGoçš„runtimeï¼ŒGoçš„ç¼–è¯‘è¿‡ç¨‹ï¼ŒGoçš„è¿è¡Œè¿‡ç¨‹","uri":"/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0go%E7%9A%84runtimego%E7%9A%84%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8Bgo%E7%9A%84%E8%BF%90%E8%A1%8C%E8%BF%87%E7%A8%8B/"},{"categories":["Go"],"content":"ç¼–è¯‘è¿‡ç¨‹ï¼š è¯æ³•åˆ†æâ€”â€”\u003eå¥æ³•åˆ†æâ€”â€”-\u003eè¯­ä¹‰åˆ†æâ€”â€”-\u003eä¸­é—´ç ç”Ÿæˆâ€”â€”-\u003eä»£ç ä¼˜åŒ–â€”â€”-\u003eæœºå™¨ç ç”Ÿæˆâ€”â€”â€”\u003eé“¾æ¥ è¯æ³•åˆ†æï¼š 1.å°†æºä»£ç åˆ†ææˆToken 2.Tokenæ˜¯ä»£ç ä¸­çš„æœ€å°è¯­ä¹‰ç»“æ„ å¥æ³•åˆ†æï¼š 1.Tokenåºåˆ—ç»è¿‡å¤„ç†ï¼Œå˜æˆè¯­æ³•æ ‘ï¼ˆæŠ½è±¡è¯­æ³•æ ‘astï¼‰ è¯­ä¹‰åˆ†æï¼š 1.ç±»å‹æ£€æŸ¥ 2.ç±»å‹æ¨æ–­ 3.æŸ¥çœ‹ç±»å‹æ˜¯å¦åŒ¹é… 4.å‡½æ•°è°ƒç”¨å†…è” 5.é€ƒé€¸åˆ†æ ä¸­é—´ç ç”Ÿæˆï¼ˆSSAï¼‰ 1.ä¸ºäº†å¤„ç†ä¸åŒå¹³å°çš„å·®å¼‚ï¼Œå…ˆç”Ÿæˆä¸­é—´ä»£ç ï¼ˆSSAï¼‰ 2.æŸ¥çœ‹ä»ä»£ç åˆ°SSAä¸­é—´ç çš„æ•´ä¸ªè¿‡ç¨‹ $env:GOSSAFUNC=\"main\" export GOSSAFUNC=main go build ä»£ç ä¼˜åŒ–ï¼š å„ä¸ªæ­¥éª¤éƒ½ä¼šå­˜åœ¨ æœºå™¨ç ç”Ÿæˆï¼š 1.å…ˆç”Ÿæˆplan9æ±‡ç¼–ä»£ç  2.æœ€åç¼–è¯‘ä¸ºæœºå™¨ç  3.è¾“å‡ºçš„æœºå™¨ç ä¸º.aæ–‡ä»¶ 4.æŸ¥çœ‹plan9æ±‡ç¼–ä»£ç ï¼š go build -gcflags -S main.go é“¾æ¥: å°†å„ä¸ªåŒ…è¿›è¡Œé“¾æ¥ï¼ŒåŒ…æ‹¬runtime æ€»ç»“ï¼š 1.ç¼–è¯‘å‰ç«¯ï¼šè¯æ³•åˆ†æï¼Œå¥æ³•åˆ†æï¼Œè¯­ä¹‰åˆ†æ 2.ç¼–è¯‘åç«¯ï¼šä¸­é—´ç ç”Ÿæˆï¼Œä»£ç ä¼˜åŒ–ï¼Œæœºå™¨ç ç”Ÿæˆ 3.é“¾æ¥ ","date":"2023-12-01","objectID":"/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0go%E7%9A%84runtimego%E7%9A%84%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8Bgo%E7%9A%84%E8%BF%90%E8%A1%8C%E8%BF%87%E7%A8%8B/:1:2","tags":["Goåº•å±‚"],"title":"å­¦ä¹ ç¬”è®°ï¼šGoçš„runtimeï¼ŒGoçš„ç¼–è¯‘è¿‡ç¨‹ï¼ŒGoçš„è¿è¡Œè¿‡ç¨‹","uri":"/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0go%E7%9A%84runtimego%E7%9A%84%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8Bgo%E7%9A%84%E8%BF%90%E8%A1%8C%E8%BF%87%E7%A8%8B/"},{"categories":["Go"],"content":"Goç¨‹åºæ˜¯å¦‚ä½•è¿è¡Œçš„ï¼Ÿ A:ç¨‹åºçš„å…¥å£æ˜¯mainæ–¹æ³•å—ï¼Ÿï¼š ä¸æ˜¯çš„ã€‚æ˜¯runtimeåŒ…ä¸‹çš„rt0_XXX.s(ä¸æ˜¯goç¨‹åºï¼Œæ˜¯ä¸€ä¸ªæ±‡ç¼–è¯­è¨€) B:è¿è¡Œæ­¥éª¤ï¼š 1.è¯»å–å‘½ä»¤è¡Œå‚æ•° å¤åˆ¶å‚æ•°æ•°é‡argcå’Œå‚æ•°å€¼argvåˆ°æ ˆä¸Š 2.åˆå§‹åŒ–g0æ‰§è¡Œæ ˆ a.g0æ˜¯ä¸ºäº†è°ƒåº¦åç¨‹è€Œäº§ç”Ÿçš„åç¨‹ b.g0æ˜¯æ¯ä¸ªGoç¨‹åºçš„ç¬¬ä¸€ä¸ªåç¨‹ 3.è¿è¡Œæ—¶æ£€æµ‹ a.æ£€æŸ¥å„ç§ç±»å‹çš„é•¿åº¦ b.æ£€æŸ¥æŒ‡é’ˆæ“ä½œ c.æ£€æŸ¥ç»“æ„ä½“å­—æ®µçš„åç§»é‡ d.æ£€æŸ¥atomicåŸå­æ“ä½œ e.æ£€æŸ¥CASæ“ä½œ f.æ£€æŸ¥æ ˆå¤§å°æ˜¯å¦æ˜¯2çš„å¹‚æ¬¡ 4.å‚æ•°åˆå§‹åŒ– runtime.args a.å¯¹å‘½ä»¤è¡Œä¸­çš„å‚æ•°è¿›è¡Œå¤„ç† b.å‚æ•°æ•°é‡èµ‹å€¼ç»™argc int32 c.å‚æ•°å€¼èµ‹å€¼ç»™argv **byte 5.è°ƒåº¦å™¨åˆå§‹åŒ– runtime.schedinit a.å…¨å±€æ ˆç©ºé—´å†…å­˜åˆ†é… b.åŠ è½½å‘½ä»¤è¡Œå‚æ•°åˆ° os.Args c.å †å†…å­˜ç©ºé—´çš„åˆå§‹åŒ– d.åŠ è½½æ“ä½œç³»ç»Ÿç¯å¢ƒå˜é‡ e.åˆå§‹åŒ–å½“å‰ç³»ç»Ÿçº¿ç¨‹ f.åƒåœ¾å›æ”¶å™¨çš„å‚æ•°åˆå§‹åŒ–(GC) g.ç®—æ³•åˆå§‹åŒ–(map,hash) h.è®¾ç½® process æ•°é‡ 6.åˆ›å»ºä¸»åç¨‹ a.åˆ›å»ºä¸€ä¸ªæ–°çš„åç¨‹ï¼Œæ‰§è¡Œ runtime.main b.æ”¾å…¥è°ƒåº¦å™¨ç­‰å¾…è°ƒåº¦ 7.åˆå§‹åŒ– M a.åˆå§‹åŒ–ä¸€ä¸ªMï¼Œç”¨æ¥è°ƒåº¦ä¸»åç¨‹ 8.ä¸»åç¨‹æ‰§è¡Œä¸»å‡½æ•° a.æ‰§è¡Œruntimem åŒ…ä¸­çš„ init æ–¹æ³• b.å¯åŠ¨ GC åƒåœ¾æ”¶é›†å™¨ c.æ‰§è¡Œç”¨æˆ·åŒ…ä¾èµ–çš„ init æ–¹æ³• d.æ‰§è¡Œç”¨æˆ·ä¸»ç¨‹åº main.main() (mainåŒ…ä¸­çš„mainå‡½æ•°) C:æ€»ç»“ 1.Go å¯åŠ¨æ—¶ç»å†äº†æ£€æŸ¥ï¼Œå„ç§åˆå§‹åŒ–ï¼Œåˆå§‹åŒ–åç¨‹è°ƒåº¦çš„è¿‡ç¨‹ 2.main.main() ä¹Ÿæ˜¯åœ¨åç¨‹ä¸­è¿è¡Œçš„ ","date":"2023-12-01","objectID":"/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0go%E7%9A%84runtimego%E7%9A%84%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8Bgo%E7%9A%84%E8%BF%90%E8%A1%8C%E8%BF%87%E7%A8%8B/:1:3","tags":["Goåº•å±‚"],"title":"å­¦ä¹ ç¬”è®°ï¼šGoçš„runtimeï¼ŒGoçš„ç¼–è¯‘è¿‡ç¨‹ï¼ŒGoçš„è¿è¡Œè¿‡ç¨‹","uri":"/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0go%E7%9A%84runtimego%E7%9A%84%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8Bgo%E7%9A%84%E8%BF%90%E8%A1%8C%E8%BF%87%E7%A8%8B/"},{"categories":["æ‚äº‹"],"content":"ç¬¬ä¸€ç¯‡åšå®¢ï¼ŒåŸºäºhugo","date":"2023-12-01","objectID":"/first_post/","tags":["æ‚äº‹"],"title":"first post in hugo","uri":"/first_post/"},{"categories":["æ‚äº‹"],"content":"Hello world! å°†ä¼šåœ¨è¿™é‡Œç»§ç»­åšå®¢çš„æ›´æ–° ","date":"2023-12-01","objectID":"/first_post/:0:0","tags":["æ‚äº‹"],"title":"first post in hugo","uri":"/first_post/"}]